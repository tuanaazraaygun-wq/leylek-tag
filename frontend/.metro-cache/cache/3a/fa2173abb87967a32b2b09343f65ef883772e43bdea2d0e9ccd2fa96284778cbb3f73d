{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _classCallCheck = require(_dependencyMap[0]).default;\n  var _createClass = require(_dependencyMap[1]).default;\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.WebSocketFactory = undefined;\n  /**\n   * Utilities for creating WebSocket instances across runtimes.\n   */\n  var WebSocketFactory = /*#__PURE__*/function () {\n    /**\n     * Static-only utility â€“ prevent instantiation.\n     */\n    function WebSocketFactory() {\n      _classCallCheck(this, WebSocketFactory);\n    }\n    return _createClass(WebSocketFactory, null, [{\n      key: \"detectEnvironment\",\n      value: function detectEnvironment() {\n        var _a;\n        if (typeof WebSocket !== 'undefined') {\n          return {\n            type: 'native',\n            constructor: WebSocket\n          };\n        }\n        if (typeof globalThis !== 'undefined' && typeof globalThis.WebSocket !== 'undefined') {\n          return {\n            type: 'native',\n            constructor: globalThis.WebSocket\n          };\n        }\n        if (typeof global !== 'undefined' && typeof global.WebSocket !== 'undefined') {\n          return {\n            type: 'native',\n            constructor: global.WebSocket\n          };\n        }\n        if (typeof globalThis !== 'undefined' && typeof globalThis.WebSocketPair !== 'undefined' && typeof globalThis.WebSocket === 'undefined') {\n          return {\n            type: 'cloudflare',\n            error: 'Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.',\n            workaround: 'Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime.'\n          };\n        }\n        if (typeof globalThis !== 'undefined' && globalThis.EdgeRuntime || typeof navigator !== 'undefined' && ((_a = navigator.userAgent) === null || _a === undefined ? undefined : _a.includes('Vercel-Edge'))) {\n          return {\n            type: 'unsupported',\n            error: 'Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.',\n            workaround: 'Use serverless functions or a different deployment target for WebSocket functionality.'\n          };\n        }\n        if (typeof process !== 'undefined') {\n          // Use dynamic property access to avoid Next.js Edge Runtime static analysis warnings\n          var processVersions = process['versions'];\n          if (processVersions && processVersions['node']) {\n            // Remove 'v' prefix if present and parse the major version\n            var versionString = processVersions['node'];\n            var nodeVersion = parseInt(versionString.replace(/^v/, '').split('.')[0]);\n            // Node.js 22+ should have native WebSocket\n            if (nodeVersion >= 22) {\n              // Check if native WebSocket is available (should be in Node.js 22+)\n              if (typeof globalThis.WebSocket !== 'undefined') {\n                return {\n                  type: 'native',\n                  constructor: globalThis.WebSocket\n                };\n              }\n              // If not available, user needs to provide it\n              return {\n                type: 'unsupported',\n                error: `Node.js ${nodeVersion} detected but native WebSocket not found.`,\n                workaround: 'Provide a WebSocket implementation via the transport option.'\n              };\n            }\n            // Node.js < 22 doesn't have native WebSocket\n            return {\n              type: 'unsupported',\n              error: `Node.js ${nodeVersion} detected without native WebSocket support.`,\n              workaround: \"For Node.js < 22, install \\\"ws\\\" package and provide it via the transport option:\\nimport ws from \\\"ws\\\"\\nnew RealtimeClient(url, { transport: ws })\"\n            };\n          }\n        }\n        return {\n          type: 'unsupported',\n          error: 'Unknown JavaScript runtime without WebSocket support.',\n          workaround: \"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation.\"\n        };\n      }\n      /**\n       * Returns the best available WebSocket constructor for the current runtime.\n       *\n       * @example\n       * ```ts\n       * const WS = WebSocketFactory.getWebSocketConstructor()\n       * const socket = new WS('wss://realtime.supabase.co/socket')\n       * ```\n       */\n    }, {\n      key: \"getWebSocketConstructor\",\n      value: function getWebSocketConstructor() {\n        var env = this.detectEnvironment();\n        if (env.constructor) {\n          return env.constructor;\n        }\n        var errorMessage = env.error || 'WebSocket not supported in this environment.';\n        if (env.workaround) {\n          errorMessage += `\\n\\nSuggested solution: ${env.workaround}`;\n        }\n        throw new Error(errorMessage);\n      }\n      /**\n       * Creates a WebSocket using the detected constructor.\n       *\n       * @example\n       * ```ts\n       * const socket = WebSocketFactory.createWebSocket('wss://realtime.supabase.co/socket')\n       * ```\n       */\n    }, {\n      key: \"createWebSocket\",\n      value: function createWebSocket(url, protocols) {\n        var WS = this.getWebSocketConstructor();\n        return new WS(url, protocols);\n      }\n      /**\n       * Detects whether the runtime can establish WebSocket connections.\n       *\n       * @example\n       * ```ts\n       * if (!WebSocketFactory.isWebSocketSupported()) {\n       *   console.warn('Falling back to long polling')\n       * }\n       * ```\n       */\n    }, {\n      key: \"isWebSocketSupported\",\n      value: function isWebSocketSupported() {\n        try {\n          var env = this.detectEnvironment();\n          return env.type === 'native' || env.type === 'ws';\n        } catch (_a) {\n          return false;\n        }\n      }\n    }]);\n  }();\n  exports.WebSocketFactory = WebSocketFactory;\n  exports.default = WebSocketFactory;\n});","lineCount":153,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13],[4,6,1,13,"_classCallCheck"],[4,21,1,13],[4,24,1,13,"require"],[4,31,1,13],[4,32,1,13,"_dependencyMap"],[4,46,1,13],[4,51,1,13,"default"],[4,58,1,13],[5,2,1,13],[5,6,1,13,"_createClass"],[5,18,1,13],[5,21,1,13,"require"],[5,28,1,13],[5,29,1,13,"_dependencyMap"],[5,43,1,13],[5,48,1,13,"default"],[5,55,1,13],[6,2,2,0,"Object"],[6,8,2,6],[6,9,2,7,"defineProperty"],[6,23,2,21],[6,24,2,22,"exports"],[6,31,2,29],[6,33,2,31],[6,45,2,43],[6,47,2,45],[7,4,2,47,"value"],[7,9,2,52],[7,11,2,54],[8,2,2,59],[8,3,2,60],[8,4,2,61],[9,2,3,0,"exports"],[9,9,3,7],[9,10,3,8,"WebSocketFactory"],[9,26,3,24],[9,29,3,24,"undefined"],[9,38,3,33],[10,2,4,0],[11,0,5,0],[12,0,6,0],[13,2,4,0],[13,6,7,6,"WebSocketFactory"],[13,22,7,22],[14,4,8,4],[15,0,9,0],[16,0,10,0],[17,4,11,4],[17,13,11,4,"WebSocketFactory"],[17,30,11,4],[17,32,11,18],[18,6,11,18,"_classCallCheck"],[18,21,11,18],[18,28,11,18,"WebSocketFactory"],[18,44,11,18],[19,4,11,20],[20,4,11,21],[20,11,11,21,"_createClass"],[20,23,11,21],[20,24,11,21,"WebSocketFactory"],[20,40,11,21],[21,6,11,21,"key"],[21,9,11,21],[22,6,11,21,"value"],[22,11,11,21],[22,13,12,4],[22,22,12,11,"detectEnvironment"],[22,39,12,28,"detectEnvironment"],[22,40,12,28],[22,42,12,31],[23,8,13,8],[23,12,13,12,"_a"],[23,14,13,14],[24,8,14,8],[24,12,14,12],[24,19,14,19,"WebSocket"],[24,28,14,28],[24,33,14,33],[24,44,14,44],[24,46,14,46],[25,10,15,12],[25,17,15,19],[26,12,15,21,"type"],[26,16,15,25],[26,18,15,27],[26,26,15,35],[27,12,15,37,"constructor"],[27,23,15,48],[27,25,15,50,"WebSocket"],[28,10,15,60],[28,11,15,61],[29,8,16,8],[30,8,17,8],[30,12,17,12],[30,19,17,19,"globalThis"],[30,29,17,29],[30,34,17,34],[30,45,17,45],[30,49,17,49],[30,56,17,56,"globalThis"],[30,66,17,66],[30,67,17,67,"WebSocket"],[30,76,17,76],[30,81,17,81],[30,92,17,92],[30,94,17,94],[31,10,18,12],[31,17,18,19],[32,12,18,21,"type"],[32,16,18,25],[32,18,18,27],[32,26,18,35],[33,12,18,37,"constructor"],[33,23,18,48],[33,25,18,50,"globalThis"],[33,35,18,60],[33,36,18,61,"WebSocket"],[34,10,18,71],[34,11,18,72],[35,8,19,8],[36,8,20,8],[36,12,20,12],[36,19,20,19,"global"],[36,25,20,25],[36,30,20,30],[36,41,20,41],[36,45,20,45],[36,52,20,52,"global"],[36,58,20,58],[36,59,20,59,"WebSocket"],[36,68,20,68],[36,73,20,73],[36,84,20,84],[36,86,20,86],[37,10,21,12],[37,17,21,19],[38,12,21,21,"type"],[38,16,21,25],[38,18,21,27],[38,26,21,35],[39,12,21,37,"constructor"],[39,23,21,48],[39,25,21,50,"global"],[39,31,21,56],[39,32,21,57,"WebSocket"],[40,10,21,67],[40,11,21,68],[41,8,22,8],[42,8,23,8],[42,12,23,12],[42,19,23,19,"globalThis"],[42,29,23,29],[42,34,23,34],[42,45,23,45],[42,49,24,12],[42,56,24,19,"globalThis"],[42,66,24,29],[42,67,24,30,"WebSocketPair"],[42,80,24,43],[42,85,24,48],[42,96,24,59],[42,100,25,12],[42,107,25,19,"globalThis"],[42,117,25,29],[42,118,25,30,"WebSocket"],[42,127,25,39],[42,132,25,44],[42,143,25,55],[42,145,25,57],[43,10,26,12],[43,17,26,19],[44,12,27,16,"type"],[44,16,27,20],[44,18,27,22],[44,30,27,34],[45,12,28,16,"error"],[45,17,28,21],[45,19,28,23],[45,108,28,112],[46,12,29,16,"workaround"],[46,22,29,26],[46,24,29,28],[47,10,30,12],[47,11,30,13],[48,8,31,8],[49,8,32,8],[49,12,32,13],[49,19,32,20,"globalThis"],[49,29,32,30],[49,34,32,35],[49,45,32,46],[49,49,32,50,"globalThis"],[49,59,32,60],[49,60,32,61,"EdgeRuntime"],[49,71,32,72],[49,75,33,13],[49,82,33,20,"navigator"],[49,91,33,29],[49,96,33,34],[49,107,33,45],[49,112,33,50],[49,113,33,51,"_a"],[49,115,33,53],[49,118,33,56,"navigator"],[49,127,33,65],[49,128,33,66,"userAgent"],[49,137,33,75],[49,143,33,81],[49,147,33,85],[49,151,33,89,"_a"],[49,153,33,91],[49,158,33,91,"undefined"],[49,167,33,102],[49,170,33,102,"undefined"],[49,179,33,102],[49,182,33,114,"_a"],[49,184,33,116],[49,185,33,117,"includes"],[49,193,33,125],[49,194,33,126],[49,207,33,139],[49,208,33,140],[49,209,33,142],[49,211,33,144],[50,10,34,12],[50,17,34,19],[51,12,35,16,"type"],[51,16,35,20],[51,18,35,22],[51,31,35,35],[52,12,36,16,"error"],[52,17,36,21],[52,19,36,23],[52,118,36,122],[53,12,37,16,"workaround"],[53,22,37,26],[53,24,37,28],[54,10,38,12],[54,11,38,13],[55,8,39,8],[56,8,40,8],[56,12,40,12],[56,19,40,19,"process"],[56,26,40,26],[56,31,40,31],[56,42,40,42],[56,44,40,44],[57,10,41,12],[58,10,42,12],[58,14,42,18,"processVersions"],[58,29,42,33],[58,32,42,36,"process"],[58,39,42,43],[58,40,42,44],[58,50,42,54],[58,51,42,55],[59,10,43,12],[59,14,43,16,"processVersions"],[59,29,43,31],[59,33,43,35,"processVersions"],[59,48,43,50],[59,49,43,51],[59,55,43,57],[59,56,43,58],[59,58,43,60],[60,12,44,16],[61,12,45,16],[61,16,45,22,"versionString"],[61,29,45,35],[61,32,45,38,"processVersions"],[61,47,45,53],[61,48,45,54],[61,54,45,60],[61,55,45,61],[62,12,46,16],[62,16,46,22,"nodeVersion"],[62,27,46,33],[62,30,46,36,"parseInt"],[62,38,46,44],[62,39,46,45,"versionString"],[62,52,46,58],[62,53,46,59,"replace"],[62,60,46,66],[62,61,46,67],[62,65,46,71],[62,67,46,73],[62,69,46,75],[62,70,46,76],[62,71,46,77,"split"],[62,76,46,82],[62,77,46,83],[62,80,46,86],[62,81,46,87],[62,82,46,88],[62,83,46,89],[62,84,46,90],[62,85,46,91],[63,12,47,16],[64,12,48,16],[64,16,48,20,"nodeVersion"],[64,27,48,31],[64,31,48,35],[64,33,48,37],[64,35,48,39],[65,14,49,20],[66,14,50,20],[66,18,50,24],[66,25,50,31,"globalThis"],[66,35,50,41],[66,36,50,42,"WebSocket"],[66,45,50,51],[66,50,50,56],[66,61,50,67],[66,63,50,69],[67,16,51,24],[67,23,51,31],[68,18,51,33,"type"],[68,22,51,37],[68,24,51,39],[68,32,51,47],[69,18,51,49,"constructor"],[69,29,51,60],[69,31,51,62,"globalThis"],[69,41,51,72],[69,42,51,73,"WebSocket"],[70,16,51,83],[70,17,51,84],[71,14,52,20],[72,14,53,20],[73,14,54,20],[73,21,54,27],[74,16,55,24,"type"],[74,20,55,28],[74,22,55,30],[74,35,55,43],[75,16,56,24,"error"],[75,21,56,29],[75,23,56,31],[75,34,56,42,"nodeVersion"],[75,45,56,53],[75,88,56,96],[76,16,57,24,"workaround"],[76,26,57,34],[76,28,57,36],[77,14,58,20],[77,15,58,21],[78,12,59,16],[79,12,60,16],[80,12,61,16],[80,19,61,23],[81,14,62,20,"type"],[81,18,62,24],[81,20,62,26],[81,33,62,39],[82,14,63,20,"error"],[82,19,63,25],[82,21,63,27],[82,32,63,38,"nodeVersion"],[82,43,63,49],[82,88,63,94],[83,14,64,20,"workaround"],[83,24,64,30],[84,12,67,16],[84,13,67,17],[85,10,68,12],[86,8,69,8],[87,8,70,8],[87,15,70,15],[88,10,71,12,"type"],[88,14,71,16],[88,16,71,18],[88,29,71,31],[89,10,72,12,"error"],[89,15,72,17],[89,17,72,19],[89,72,72,74],[90,10,73,12,"workaround"],[90,20,73,22],[90,22,73,24],[91,8,74,8],[91,9,74,9],[92,6,75,4],[93,6,76,4],[94,0,77,0],[95,0,78,0],[96,0,79,0],[97,0,80,0],[98,0,81,0],[99,0,82,0],[100,0,83,0],[101,0,84,0],[102,4,76,4],[103,6,76,4,"key"],[103,9,76,4],[104,6,76,4,"value"],[104,11,76,4],[104,13,85,4],[104,22,85,11,"getWebSocketConstructor"],[104,45,85,34,"getWebSocketConstructor"],[104,46,85,34],[104,48,85,37],[105,8,86,8],[105,12,86,14,"env"],[105,15,86,17],[105,18,86,20],[105,22,86,24],[105,23,86,25,"detectEnvironment"],[105,40,86,42],[105,41,86,43],[105,42,86,44],[106,8,87,8],[106,12,87,12,"env"],[106,15,87,15],[106,16,87,16,"constructor"],[106,27,87,27],[106,29,87,29],[107,10,88,12],[107,17,88,19,"env"],[107,20,88,22],[107,21,88,23,"constructor"],[107,32,88,34],[108,8,89,8],[109,8,90,8],[109,12,90,12,"errorMessage"],[109,24,90,24],[109,27,90,27,"env"],[109,30,90,30],[109,31,90,31,"error"],[109,36,90,36],[109,40,90,40],[109,86,90,86],[110,8,91,8],[110,12,91,12,"env"],[110,15,91,15],[110,16,91,16,"workaround"],[110,26,91,26],[110,28,91,28],[111,10,92,12,"errorMessage"],[111,22,92,24],[111,26,92,28],[111,53,92,55,"env"],[111,56,92,58],[111,57,92,59,"workaround"],[111,67,92,69],[111,69,92,71],[112,8,93,8],[113,8,94,8],[113,14,94,14],[113,18,94,18,"Error"],[113,23,94,23],[113,24,94,24,"errorMessage"],[113,36,94,36],[113,37,94,37],[114,6,95,4],[115,6,96,4],[116,0,97,0],[117,0,98,0],[118,0,99,0],[119,0,100,0],[120,0,101,0],[121,0,102,0],[122,0,103,0],[123,4,96,4],[124,6,96,4,"key"],[124,9,96,4],[125,6,96,4,"value"],[125,11,96,4],[125,13,104,4],[125,22,104,11,"createWebSocket"],[125,37,104,26,"createWebSocket"],[125,38,104,27,"url"],[125,41,104,30],[125,43,104,32,"protocols"],[125,52,104,41],[125,54,104,43],[126,8,105,8],[126,12,105,14,"WS"],[126,14,105,16],[126,17,105,19],[126,21,105,23],[126,22,105,24,"getWebSocketConstructor"],[126,45,105,47],[126,46,105,48],[126,47,105,49],[127,8,106,8],[127,15,106,15],[127,19,106,19,"WS"],[127,21,106,21],[127,22,106,22,"url"],[127,25,106,25],[127,27,106,27,"protocols"],[127,36,106,36],[127,37,106,37],[128,6,107,4],[129,6,108,4],[130,0,109,0],[131,0,110,0],[132,0,111,0],[133,0,112,0],[134,0,113,0],[135,0,114,0],[136,0,115,0],[137,0,116,0],[138,0,117,0],[139,4,108,4],[140,6,108,4,"key"],[140,9,108,4],[141,6,108,4,"value"],[141,11,108,4],[141,13,118,4],[141,22,118,11,"isWebSocketSupported"],[141,42,118,31,"isWebSocketSupported"],[141,43,118,31],[141,45,118,34],[142,8,119,8],[142,12,119,12],[143,10,120,12],[143,14,120,18,"env"],[143,17,120,21],[143,20,120,24],[143,24,120,28],[143,25,120,29,"detectEnvironment"],[143,42,120,46],[143,43,120,47],[143,44,120,48],[144,10,121,12],[144,17,121,19,"env"],[144,20,121,22],[144,21,121,23,"type"],[144,25,121,27],[144,30,121,32],[144,38,121,40],[144,42,121,44,"env"],[144,45,121,47],[144,46,121,48,"type"],[144,50,121,52],[144,55,121,57],[144,59,121,61],[145,8,122,8],[145,9,122,9],[145,10,123,8],[145,17,123,15,"_a"],[145,19,123,17],[145,21,123,19],[146,10,124,12],[146,17,124,19],[146,22,124,24],[147,8,125,8],[148,6,126,4],[149,4,126,5],[150,2,126,5],[151,2,128,0,"exports"],[151,9,128,7],[151,10,128,8,"WebSocketFactory"],[151,26,128,24],[151,29,128,27,"WebSocketFactory"],[151,45,128,43],[152,2,129,0,"exports"],[152,9,129,7],[152,10,129,8,"default"],[152,17,129,15],[152,20,129,18,"WebSocketFactory"],[152,36,129,34],[153,0,129,35],[153,3]],"functionMap":{"names":["<global>","WebSocketFactory","WebSocketFactory#constructor","WebSocketFactory.detectEnvironment","WebSocketFactory.getWebSocketConstructor","WebSocketFactory.createWebSocket","WebSocketFactory.isWebSocketSupported"],"mappings":"AAA;ACM;ICI,iBD;IEC;KF+D;IGU;KHU;IIS;KJG;IKW;KLQ;CDC"},"hasCjsExports":true},"type":"js/module"}]}