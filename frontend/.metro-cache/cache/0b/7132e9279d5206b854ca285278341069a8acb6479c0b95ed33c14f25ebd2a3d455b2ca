{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":215},"end":{"line":11,"column":65,"index":280}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Alert","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"PEUC6jrQVoAGZ2qYkvimljMOyJI=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":13,"column":0,"index":319},"end":{"line":13,"column":39,"index":358}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){\"use strict\";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"default\",{enumerable:!0,get:function(){return c}}),_e.useOffers=s;var t=r(d[0]),f=e(r(d[1])),o=e(r(d[2]));const n=`${o.default.expoConfig?.extra?.backendUrl||process.env.EXPO_PUBLIC_BACKEND_URL||'https://taxiapp-cards.preview.emergentagent.com'}/api`;function s(e){const{userId:o,tagId:s,requestId:c,isDriver:u=!1,enabled:_=!0,socket:l,onNewOffer:p,onOfferAccepted:O,onOfferRejected:v}=e,[h,k]=(0,t.useState)([]),[S,b]=(0,t.useState)(!1),[w,C]=(0,t.useState)(null),E=(0,t.useRef)(!0),y=(0,t.useRef)(new Set),T=(0,t.useRef)(null);(0,t.useEffect)(()=>{if(E.current=!0,!_||!l)return;c&&c!==T.current&&(console.log('\\ud83d\\udd04 [useOffers] Request ID changed, clearing offers'),T.current=c,k([]),y.current.clear());const e=e=>{if(!E.current)return;const t=e.offer_id||e.id,f=e.request_id;if(y.current.has(t))return void console.log('\\u26a0\\ufe0f [useOffers] Duplicate offer ignored:',t);if(c&&f&&f!==c)return void console.log('\\u26a0\\ufe0f [useOffers] Wrong request_id, ignoring offer');y.current.add(t);const o={id:t,offer_id:t,request_id:f,tag_id:e.tag_id||s||'',driver_id:e.driver_id,driver_name:e.driver_name||'\\u015eof\\xf6r',driver_rating:e.driver_rating||5,driver_photo:e.driver_photo,price:e.price,notes:e.notes,status:e.status||'pending',vehicle_model:e.vehicle_model,vehicle_color:e.vehicle_color,distance_km:e.distance_km,estimated_arrival_min:e.estimated_arrival_min,created_at:e.created_at||(new Date).toISOString(),_optimistic:!1};console.log('\\ud83d\\udce5 [useOffers] NEW OFFER received:',o.price,'TL from',o.driver_name),k(e=>e.some(e=>e.id===t||e.offer_id===t)?e:[o,...e]),p?.(o)},t=e=>{E.current&&(console.log('\\u2705 [useOffers] OFFER ACCEPTED:',e),k(t=>t.map(t=>t.id===e.offer_id||t.offer_id===e.offer_id?{...t,status:'accepted'}:t)),O?.(e))},f=e=>{E.current&&(console.log('\\u274c [useOffers] OFFER REJECTED:',e),k(t=>t.filter(t=>t.id!==e.offer_id&&t.offer_id!==e.offer_id)),v?.(e))},o=e=>{E.current&&(console.log('\\u2705 [useOffers] Offer sent acknowledged:',e),b(!1),e.offer_id&&k(t=>t.map(t=>t._optimistic?{...t,id:e.offer_id,offer_id:e.offer_id,_optimistic:!1}:t)))},n=e=>{E.current&&(e.request_id!==c&&e.tag_id!==s||(console.log('\\ud83d\\udeab [useOffers] TAG CANCELLED, clearing offers'),k([]),y.current.clear()))};return l.on('new_offer',e),l.on('offer_accepted',t),l.on('offer_rejected',f),l.on('offer_sent_ack',o),l.on('tag_cancelled',n),console.log('\\ud83d\\udce1 [useOffers] Socket listeners registered'),()=>{E.current=!1,l.off('new_offer',e),l.off('offer_accepted',t),l.off('offer_rejected',f),l.off('offer_sent_ack',o),l.off('tag_cancelled',n),console.log('\\ud83e\\uddf9 [useOffers] Socket listeners removed')}},[_,l,c,s,p,O,v]);const q=(0,t.useCallback)(async(e,t,s,c,u)=>{if(!o||!l)return!1;const _=`optimistic_${Date.now()}`,p={id:_,request_id:s,tag_id:e,driver_id:o,driver_name:u||'Sen',driver_rating:5,price:t,status:'pending',notes:'G\\xf6nderiliyor...',created_at:(new Date).toISOString(),_optimistic:!0};k(e=>[p,...e]),b(!0);try{const p=new AbortController,O=setTimeout(()=>p.abort(),1e4),v=await fetch(`${n}/driver/send-offer?user_id=${o}`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({tag_id:e,request_id:s,price:t,latitude:c?.latitude||0,longitude:c?.longitude||0}),signal:p.signal});if(clearTimeout(O),!E.current)return!0;const h=await v.json();return h.success||h.offer_id?(l.emit('send_offer',{request_id:s,tag_id:e,offer_id:h.offer_id,driver_id:o,driver_name:u,price:t,notes:''}),k(e=>e.map(e=>e.id===_?{...e,id:h.offer_id,offer_id:h.offer_id,notes:'',_optimistic:!1}:e)),console.log('\\u2705 [useOffers] Offer sent:',h.offer_id),b(!1),!0):(k(e=>e.filter(e=>e.id!==_)),b(!1),f.default.alert('Hata',h.detail||'Teklif g\\xf6nderilemedi'),!1)}catch(e){return!!E.current&&(b(!1),k(e=>e.filter(e=>e.id!==_)),'AbortError'===e.name?f.default.alert('Zaman A\\u015f\\u0131m\\u0131','Sunucu yan\\u0131t vermedi'):f.default.alert('Hata','Ba\\u011flant\\u0131 hatas\\u0131'),!1)}},[o,l]),j=(0,t.useCallback)(async(e,t)=>{if(!o||!l)return!1;k(t=>t.map(t=>t.id===e||t.offer_id===e?{...t,status:'accepting'}:t));try{const u=await fetch(`${n}/passenger/accept-offer?user_id=${o}&offer_id=${e}`,{method:'POST'});if(!E.current)return!0;const _=await u.json();return _.success?(l.emit('accept_offer',{request_id:c,offer_id:e,driver_id:t,tag_id:s,passenger_id:o}),k(t=>t.filter(t=>t.id===e||t.offer_id===e)),!0):(k(t=>t.map(t=>t.id===e||t.offer_id===e?{...t,status:'pending'}:t)),f.default.alert('Hata',_.detail||'Teklif kabul edilemedi'),!1)}catch(t){return!!E.current&&(k(t=>t.map(t=>t.id===e||t.offer_id===e?{...t,status:'pending'}:t)),f.default.alert('Hata','Ba\\u011flant\\u0131 hatas\\u0131'),!1)}},[o,l,c,s]),D=(0,t.useCallback)(async(e,t)=>{if(!o||!l)return!1;const f=h.find(t=>t.id===e||t.offer_id===e);k(t=>t.filter(t=>t.id!==e&&t.offer_id!==e));try{return await fetch(`${n}/passenger/dismiss-offer?user_id=${o}&offer_id=${e}`,{method:'POST'}),l.emit('reject_offer',{request_id:c,offer_id:e,driver_id:t}),!0}catch{return f&&E.current&&k(e=>[f,...e]),!1}},[o,l,c,h]),R=(0,t.useCallback)(()=>{k([]),y.current.clear(),console.log('\\ud83e\\uddf9 [useOffers] Offers cleared')},[]),$=(0,t.useCallback)(e=>{const t=e.id||e.offer_id;t&&!y.current.has(t)&&(y.current.add(t),k(t=>[e,...t]))},[]);return{offers:h.filter(e=>'pending'===e.status||'accepting'===e.status||'accepted'===e.status),isLoading:S,error:w,sendOffer:q,acceptOffer:j,rejectOffer:D,clearOffers:R,addOffer:$}}var c=s});","lineCount":1,"map":[[1,143,454,0,"Object"],[1,150,454,0,"defineProperty"],[1,165,454,0,"_e"],[1,168,454,0],[1,179,454,0,"enumerable"],[1,191,454,0],[1,193,454,0,"get"],[1,197,454,0],[1,215,454,0,"_default"],[1,216,454,0],[1,220,70,0,"_e"],[1,223,70,0,"useOffers"],[1,235,11,0],[1,239,11,0,"_react"],[1,241,11,0,"r"],[1,243,11,0,"d"],[1,245,11,0],[1,249,11,65,"Alert"],[1,251,11,65,"_interopDefault"],[1,253,11,65,"r"],[1,255,11,65,"d"],[1,257,11,65],[1,262,13,0,"Constants"],[1,264,13,0,"_interopDefault"],[1,266,13,0,"r"],[1,268,13,0,"d"],[1,270,13,0],[1,275,15,0],[1,281,18,6,"API_URL"],[1,283,18,16],[1,286,15,20,"Constants"],[1,288,15,29,"default"],[1,296,15,30,"expoConfig"],[1,308,15,42,"extra"],[1,315,15,49,"backendUrl"],[1,327,16,20,"process"],[1,335,16,28,"env"],[1,339,16,32,"EXPO_PUBLIC_BACKEND_URL"],[1,364,17,20],[1,420,70,7],[1,429,70,16,"useOffers"],[1,431,70,26,"options"],[1,434,71,2],[1,440,71,8,"userId"],[1,447,72,4,"userId"],[1,449,72,10,"tagId"],[1,455,73,4,"tagId"],[1,457,73,9,"requestId"],[1,467,74,4,"requestId"],[1,469,74,13,"isDriver"],[1,478,75,4,"isDriver"],[1,481,75,15],[1,483,75,20,"enabled"],[1,491,76,4,"enabled"],[1,494,76,14],[1,496,76,18,"socket"],[1,503,77,4,"socket"],[1,505,77,10,"onNewOffer"],[1,516,78,4,"onNewOffer"],[1,518,78,14,"onOfferAccepted"],[1,534,79,4,"onOfferAccepted"],[1,536,79,19,"onOfferRejected"],[1,552,80,4,"onOfferRejected"],[1,555,81,6,"options"],[1,558,83,9,"offers"],[1,560,83,17,"setOffers"],[1,564,83,30],[1,566,83,30,"useState"],[1,568,83,38,"useState"],[1,578,83,48],[1,583,84,9,"isLoading"],[1,585,84,20,"setIsLoading"],[1,589,84,36],[1,591,84,36,"useState"],[1,593,84,44,"useState"],[1,604,84,45],[1,608,85,9,"error"],[1,610,85,16,"setError"],[1,614,85,28],[1,616,85,28,"useState"],[1,618,85,36,"useState"],[1,628,85,52],[1,634,87,8,"isMountedRef"],[1,637,87,23],[1,639,87,23,"useRef"],[1,641,87,29,"useRef"],[1,650,87,30],[1,653,88,8,"seenOfferIdsRef"],[1,656,88,26],[1,658,88,26,"useRef"],[1,660,88,32,"useRef"],[1,668,88,46],[1,672,88,50,"Set"],[1,677,89,8,"currentRequestIdRef"],[1,680,89,30],[1,682,89,30,"useRef"],[1,684,89,36,"useRef"],[1,692,89,52],[1,699,93,2],[1,701,93,2,"useEffect"],[1,703,93,11,"useEffect"],[1,714,93,12],[1,719,96,4],[1,722,94,4,"isMountedRef"],[1,724,94,17,"current"],[1,733,94,27],[1,736,96,9,"enabled"],[1,740,96,21,"socket"],[1,742,97,6],[1,749,101,8,"requestId"],[1,752,101,21,"requestId"],[1,756,101,35,"currentRequestIdRef"],[1,758,101,55,"current"],[1,768,102,6,"console"],[1,776,102,14,"log"],[1,780,102,18],[1,844,103,6,"currentRequestIdRef"],[1,846,103,26,"current"],[1,854,103,36,"requestId"],[1,856,104,6,"setOffers"],[1,858,104,16],[1,862,105,6,"seenOfferIdsRef"],[1,864,105,22,"current"],[1,872,105,30,"clear"],[1,881,109,4],[1,887,109,10,"handleNewOffer"],[1,889,109,28,"data"],[1,893,110,6],[1,897,110,11,"isMountedRef"],[1,899,110,24,"current"],[1,907,110,33],[1,914,112,6],[1,920,112,12,"offerId"],[1,922,112,22,"data"],[1,924,112,27,"offer_id"],[1,934,112,39,"data"],[1,936,112,44,"id"],[1,939,113,12,"incomingRequestId"],[1,941,113,32,"data"],[1,943,113,37,"request_id"],[1,954,116,6],[1,957,116,10,"seenOfferIdsRef"],[1,959,116,26,"current"],[1,967,116,34,"has"],[1,971,116,38,"offerId"],[1,974,118,8],[1,986,117,8,"console"],[1,994,117,16,"log"],[1,998,117,20],[1,1050,117,63,"offerId"],[1,1053,122,6],[1,1056,122,10,"requestId"],[1,1059,122,23,"incomingRequestId"],[1,1062,122,44,"incomingRequestId"],[1,1066,122,66,"requestId"],[1,1068,124,8],[1,1080,123,8,"console"],[1,1088,123,16,"log"],[1,1092,123,20],[1,1153,127,6,"seenOfferIdsRef"],[1,1155,127,22,"current"],[1,1163,127,30,"add"],[1,1167,127,34,"offerId"],[1,1170,129,6],[1,1176,129,12,"newOffer"],[1,1178,129,30],[1,1179,130,8,"id"],[1,1182,130,12,"offerId"],[1,1184,131,8,"offer_id"],[1,1193,131,18,"offerId"],[1,1195,132,8,"request_id"],[1,1206,132,20,"incomingRequestId"],[1,1208,133,8,"tag_id"],[1,1215,133,16,"data"],[1,1217,133,21,"tag_id"],[1,1225,133,31,"tagId"],[1,1228,133,40],[1,1231,134,8,"driver_id"],[1,1241,134,19,"data"],[1,1243,134,24,"driver_id"],[1,1253,135,8,"driver_name"],[1,1265,135,21,"data"],[1,1267,135,26,"driver_name"],[1,1280,135,41],[1,1296,136,8,"driver_rating"],[1,1310,136,23,"data"],[1,1312,136,28,"driver_rating"],[1,1327,136,45],[1,1329,137,8,"driver_photo"],[1,1342,137,22,"data"],[1,1344,137,27,"driver_photo"],[1,1357,138,8,"price"],[1,1363,138,15,"data"],[1,1365,138,20,"price"],[1,1371,139,8,"notes"],[1,1377,139,15,"data"],[1,1379,139,20,"notes"],[1,1385,140,8,"status"],[1,1392,140,16,"data"],[1,1394,140,21,"status"],[1,1402,140,31],[1,1412,141,8,"vehicle_model"],[1,1426,141,23,"data"],[1,1428,141,28,"vehicle_model"],[1,1442,142,8,"vehicle_color"],[1,1456,142,23,"data"],[1,1458,142,28,"vehicle_color"],[1,1472,143,8,"distance_km"],[1,1484,143,21,"data"],[1,1486,143,26,"distance_km"],[1,1498,144,8,"estimated_arrival_min"],[1,1520,144,31,"data"],[1,1522,144,36,"estimated_arrival_min"],[1,1544,145,8,"created_at"],[1,1555,145,20,"data"],[1,1557,145,25,"created_at"],[1,1570,145,39],[1,1574,145,43,"Date"],[1,1580,145,50,"toISOString"],[1,1594,146,8,"_optimistic"],[1,1607,146,21],[1,1610,149,6,"console"],[1,1618,149,14,"log"],[1,1622,149,18],[1,1669,149,56,"newOffer"],[1,1671,149,65,"price"],[1,1677,149,72],[1,1687,149,83,"newOffer"],[1,1689,149,92,"driver_name"],[1,1702,151,6,"setOffers"],[1,1704,151,16,"prev"],[1,1707,153,12,"prev"],[1,1709,153,17,"some"],[1,1714,153,22,"o"],[1,1717,153,27,"o"],[1,1719,153,29,"id"],[1,1724,153,36,"offerId"],[1,1727,153,47,"o"],[1,1729,153,49,"offer_id"],[1,1740,153,62,"offerId"],[1,1743,154,17,"prev"],[1,1745,156,15],[1,1746,156,16,"newOffer"],[1,1751,156,29,"prev"],[1,1755,159,6,"onNewOffer"],[1,1759,159,19,"newOffer"],[1,1763,163,10,"handleOfferAccepted"],[1,1765,163,33,"data"],[1,1769,164,11,"isMountedRef"],[1,1771,164,24,"current"],[1,1781,165,6,"console"],[1,1789,165,14,"log"],[1,1793,165,18],[1,1830,165,51,"data"],[1,1833,167,6,"setOffers"],[1,1835,167,16,"prev"],[1,1838,167,24,"prev"],[1,1840,167,29,"map"],[1,1844,167,33,"o"],[1,1847,168,9,"o"],[1,1849,168,11,"id"],[1,1854,168,18,"data"],[1,1856,168,23,"offer_id"],[1,1866,168,35,"o"],[1,1868,168,37,"offer_id"],[1,1879,168,50,"data"],[1,1881,168,55,"offer_id"],[1,1890,169,12],[1,1894,169,17,"o"],[1,1896,169,20,"status"],[1,1903,169,28],[1,1915,170,12,"o"],[1,1919,173,6,"onOfferAccepted"],[1,1923,173,24,"data"],[1,1928,177,10,"handleOfferRejected"],[1,1930,177,33,"data"],[1,1934,178,11,"isMountedRef"],[1,1936,178,24,"current"],[1,1946,179,6,"console"],[1,1954,179,14,"log"],[1,1958,179,18],[1,1995,179,51,"data"],[1,1998,181,6,"setOffers"],[1,2000,181,16,"prev"],[1,2003,181,24,"prev"],[1,2005,181,29,"filter"],[1,2012,181,36,"o"],[1,2015,182,8,"o"],[1,2017,182,10,"id"],[1,2022,182,17,"data"],[1,2024,182,22,"offer_id"],[1,2034,182,34,"o"],[1,2036,182,36,"offer_id"],[1,2047,182,49,"data"],[1,2049,182,54,"offer_id"],[1,2060,185,6,"onOfferRejected"],[1,2064,185,24,"data"],[1,2069,189,10,"handleOfferSentAck"],[1,2071,189,32,"data"],[1,2075,190,11,"isMountedRef"],[1,2077,190,24,"current"],[1,2087,191,6,"console"],[1,2095,191,14,"log"],[1,2099,191,18],[1,2145,191,60,"data"],[1,2148,192,6,"setIsLoading"],[1,2151,192,19],[1,2154,195,10,"data"],[1,2156,195,15,"offer_id"],[1,2166,196,8,"setOffers"],[1,2168,196,18,"prev"],[1,2171,196,26,"prev"],[1,2173,196,31,"map"],[1,2177,196,35,"o"],[1,2180,197,10,"o"],[1,2182,197,12,"_optimistic"],[1,2194,198,14],[1,2198,198,19,"o"],[1,2200,198,22,"id"],[1,2203,198,26,"data"],[1,2205,198,31,"offer_id"],[1,2214,198,41,"offer_id"],[1,2223,198,51,"data"],[1,2225,198,56,"offer_id"],[1,2234,198,66,"_optimistic"],[1,2247,198,79],[1,2250,199,14,"o"],[1,2256,205,10,"handleTagCancelled"],[1,2258,205,32,"data"],[1,2262,206,11,"isMountedRef"],[1,2264,206,24,"current"],[1,2274,208,10,"data"],[1,2276,208,15,"request_id"],[1,2289,208,30,"requestId"],[1,2292,208,43,"data"],[1,2294,208,48,"tag_id"],[1,2303,208,59,"tagId"],[1,2307,209,8,"console"],[1,2315,209,16,"log"],[1,2319,209,20],[1,2378,210,8,"setOffers"],[1,2380,210,18],[1,2384,211,8,"seenOfferIdsRef"],[1,2386,211,24,"current"],[1,2394,211,32,"clear"],[1,2405,224,4],[1,2412,216,4,"socket"],[1,2414,216,11,"on"],[1,2417,216,14],[1,2429,216,27,"handleNewOffer"],[1,2432,217,4,"socket"],[1,2434,217,11,"on"],[1,2437,217,14],[1,2454,217,32,"handleOfferAccepted"],[1,2457,218,4,"socket"],[1,2459,218,11,"on"],[1,2462,218,14],[1,2479,218,32,"handleOfferRejected"],[1,2482,219,4,"socket"],[1,2484,219,11,"on"],[1,2487,219,14],[1,2504,219,32,"handleOfferSentAck"],[1,2507,220,4,"socket"],[1,2509,220,11,"on"],[1,2512,220,14],[1,2528,220,31,"handleTagCancelled"],[1,2531,222,4,"console"],[1,2539,222,12,"log"],[1,2543,222,16],[1,2599,224,11],[1,2604,225,6,"isMountedRef"],[1,2606,225,19,"current"],[1,2615,225,29],[1,2617,226,6,"socket"],[1,2619,226,13,"off"],[1,2623,226,17],[1,2635,226,30,"handleNewOffer"],[1,2638,227,6,"socket"],[1,2640,227,13,"off"],[1,2644,227,17],[1,2661,227,35,"handleOfferAccepted"],[1,2664,228,6,"socket"],[1,2666,228,13,"off"],[1,2670,228,17],[1,2687,228,35,"handleOfferRejected"],[1,2690,229,6,"socket"],[1,2692,229,13,"off"],[1,2696,229,17],[1,2713,229,35,"handleOfferSentAck"],[1,2716,230,6,"socket"],[1,2718,230,13,"off"],[1,2722,230,17],[1,2738,230,34,"handleTagCancelled"],[1,2741,231,6,"console"],[1,2749,231,14,"log"],[1,2753,231,18],[1,2808,233,5],[1,2809,233,6,"enabled"],[1,2811,233,15,"socket"],[1,2813,233,23,"requestId"],[1,2815,233,34,"tagId"],[1,2817,233,41,"onNewOffer"],[1,2819,233,53,"onOfferAccepted"],[1,2821,233,70,"onOfferRejected"],[1,2825,237,2],[1,2831,237,8,"sendOffer"],[1,2834,237,20],[1,2836,237,20,"useCallback"],[1,2838,237,31,"useCallback"],[1,2851,237,32,"async"],[1,2857,238,4,"targetTagId"],[1,2859,239,4,"price"],[1,2861,240,4,"targetRequestId"],[1,2863,241,4,"location"],[1,2865,242,4,"driverName"],[1,2870,244,4],[1,2874,244,9,"userId"],[1,2878,244,20,"socket"],[1,2880,244,28],[1,2887,244,35],[1,2889,247,4],[1,2895,247,10,"optimisticId"],[1,2897,247,25],[1,2911,247,39,"Date"],[1,2916,247,44,"now"],[1,2924,248,10,"optimisticOffer"],[1,2926,248,35],[1,2927,249,6,"id"],[1,2930,249,10,"optimisticId"],[1,2932,250,6,"request_id"],[1,2943,250,18,"targetRequestId"],[1,2945,251,6,"tag_id"],[1,2952,251,14,"targetTagId"],[1,2954,252,6,"driver_id"],[1,2964,252,17,"userId"],[1,2966,253,6,"driver_name"],[1,2978,253,19,"driverName"],[1,2981,253,33],[1,2987,254,6,"driver_rating"],[1,3001,254,21],[1,3003,255,6,"price"],[1,3009,255,13,"price"],[1,3011,256,6,"status"],[1,3018,256,14],[1,3028,257,6,"notes"],[1,3034,257,13],[1,3055,258,6,"created_at"],[1,3067,258,18],[1,3071,258,22,"Date"],[1,3077,258,29,"toISOString"],[1,3091,259,6,"_optimistic"],[1,3104,259,19],[1,3107,262,4,"setOffers"],[1,3109,262,14,"prev"],[1,3112,262,22],[1,3113,262,23,"optimisticOffer"],[1,3118,262,43,"prev"],[1,3122,263,4,"setIsLoading"],[1,3125,263,17],[1,3128,266,4],[1,3132,268,6],[1,3138,268,12,"controller"],[1,3140,268,25],[1,3144,268,29,"AbortController"],[1,3160,269,12,"timeoutId"],[1,3162,269,24,"setTimeout"],[1,3173,269,35],[1,3177,269,41,"controller"],[1,3179,269,52,"abort"],[1,3187,269,61],[1,3192,271,12,"response"],[1,3200,271,29,"fetch"],[1,3206,271,35],[1,3209,271,38,"API_URL"],[1,3240,271,75,"userId"],[1,3244,271,85],[1,3245,272,8,"method"],[1,3252,272,16],[1,3259,273,8,"headers"],[1,3267,273,17],[1,3268,273,19],[1,3283,273,35],[1,3303,274,8,"body"],[1,3308,274,14,"JSON"],[1,3313,274,19,"stringify"],[1,3323,274,29],[1,3324,275,10,"tag_id"],[1,3331,275,18,"targetTagId"],[1,3333,276,10,"request_id"],[1,3344,276,22,"targetRequestId"],[1,3346,277,10,"price"],[1,3354,278,10,"latitude"],[1,3363,278,20,"location"],[1,3366,278,30,"latitude"],[1,3376,278,42],[1,3378,279,10,"longitude"],[1,3388,279,21,"location"],[1,3391,279,31,"longitude"],[1,3402,279,44],[1,3406,281,8,"signal"],[1,3413,281,16,"controller"],[1,3415,281,27,"signal"],[1,3424,286,6],[1,3427,284,6,"clearTimeout"],[1,3440,284,19,"timeoutId"],[1,3444,286,11,"isMountedRef"],[1,3446,286,24,"current"],[1,3454,286,33],[1,3461,286,40],[1,3463,288,6],[1,3469,288,12,"data"],[1,3477,288,25,"response"],[1,3479,288,34,"json"],[1,3486,290,6],[1,3493,290,10,"data"],[1,3495,290,15,"success"],[1,3504,290,26,"data"],[1,3506,290,31,"offer_id"],[1,3516,292,8,"socket"],[1,3518,292,15,"emit"],[1,3523,292,20],[1,3536,292,34],[1,3537,293,10,"request_id"],[1,3548,293,22,"targetRequestId"],[1,3550,294,10,"tag_id"],[1,3557,294,18,"targetTagId"],[1,3559,295,10,"offer_id"],[1,3568,295,20,"data"],[1,3570,295,25,"offer_id"],[1,3579,296,10,"driver_id"],[1,3589,296,21,"userId"],[1,3591,297,10,"driver_name"],[1,3603,297,23,"driverName"],[1,3605,298,10,"price"],[1,3611,298,17,"price"],[1,3613,299,10,"notes"],[1,3619,299,17],[1,3624,303,8,"setOffers"],[1,3626,303,18,"prev"],[1,3629,303,26,"prev"],[1,3631,303,31,"map"],[1,3635,303,35,"o"],[1,3638,304,10,"o"],[1,3640,304,12,"id"],[1,3645,304,19,"optimisticId"],[1,3647,305,14],[1,3651,305,19,"o"],[1,3653,305,22,"id"],[1,3656,305,26,"data"],[1,3658,305,31,"offer_id"],[1,3667,305,41,"offer_id"],[1,3676,305,51,"data"],[1,3678,305,56,"offer_id"],[1,3687,305,66,"notes"],[1,3693,305,73],[1,3696,305,77,"_optimistic"],[1,3709,305,90],[1,3712,306,14,"o"],[1,3716,309,8,"console"],[1,3724,309,16,"log"],[1,3728,309,20],[1,3761,309,49,"data"],[1,3763,309,54,"offer_id"],[1,3773,310,8,"setIsLoading"],[1,3776,310,21],[1,3780,311,15],[1,3784,314,8,"setOffers"],[1,3786,314,18,"prev"],[1,3789,314,26,"prev"],[1,3791,314,31,"filter"],[1,3798,314,38,"o"],[1,3801,314,43,"o"],[1,3803,314,45,"id"],[1,3808,314,52,"optimisticId"],[1,3812,315,8,"setIsLoading"],[1,3815,315,21],[1,3818,316,8,"Alert"],[1,3820,316,13,"default"],[1,3828,316,14,"alert"],[1,3834,316,20],[1,3841,316,28,"data"],[1,3843,316,33,"detail"],[1,3851,316,43],[1,3879,317,15],[1,3881,319,4],[1,3882,319,6],[1,3888,319,13,"err"],[1,3891,320,6],[1,3899,320,11,"isMountedRef"],[1,3901,320,24,"current"],[1,3911,322,6,"setIsLoading"],[1,3914,322,19],[1,3917,323,6,"setOffers"],[1,3919,323,16,"prev"],[1,3922,323,24,"prev"],[1,3924,323,29,"filter"],[1,3931,323,36,"o"],[1,3934,323,41,"o"],[1,3936,323,43,"id"],[1,3941,323,50,"optimisticId"],[1,3945,325,23],[1,3960,325,10,"err"],[1,3962,325,14,"name"],[1,3967,326,8,"Alert"],[1,3969,326,13,"default"],[1,3977,326,14,"alert"],[1,3983,326,20],[1,4012,326,35],[1,4041,328,8,"Alert"],[1,4043,328,13,"default"],[1,4051,328,14,"alert"],[1,4057,328,20],[1,4064,328,28],[1,4099,330,13],[1,4101,331,4],[1,4104,332,5],[1,4105,332,6,"userId"],[1,4107,332,14,"socket"],[1,4111,336,8,"acceptOffer"],[1,4114,336,22],[1,4116,336,22,"useCallback"],[1,4118,336,33,"useCallback"],[1,4131,336,34,"async"],[1,4137,336,41,"offerId"],[1,4139,336,58,"driverId"],[1,4144,337,4],[1,4148,337,9,"userId"],[1,4152,337,20,"socket"],[1,4154,337,28],[1,4161,337,35],[1,4163,340,4,"setOffers"],[1,4165,340,14,"prev"],[1,4168,340,22,"prev"],[1,4170,340,27,"map"],[1,4174,340,31,"o"],[1,4177,341,6,"o"],[1,4179,341,8,"id"],[1,4184,341,15,"offerId"],[1,4187,341,26,"o"],[1,4189,341,28,"offer_id"],[1,4200,341,41,"offerId"],[1,4202,342,10],[1,4206,342,15,"o"],[1,4208,342,18,"status"],[1,4215,342,26],[1,4228,343,10,"o"],[1,4232,346,4],[1,4236,348,6],[1,4242,348,12,"response"],[1,4250,348,29,"fetch"],[1,4256,349,8],[1,4259,349,11,"API_URL"],[1,4295,349,53,"userId"],[1,4309,349,72,"offerId"],[1,4313,350,8],[1,4314,350,10,"method"],[1,4321,350,18],[1,4330,353,6],[1,4334,353,11,"isMountedRef"],[1,4336,353,24,"current"],[1,4344,353,33],[1,4351,353,40],[1,4353,355,6],[1,4359,355,12,"data"],[1,4367,355,25,"response"],[1,4369,355,34,"json"],[1,4376,357,6],[1,4383,357,10,"data"],[1,4385,357,15,"success"],[1,4394,359,8,"socket"],[1,4396,359,15,"emit"],[1,4401,359,20],[1,4416,359,36],[1,4417,360,10,"request_id"],[1,4428,360,22,"requestId"],[1,4430,361,10,"offer_id"],[1,4439,361,20,"offerId"],[1,4441,362,10,"driver_id"],[1,4451,362,21,"driverId"],[1,4453,363,10,"tag_id"],[1,4460,363,18,"tagId"],[1,4462,364,10,"passenger_id"],[1,4475,364,24,"userId"],[1,4479,368,8,"setOffers"],[1,4481,368,18,"prev"],[1,4484,368,26,"prev"],[1,4486,368,31,"filter"],[1,4493,368,38,"o"],[1,4496,368,43,"o"],[1,4498,368,45,"id"],[1,4503,368,52,"offerId"],[1,4506,368,63,"o"],[1,4508,368,65,"offer_id"],[1,4519,368,78,"offerId"],[1,4524,369,15],[1,4528,372,8,"setOffers"],[1,4530,372,18,"prev"],[1,4533,372,26,"prev"],[1,4535,372,31,"map"],[1,4539,372,35,"o"],[1,4542,373,10,"o"],[1,4544,373,12,"id"],[1,4549,373,19,"offerId"],[1,4552,373,30,"o"],[1,4554,373,32,"offer_id"],[1,4565,373,45,"offerId"],[1,4567,374,14],[1,4571,374,19,"o"],[1,4573,374,22,"status"],[1,4580,374,30],[1,4591,375,14,"o"],[1,4595,377,8,"Alert"],[1,4597,377,13,"default"],[1,4605,377,14,"alert"],[1,4611,377,20],[1,4618,377,28,"data"],[1,4620,377,33,"detail"],[1,4628,377,43],[1,4655,378,15],[1,4657,380,4],[1,4658,380,6],[1,4664,380,13,"err"],[1,4667,381,6],[1,4675,381,11,"isMountedRef"],[1,4677,381,24,"current"],[1,4687,382,6,"setOffers"],[1,4689,382,16,"prev"],[1,4692,382,24,"prev"],[1,4694,382,29,"map"],[1,4698,382,33,"o"],[1,4701,383,8,"o"],[1,4703,383,10,"id"],[1,4708,383,17,"offerId"],[1,4711,383,28,"o"],[1,4713,383,30,"offer_id"],[1,4724,383,43,"offerId"],[1,4726,384,12],[1,4730,384,17,"o"],[1,4732,384,20,"status"],[1,4739,384,28],[1,4750,385,12,"o"],[1,4754,387,6,"Alert"],[1,4756,387,11,"default"],[1,4764,387,12,"alert"],[1,4770,387,18],[1,4777,387,26],[1,4812,388,13],[1,4814,389,4],[1,4817,390,5],[1,4818,390,6,"userId"],[1,4820,390,14,"socket"],[1,4822,390,22,"requestId"],[1,4824,390,33,"tagId"],[1,4828,394,8,"rejectOffer"],[1,4831,394,22],[1,4833,394,22,"useCallback"],[1,4835,394,33,"useCallback"],[1,4848,394,34,"async"],[1,4854,394,41,"offerId"],[1,4856,394,58,"driverId"],[1,4861,395,4],[1,4865,395,9,"userId"],[1,4869,395,20,"socket"],[1,4871,395,28],[1,4878,395,35],[1,4880,398,4],[1,4886,398,10,"removedOffer"],[1,4888,398,25,"offers"],[1,4890,398,32,"find"],[1,4895,398,37,"o"],[1,4898,398,42,"o"],[1,4900,398,44,"id"],[1,4905,398,51,"offerId"],[1,4908,398,62,"o"],[1,4910,398,64,"offer_id"],[1,4921,398,77,"offerId"],[1,4924,399,4,"setOffers"],[1,4926,399,14,"prev"],[1,4929,399,22,"prev"],[1,4931,399,27,"filter"],[1,4938,399,34,"o"],[1,4941,399,39,"o"],[1,4943,399,41,"id"],[1,4948,399,48,"offerId"],[1,4951,399,59,"o"],[1,4953,399,61,"offer_id"],[1,4964,399,74,"offerId"],[1,4968,401,4],[1,4972,414,6],[1,4985,402,12,"fetch"],[1,4991,403,8],[1,4994,403,11,"API_URL"],[1,5031,403,54,"userId"],[1,5045,403,73,"offerId"],[1,5049,404,8],[1,5050,404,10,"method"],[1,5057,404,18],[1,5066,408,6,"socket"],[1,5068,408,13,"emit"],[1,5073,408,18],[1,5088,408,34],[1,5089,409,8,"request_id"],[1,5100,409,20,"requestId"],[1,5102,410,8,"offer_id"],[1,5111,410,18,"offerId"],[1,5113,411,8,"driver_id"],[1,5123,411,19,"driverId"],[1,5128,414,13],[1,5129,415,4],[1,5130,415,6],[1,5136,420,6],[1,5143,417,10,"removedOffer"],[1,5146,417,26,"isMountedRef"],[1,5148,417,39,"current"],[1,5157,418,8,"setOffers"],[1,5159,418,18,"prev"],[1,5162,418,26],[1,5163,418,27,"removedOffer"],[1,5168,418,44,"prev"],[1,5173,420,13],[1,5174,421,4],[1,5177,422,5],[1,5178,422,6,"userId"],[1,5180,422,14,"socket"],[1,5182,422,22,"requestId"],[1,5184,422,33,"offers"],[1,5188,426,8,"clearOffers"],[1,5191,426,22],[1,5193,426,22,"useCallback"],[1,5195,426,33,"useCallback"],[1,5208,426,34],[1,5213,427,4,"setOffers"],[1,5215,427,14],[1,5219,428,4,"seenOfferIdsRef"],[1,5221,428,20,"current"],[1,5229,428,28,"clear"],[1,5237,429,4,"console"],[1,5245,429,12,"log"],[1,5249,429,16],[1,5293,430,5],[1,5297,432,8,"addOffer"],[1,5300,432,19],[1,5302,432,19,"useCallback"],[1,5304,432,30,"useCallback"],[1,5317,432,32,"offer"],[1,5321,433,4],[1,5327,433,10,"offerId"],[1,5329,433,20,"offer"],[1,5331,433,26,"id"],[1,5335,433,32,"offer"],[1,5337,433,38,"offer_id"],[1,5346,434,8,"offerId"],[1,5350,434,20,"seenOfferIdsRef"],[1,5352,434,36,"current"],[1,5360,434,44,"has"],[1,5364,434,48,"offerId"],[1,5369,435,6,"seenOfferIdsRef"],[1,5371,435,22,"current"],[1,5379,435,30,"add"],[1,5383,435,34,"offerId"],[1,5386,436,6,"setOffers"],[1,5388,436,16,"prev"],[1,5391,436,24],[1,5392,436,25,"offer"],[1,5397,436,35,"prev"],[1,5403,438,5],[1,5407,442,2],[1,5413,442,9],[1,5414,443,4,"offers"],[1,5421,443,12,"offers"],[1,5423,443,19,"filter"],[1,5430,443,26,"o"],[1,5433,443,44],[1,5445,443,31,"o"],[1,5447,443,33,"status"],[1,5455,443,70],[1,5469,443,57,"o"],[1,5471,443,59,"status"],[1,5479,443,98],[1,5492,443,85,"o"],[1,5494,443,87,"status"],[1,5502,444,4,"isLoading"],[1,5514,445,4,"error"],[1,5522,446,4,"sendOffer"],[1,5534,447,4,"acceptOffer"],[1,5548,448,4,"rejectOffer"],[1,5562,449,4,"clearOffers"],[1,5576,450,4,"addOffer"],[1,5587,452,0],[1,5588,454,0],[1,5592,454,0,"_default"],[1,5594,454,15,"useOffers"],[1,5595,454,25],[1,5598]],"functionMap":{"names":["<global>","useOffers","useEffect$argument_0","handleNewOffer","setOffers$argument_0","prev.some$argument_0","handleOfferAccepted","prev.map$argument_0","handleOfferRejected","prev.filter$argument_0","handleOfferSentAck","handleTagCancelled","<anonymous>","sendOffer","setTimeout$argument_0","acceptOffer","rejectOffer","offers.find$argument_0","clearOffers","addOffer","offers.filter$argument_0"],"mappings":"AAA;OCqE;YCuB;2BCgB;gBC0C;sBCE,+CD;ODI;KDG;gCIG;gBFI,iBG;aHG;OEC;KJG;gCMG;gBJI,oBK;8DLC;OIC;KNG;+BQG;kBNO,iBG;eHG;SMC;KRE;+BSG;KTQ;WUW;KVQ;GDC;gCYI;cTyB,kCS;mCCO,wBD;kBTkC,iBG;eHG;SSC;kBTO,oBK,0BL,CS;gBTS,oBK,0BL,CS;GZS;kCcI;cXI,iBG;WHG;KWC;kBXwB,oBK,+CL,CW;kBXI,iBG;eHG;SWC;gBXM,iBG;aHG;OWC;GdI;kCeI;qCCI,+CD;cZC,oBK,+CL,CY;kBZmB,+BY;GfI;kCiBI;GjBI;+BkBE;gBfI,wBe;GlBE;0BmBK,kFnB;CDS"},"hasCjsExports":false},"type":"js/module"}]}