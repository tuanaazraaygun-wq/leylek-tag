{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":215},"end":{"line":11,"column":65,"index":280}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Alert","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"PEUC6jrQVoAGZ2qYkvimljMOyJI=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":13,"column":0,"index":319},"end":{"line":13,"column":39,"index":358}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){\"use strict\";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"default\",{enumerable:!0,get:function(){return c}}),_e.useOffers=s;var t=r(d[0]),f=e(r(d[1])),o=e(r(d[2]));const n=`${o.default.expoConfig?.extra?.backendUrl||process.env.EXPO_PUBLIC_BACKEND_URL||'https://taxiapp-cards.preview.emergentagent.com'}/api`;function s(e){const{userId:o,tagId:s,requestId:c,isDriver:u=!1,enabled:l=!0,socket:_,onNewOffer:p,onOfferAccepted:O,onOfferRejected:v}=e,[h,k]=(0,t.useState)([]),[S,b]=(0,t.useState)(!1),[w,C]=(0,t.useState)(null),E=(0,t.useRef)(!0),y=(0,t.useRef)(new Set),q=(0,t.useRef)(null);(0,t.useEffect)(()=>{if(E.current=!0,!l||!_)return;c&&c!==q.current&&(console.log('\\ud83d\\udd04 [useOffers] Request ID changed, clearing offers'),q.current=c,k([]),y.current.clear());const e=e=>{if(!E.current)return;const t=e.offer_id||e.id,f=e.request_id;if(y.current.has(t))return void console.log('\\u26a0\\ufe0f [useOffers] Duplicate offer ignored:',t);if(f&&q.current&&f!==q.current)return void console.log('\\u26a0\\ufe0f [useOffers] Wrong request_id, ignoring offer:',f,'vs',q.current);console.log('\\u2705 [useOffers] Request ID check passed:',f||'none','/',q.current||'none'),y.current.add(t);const o={id:t,offer_id:t,request_id:f,tag_id:e.tag_id||s||'',driver_id:e.driver_id,driver_name:e.driver_name||'\\u015eof\\xf6r',driver_rating:e.driver_rating||5,driver_photo:e.driver_photo,price:e.price,notes:e.notes,status:e.status||'pending',vehicle_model:e.vehicle_model,vehicle_color:e.vehicle_color,distance_km:e.distance_km,estimated_arrival_min:e.estimated_arrival_min,created_at:e.created_at||(new Date).toISOString(),_optimistic:!1};console.log('\\ud83d\\udce5 [useOffers] NEW OFFER received:',o.price,'TL from',o.driver_name),k(e=>e.some(e=>e.id===t||e.offer_id===t)?e:[o,...e]),p?.(o)},t=e=>{E.current&&(console.log('\\u2705 [useOffers] OFFER ACCEPTED:',e),k(t=>t.map(t=>t.id===e.offer_id||t.offer_id===e.offer_id?{...t,status:'accepted'}:t)),O?.(e))},f=e=>{E.current&&(console.log('\\u274c [useOffers] OFFER REJECTED:',e),k(t=>t.filter(t=>t.id!==e.offer_id&&t.offer_id!==e.offer_id)),v?.(e))},o=e=>{E.current&&(console.log('\\u2705 [useOffers] Offer sent acknowledged:',e),b(!1),e.offer_id&&k(t=>t.map(t=>t._optimistic?{...t,id:e.offer_id,offer_id:e.offer_id,_optimistic:!1}:t)))},n=e=>{E.current&&(e.request_id!==c&&e.tag_id!==s||(console.log('\\ud83d\\udeab [useOffers] TAG CANCELLED, clearing offers'),k([]),y.current.clear()))};return _.on('new_offer',e),_.on('offer_accepted',t),_.on('offer_rejected',f),_.on('offer_sent_ack',o),_.on('tag_cancelled',n),console.log('\\ud83d\\udce1 [useOffers] Socket listeners registered'),()=>{E.current=!1,_.off('new_offer',e),_.off('offer_accepted',t),_.off('offer_rejected',f),_.off('offer_sent_ack',o),_.off('tag_cancelled',n),console.log('\\ud83e\\uddf9 [useOffers] Socket listeners removed')}},[l,_,c,s,p,O,v]);const T=(0,t.useCallback)(async(e,t,s,c,u)=>{if(!o||!_)return!1;const l=`optimistic_${Date.now()}`,p={id:l,request_id:s,tag_id:e,driver_id:o,driver_name:u||'Sen',driver_rating:5,price:t,status:'pending',notes:'G\\xf6nderiliyor...',created_at:(new Date).toISOString(),_optimistic:!0};k(e=>[p,...e]),b(!0);try{const p=new AbortController,O=setTimeout(()=>p.abort(),1e4),v=await fetch(`${n}/driver/send-offer?user_id=${o}`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({tag_id:e,request_id:s,price:t,latitude:c?.latitude||0,longitude:c?.longitude||0}),signal:p.signal});if(clearTimeout(O),!E.current)return!0;const h=await v.json();return h.success||h.offer_id?(_.emit('send_offer',{request_id:s,tag_id:e,offer_id:h.offer_id,driver_id:o,driver_name:u,price:t,notes:''}),k(e=>e.map(e=>e.id===l?{...e,id:h.offer_id,offer_id:h.offer_id,notes:'',_optimistic:!1}:e)),console.log('\\u2705 [useOffers] Offer sent:',h.offer_id),b(!1),!0):(k(e=>e.filter(e=>e.id!==l)),b(!1),f.default.alert('Hata',h.detail||'Teklif g\\xf6nderilemedi'),!1)}catch(e){return!!E.current&&(b(!1),k(e=>e.filter(e=>e.id!==l)),'AbortError'===e.name?f.default.alert('Zaman A\\u015f\\u0131m\\u0131','Sunucu yan\\u0131t vermedi'):f.default.alert('Hata','Ba\\u011flant\\u0131 hatas\\u0131'),!1)}},[o,_]),D=(0,t.useCallback)(async(e,t)=>{if(!o||!_)return!1;k(t=>t.map(t=>t.id===e||t.offer_id===e?{...t,status:'accepting'}:t));try{const u=await fetch(`${n}/passenger/accept-offer?user_id=${o}&offer_id=${e}`,{method:'POST'});if(!E.current)return!0;const l=await u.json();return l.success?(_.emit('accept_offer',{request_id:c,offer_id:e,driver_id:t,tag_id:s,passenger_id:o}),k(t=>t.filter(t=>t.id===e||t.offer_id===e)),!0):(k(t=>t.map(t=>t.id===e||t.offer_id===e?{...t,status:'pending'}:t)),f.default.alert('Hata',l.detail||'Teklif kabul edilemedi'),!1)}catch(t){return!!E.current&&(k(t=>t.map(t=>t.id===e||t.offer_id===e?{...t,status:'pending'}:t)),f.default.alert('Hata','Ba\\u011flant\\u0131 hatas\\u0131'),!1)}},[o,_,c,s]),R=(0,t.useCallback)(async(e,t)=>{if(!o||!_)return!1;const f=h.find(t=>t.id===e||t.offer_id===e);k(t=>t.filter(t=>t.id!==e&&t.offer_id!==e));try{return await fetch(`${n}/passenger/dismiss-offer?user_id=${o}&offer_id=${e}`,{method:'POST'}),_.emit('reject_offer',{request_id:c,offer_id:e,driver_id:t}),!0}catch{return f&&E.current&&k(e=>[f,...e]),!1}},[o,_,c,h]),j=(0,t.useCallback)(()=>{k([]),y.current.clear(),console.log('\\ud83e\\uddf9 [useOffers] Offers cleared')},[]),$=(0,t.useCallback)(e=>{const t=e.id||e.offer_id;t&&!y.current.has(t)&&(y.current.add(t),k(t=>[e,...t]))},[]);return{offers:h.filter(e=>'pending'===e.status||'accepting'===e.status||'accepted'===e.status),isLoading:S,error:w,sendOffer:T,acceptOffer:D,rejectOffer:R,clearOffers:j,addOffer:$}}var c=s});","lineCount":1,"map":[[1,143,458,0,"Object"],[1,150,458,0,"defineProperty"],[1,165,458,0,"_e"],[1,168,458,0],[1,179,458,0,"enumerable"],[1,191,458,0],[1,193,458,0,"get"],[1,197,458,0],[1,215,458,0,"_default"],[1,216,458,0],[1,220,70,0,"_e"],[1,223,70,0,"useOffers"],[1,235,11,0],[1,239,11,0,"_react"],[1,241,11,0,"r"],[1,243,11,0,"d"],[1,245,11,0],[1,249,11,65,"Alert"],[1,251,11,65,"_interopDefault"],[1,253,11,65,"r"],[1,255,11,65,"d"],[1,257,11,65],[1,262,13,0,"Constants"],[1,264,13,0,"_interopDefault"],[1,266,13,0,"r"],[1,268,13,0,"d"],[1,270,13,0],[1,275,15,0],[1,281,18,6,"API_URL"],[1,283,18,16],[1,286,15,20,"Constants"],[1,288,15,29,"default"],[1,296,15,30,"expoConfig"],[1,308,15,42,"extra"],[1,315,15,49,"backendUrl"],[1,327,16,20,"process"],[1,335,16,28,"env"],[1,339,16,32,"EXPO_PUBLIC_BACKEND_URL"],[1,364,17,20],[1,420,70,7],[1,429,70,16,"useOffers"],[1,431,70,26,"options"],[1,434,71,2],[1,440,71,8,"userId"],[1,447,72,4,"userId"],[1,449,72,10,"tagId"],[1,455,73,4,"tagId"],[1,457,73,9,"requestId"],[1,467,74,4,"requestId"],[1,469,74,13,"isDriver"],[1,478,75,4,"isDriver"],[1,481,75,15],[1,483,75,20,"enabled"],[1,491,76,4,"enabled"],[1,494,76,14],[1,496,76,18,"socket"],[1,503,77,4,"socket"],[1,505,77,10,"onNewOffer"],[1,516,78,4,"onNewOffer"],[1,518,78,14,"onOfferAccepted"],[1,534,79,4,"onOfferAccepted"],[1,536,79,19,"onOfferRejected"],[1,552,80,4,"onOfferRejected"],[1,555,81,6,"options"],[1,558,83,9,"offers"],[1,560,83,17,"setOffers"],[1,564,83,30],[1,566,83,30,"useState"],[1,568,83,38,"useState"],[1,578,83,48],[1,583,84,9,"isLoading"],[1,585,84,20,"setIsLoading"],[1,589,84,36],[1,591,84,36,"useState"],[1,593,84,44,"useState"],[1,604,84,45],[1,608,85,9,"error"],[1,610,85,16,"setError"],[1,614,85,28],[1,616,85,28,"useState"],[1,618,85,36,"useState"],[1,628,85,52],[1,634,87,8,"isMountedRef"],[1,637,87,23],[1,639,87,23,"useRef"],[1,641,87,29,"useRef"],[1,650,87,30],[1,653,88,8,"seenOfferIdsRef"],[1,656,88,26],[1,658,88,26,"useRef"],[1,660,88,32,"useRef"],[1,668,88,46],[1,672,88,50,"Set"],[1,677,89,8,"currentRequestIdRef"],[1,680,89,30],[1,682,89,30,"useRef"],[1,684,89,36,"useRef"],[1,692,89,52],[1,699,93,2],[1,701,93,2,"useEffect"],[1,703,93,11,"useEffect"],[1,714,93,12],[1,719,96,4],[1,722,94,4,"isMountedRef"],[1,724,94,17,"current"],[1,733,94,27],[1,736,96,9,"enabled"],[1,740,96,21,"socket"],[1,742,97,6],[1,749,101,8,"requestId"],[1,752,101,21,"requestId"],[1,756,101,35,"currentRequestIdRef"],[1,758,101,55,"current"],[1,768,102,6,"console"],[1,776,102,14,"log"],[1,780,102,18],[1,844,103,6,"currentRequestIdRef"],[1,846,103,26,"current"],[1,854,103,36,"requestId"],[1,856,104,6,"setOffers"],[1,858,104,16],[1,862,105,6,"seenOfferIdsRef"],[1,864,105,22,"current"],[1,872,105,30,"clear"],[1,881,109,4],[1,887,109,10,"handleNewOffer"],[1,889,109,28,"data"],[1,893,110,6],[1,897,110,11,"isMountedRef"],[1,899,110,24,"current"],[1,907,110,33],[1,914,112,6],[1,920,112,12,"offerId"],[1,922,112,22,"data"],[1,924,112,27,"offer_id"],[1,934,112,39,"data"],[1,936,112,44,"id"],[1,939,113,12,"incomingRequestId"],[1,941,113,32,"data"],[1,943,113,37,"request_id"],[1,954,116,6],[1,957,116,10,"seenOfferIdsRef"],[1,959,116,26,"current"],[1,967,116,34,"has"],[1,971,116,38,"offerId"],[1,974,118,8],[1,986,117,8,"console"],[1,994,117,16,"log"],[1,998,117,20],[1,1050,117,63,"offerId"],[1,1053,123,6],[1,1056,123,10,"incomingRequestId"],[1,1059,123,31,"currentRequestIdRef"],[1,1061,123,51,"current"],[1,1070,123,62,"incomingRequestId"],[1,1074,123,84,"currentRequestIdRef"],[1,1076,123,104,"current"],[1,1084,125,8],[1,1096,124,8,"console"],[1,1104,124,16,"log"],[1,1108,124,20],[1,1169,124,72,"incomingRequestId"],[1,1171,124,91],[1,1176,124,97,"currentRequestIdRef"],[1,1178,124,117,"current"],[1,1187,129,6,"console"],[1,1195,129,14,"log"],[1,1199,129,18],[1,1245,129,60,"incomingRequestId"],[1,1248,129,81],[1,1255,129,89],[1,1259,129,94,"currentRequestIdRef"],[1,1261,129,114,"current"],[1,1270,129,125],[1,1278,131,6,"seenOfferIdsRef"],[1,1280,131,22,"current"],[1,1288,131,30,"add"],[1,1292,131,34,"offerId"],[1,1295,133,6],[1,1301,133,12,"newOffer"],[1,1303,133,30],[1,1304,134,8,"id"],[1,1307,134,12,"offerId"],[1,1309,135,8,"offer_id"],[1,1318,135,18,"offerId"],[1,1320,136,8,"request_id"],[1,1331,136,20,"incomingRequestId"],[1,1333,137,8,"tag_id"],[1,1340,137,16,"data"],[1,1342,137,21,"tag_id"],[1,1350,137,31,"tagId"],[1,1353,137,40],[1,1356,138,8,"driver_id"],[1,1366,138,19,"data"],[1,1368,138,24,"driver_id"],[1,1378,139,8,"driver_name"],[1,1390,139,21,"data"],[1,1392,139,26,"driver_name"],[1,1405,139,41],[1,1421,140,8,"driver_rating"],[1,1435,140,23,"data"],[1,1437,140,28,"driver_rating"],[1,1452,140,45],[1,1454,141,8,"driver_photo"],[1,1467,141,22,"data"],[1,1469,141,27,"driver_photo"],[1,1482,142,8,"price"],[1,1488,142,15,"data"],[1,1490,142,20,"price"],[1,1496,143,8,"notes"],[1,1502,143,15,"data"],[1,1504,143,20,"notes"],[1,1510,144,8,"status"],[1,1517,144,16,"data"],[1,1519,144,21,"status"],[1,1527,144,31],[1,1537,145,8,"vehicle_model"],[1,1551,145,23,"data"],[1,1553,145,28,"vehicle_model"],[1,1567,146,8,"vehicle_color"],[1,1581,146,23,"data"],[1,1583,146,28,"vehicle_color"],[1,1597,147,8,"distance_km"],[1,1609,147,21,"data"],[1,1611,147,26,"distance_km"],[1,1623,148,8,"estimated_arrival_min"],[1,1645,148,31,"data"],[1,1647,148,36,"estimated_arrival_min"],[1,1669,149,8,"created_at"],[1,1680,149,20,"data"],[1,1682,149,25,"created_at"],[1,1695,149,39],[1,1699,149,43,"Date"],[1,1705,149,50,"toISOString"],[1,1719,150,8,"_optimistic"],[1,1732,150,21],[1,1735,153,6,"console"],[1,1743,153,14,"log"],[1,1747,153,18],[1,1794,153,56,"newOffer"],[1,1796,153,65,"price"],[1,1802,153,72],[1,1812,153,83,"newOffer"],[1,1814,153,92,"driver_name"],[1,1827,155,6,"setOffers"],[1,1829,155,16,"prev"],[1,1832,157,12,"prev"],[1,1834,157,17,"some"],[1,1839,157,22,"o"],[1,1842,157,27,"o"],[1,1844,157,29,"id"],[1,1849,157,36,"offerId"],[1,1852,157,47,"o"],[1,1854,157,49,"offer_id"],[1,1865,157,62,"offerId"],[1,1868,158,17,"prev"],[1,1870,160,15],[1,1871,160,16,"newOffer"],[1,1876,160,29,"prev"],[1,1880,163,6,"onNewOffer"],[1,1884,163,19,"newOffer"],[1,1888,167,10,"handleOfferAccepted"],[1,1890,167,33,"data"],[1,1894,168,11,"isMountedRef"],[1,1896,168,24,"current"],[1,1906,169,6,"console"],[1,1914,169,14,"log"],[1,1918,169,18],[1,1955,169,51,"data"],[1,1958,171,6,"setOffers"],[1,1960,171,16,"prev"],[1,1963,171,24,"prev"],[1,1965,171,29,"map"],[1,1969,171,33,"o"],[1,1972,172,9,"o"],[1,1974,172,11,"id"],[1,1979,172,18,"data"],[1,1981,172,23,"offer_id"],[1,1991,172,35,"o"],[1,1993,172,37,"offer_id"],[1,2004,172,50,"data"],[1,2006,172,55,"offer_id"],[1,2015,173,12],[1,2019,173,17,"o"],[1,2021,173,20,"status"],[1,2028,173,28],[1,2040,174,12,"o"],[1,2044,177,6,"onOfferAccepted"],[1,2048,177,24,"data"],[1,2053,181,10,"handleOfferRejected"],[1,2055,181,33,"data"],[1,2059,182,11,"isMountedRef"],[1,2061,182,24,"current"],[1,2071,183,6,"console"],[1,2079,183,14,"log"],[1,2083,183,18],[1,2120,183,51,"data"],[1,2123,185,6,"setOffers"],[1,2125,185,16,"prev"],[1,2128,185,24,"prev"],[1,2130,185,29,"filter"],[1,2137,185,36,"o"],[1,2140,186,8,"o"],[1,2142,186,10,"id"],[1,2147,186,17,"data"],[1,2149,186,22,"offer_id"],[1,2159,186,34,"o"],[1,2161,186,36,"offer_id"],[1,2172,186,49,"data"],[1,2174,186,54,"offer_id"],[1,2185,189,6,"onOfferRejected"],[1,2189,189,24,"data"],[1,2194,193,10,"handleOfferSentAck"],[1,2196,193,32,"data"],[1,2200,194,11,"isMountedRef"],[1,2202,194,24,"current"],[1,2212,195,6,"console"],[1,2220,195,14,"log"],[1,2224,195,18],[1,2270,195,60,"data"],[1,2273,196,6,"setIsLoading"],[1,2276,196,19],[1,2279,199,10,"data"],[1,2281,199,15,"offer_id"],[1,2291,200,8,"setOffers"],[1,2293,200,18,"prev"],[1,2296,200,26,"prev"],[1,2298,200,31,"map"],[1,2302,200,35,"o"],[1,2305,201,10,"o"],[1,2307,201,12,"_optimistic"],[1,2319,202,14],[1,2323,202,19,"o"],[1,2325,202,22,"id"],[1,2328,202,26,"data"],[1,2330,202,31,"offer_id"],[1,2339,202,41,"offer_id"],[1,2348,202,51,"data"],[1,2350,202,56,"offer_id"],[1,2359,202,66,"_optimistic"],[1,2372,202,79],[1,2375,203,14,"o"],[1,2381,209,10,"handleTagCancelled"],[1,2383,209,32,"data"],[1,2387,210,11,"isMountedRef"],[1,2389,210,24,"current"],[1,2399,212,10,"data"],[1,2401,212,15,"request_id"],[1,2414,212,30,"requestId"],[1,2417,212,43,"data"],[1,2419,212,48,"tag_id"],[1,2428,212,59,"tagId"],[1,2432,213,8,"console"],[1,2440,213,16,"log"],[1,2444,213,20],[1,2503,214,8,"setOffers"],[1,2505,214,18],[1,2509,215,8,"seenOfferIdsRef"],[1,2511,215,24,"current"],[1,2519,215,32,"clear"],[1,2530,228,4],[1,2537,220,4,"socket"],[1,2539,220,11,"on"],[1,2542,220,14],[1,2554,220,27,"handleNewOffer"],[1,2557,221,4,"socket"],[1,2559,221,11,"on"],[1,2562,221,14],[1,2579,221,32,"handleOfferAccepted"],[1,2582,222,4,"socket"],[1,2584,222,11,"on"],[1,2587,222,14],[1,2604,222,32,"handleOfferRejected"],[1,2607,223,4,"socket"],[1,2609,223,11,"on"],[1,2612,223,14],[1,2629,223,32,"handleOfferSentAck"],[1,2632,224,4,"socket"],[1,2634,224,11,"on"],[1,2637,224,14],[1,2653,224,31,"handleTagCancelled"],[1,2656,226,4,"console"],[1,2664,226,12,"log"],[1,2668,226,16],[1,2724,228,11],[1,2729,229,6,"isMountedRef"],[1,2731,229,19,"current"],[1,2740,229,29],[1,2742,230,6,"socket"],[1,2744,230,13,"off"],[1,2748,230,17],[1,2760,230,30,"handleNewOffer"],[1,2763,231,6,"socket"],[1,2765,231,13,"off"],[1,2769,231,17],[1,2786,231,35,"handleOfferAccepted"],[1,2789,232,6,"socket"],[1,2791,232,13,"off"],[1,2795,232,17],[1,2812,232,35,"handleOfferRejected"],[1,2815,233,6,"socket"],[1,2817,233,13,"off"],[1,2821,233,17],[1,2838,233,35,"handleOfferSentAck"],[1,2841,234,6,"socket"],[1,2843,234,13,"off"],[1,2847,234,17],[1,2863,234,34,"handleTagCancelled"],[1,2866,235,6,"console"],[1,2874,235,14,"log"],[1,2878,235,18],[1,2933,237,5],[1,2934,237,6,"enabled"],[1,2936,237,15,"socket"],[1,2938,237,23,"requestId"],[1,2940,237,34,"tagId"],[1,2942,237,41,"onNewOffer"],[1,2944,237,53,"onOfferAccepted"],[1,2946,237,70,"onOfferRejected"],[1,2950,241,2],[1,2956,241,8,"sendOffer"],[1,2959,241,20],[1,2961,241,20,"useCallback"],[1,2963,241,31,"useCallback"],[1,2976,241,32,"async"],[1,2982,242,4,"targetTagId"],[1,2984,243,4,"price"],[1,2986,244,4,"targetRequestId"],[1,2988,245,4,"location"],[1,2990,246,4,"driverName"],[1,2995,248,4],[1,2999,248,9,"userId"],[1,3003,248,20,"socket"],[1,3005,248,28],[1,3012,248,35],[1,3014,251,4],[1,3020,251,10,"optimisticId"],[1,3022,251,25],[1,3036,251,39,"Date"],[1,3041,251,44,"now"],[1,3049,252,10,"optimisticOffer"],[1,3051,252,35],[1,3052,253,6,"id"],[1,3055,253,10,"optimisticId"],[1,3057,254,6,"request_id"],[1,3068,254,18,"targetRequestId"],[1,3070,255,6,"tag_id"],[1,3077,255,14,"targetTagId"],[1,3079,256,6,"driver_id"],[1,3089,256,17,"userId"],[1,3091,257,6,"driver_name"],[1,3103,257,19,"driverName"],[1,3106,257,33],[1,3112,258,6,"driver_rating"],[1,3126,258,21],[1,3128,259,6,"price"],[1,3134,259,13,"price"],[1,3136,260,6,"status"],[1,3143,260,14],[1,3153,261,6,"notes"],[1,3159,261,13],[1,3180,262,6,"created_at"],[1,3192,262,18],[1,3196,262,22,"Date"],[1,3202,262,29,"toISOString"],[1,3216,263,6,"_optimistic"],[1,3229,263,19],[1,3232,266,4,"setOffers"],[1,3234,266,14,"prev"],[1,3237,266,22],[1,3238,266,23,"optimisticOffer"],[1,3243,266,43,"prev"],[1,3247,267,4,"setIsLoading"],[1,3250,267,17],[1,3253,270,4],[1,3257,272,6],[1,3263,272,12,"controller"],[1,3265,272,25],[1,3269,272,29,"AbortController"],[1,3285,273,12,"timeoutId"],[1,3287,273,24,"setTimeout"],[1,3298,273,35],[1,3302,273,41,"controller"],[1,3304,273,52,"abort"],[1,3312,273,61],[1,3317,275,12,"response"],[1,3325,275,29,"fetch"],[1,3331,275,35],[1,3334,275,38,"API_URL"],[1,3365,275,75,"userId"],[1,3369,275,85],[1,3370,276,8,"method"],[1,3377,276,16],[1,3384,277,8,"headers"],[1,3392,277,17],[1,3393,277,19],[1,3408,277,35],[1,3428,278,8,"body"],[1,3433,278,14,"JSON"],[1,3438,278,19,"stringify"],[1,3448,278,29],[1,3449,279,10,"tag_id"],[1,3456,279,18,"targetTagId"],[1,3458,280,10,"request_id"],[1,3469,280,22,"targetRequestId"],[1,3471,281,10,"price"],[1,3479,282,10,"latitude"],[1,3488,282,20,"location"],[1,3491,282,30,"latitude"],[1,3501,282,42],[1,3503,283,10,"longitude"],[1,3513,283,21,"location"],[1,3516,283,31,"longitude"],[1,3527,283,44],[1,3531,285,8,"signal"],[1,3538,285,16,"controller"],[1,3540,285,27,"signal"],[1,3549,290,6],[1,3552,288,6,"clearTimeout"],[1,3565,288,19,"timeoutId"],[1,3569,290,11,"isMountedRef"],[1,3571,290,24,"current"],[1,3579,290,33],[1,3586,290,40],[1,3588,292,6],[1,3594,292,12,"data"],[1,3602,292,25,"response"],[1,3604,292,34,"json"],[1,3611,294,6],[1,3618,294,10,"data"],[1,3620,294,15,"success"],[1,3629,294,26,"data"],[1,3631,294,31,"offer_id"],[1,3641,296,8,"socket"],[1,3643,296,15,"emit"],[1,3648,296,20],[1,3661,296,34],[1,3662,297,10,"request_id"],[1,3673,297,22,"targetRequestId"],[1,3675,298,10,"tag_id"],[1,3682,298,18,"targetTagId"],[1,3684,299,10,"offer_id"],[1,3693,299,20,"data"],[1,3695,299,25,"offer_id"],[1,3704,300,10,"driver_id"],[1,3714,300,21,"userId"],[1,3716,301,10,"driver_name"],[1,3728,301,23,"driverName"],[1,3730,302,10,"price"],[1,3736,302,17,"price"],[1,3738,303,10,"notes"],[1,3744,303,17],[1,3749,307,8,"setOffers"],[1,3751,307,18,"prev"],[1,3754,307,26,"prev"],[1,3756,307,31,"map"],[1,3760,307,35,"o"],[1,3763,308,10,"o"],[1,3765,308,12,"id"],[1,3770,308,19,"optimisticId"],[1,3772,309,14],[1,3776,309,19,"o"],[1,3778,309,22,"id"],[1,3781,309,26,"data"],[1,3783,309,31,"offer_id"],[1,3792,309,41,"offer_id"],[1,3801,309,51,"data"],[1,3803,309,56,"offer_id"],[1,3812,309,66,"notes"],[1,3818,309,73],[1,3821,309,77,"_optimistic"],[1,3834,309,90],[1,3837,310,14,"o"],[1,3841,313,8,"console"],[1,3849,313,16,"log"],[1,3853,313,20],[1,3886,313,49,"data"],[1,3888,313,54,"offer_id"],[1,3898,314,8,"setIsLoading"],[1,3901,314,21],[1,3905,315,15],[1,3909,318,8,"setOffers"],[1,3911,318,18,"prev"],[1,3914,318,26,"prev"],[1,3916,318,31,"filter"],[1,3923,318,38,"o"],[1,3926,318,43,"o"],[1,3928,318,45,"id"],[1,3933,318,52,"optimisticId"],[1,3937,319,8,"setIsLoading"],[1,3940,319,21],[1,3943,320,8,"Alert"],[1,3945,320,13,"default"],[1,3953,320,14,"alert"],[1,3959,320,20],[1,3966,320,28,"data"],[1,3968,320,33,"detail"],[1,3976,320,43],[1,4004,321,15],[1,4006,323,4],[1,4007,323,6],[1,4013,323,13,"err"],[1,4016,324,6],[1,4024,324,11,"isMountedRef"],[1,4026,324,24,"current"],[1,4036,326,6,"setIsLoading"],[1,4039,326,19],[1,4042,327,6,"setOffers"],[1,4044,327,16,"prev"],[1,4047,327,24,"prev"],[1,4049,327,29,"filter"],[1,4056,327,36,"o"],[1,4059,327,41,"o"],[1,4061,327,43,"id"],[1,4066,327,50,"optimisticId"],[1,4070,329,23],[1,4085,329,10,"err"],[1,4087,329,14,"name"],[1,4092,330,8,"Alert"],[1,4094,330,13,"default"],[1,4102,330,14,"alert"],[1,4108,330,20],[1,4137,330,35],[1,4166,332,8,"Alert"],[1,4168,332,13,"default"],[1,4176,332,14,"alert"],[1,4182,332,20],[1,4189,332,28],[1,4224,334,13],[1,4226,335,4],[1,4229,336,5],[1,4230,336,6,"userId"],[1,4232,336,14,"socket"],[1,4236,340,8,"acceptOffer"],[1,4239,340,22],[1,4241,340,22,"useCallback"],[1,4243,340,33,"useCallback"],[1,4256,340,34,"async"],[1,4262,340,41,"offerId"],[1,4264,340,58,"driverId"],[1,4269,341,4],[1,4273,341,9,"userId"],[1,4277,341,20,"socket"],[1,4279,341,28],[1,4286,341,35],[1,4288,344,4,"setOffers"],[1,4290,344,14,"prev"],[1,4293,344,22,"prev"],[1,4295,344,27,"map"],[1,4299,344,31,"o"],[1,4302,345,6,"o"],[1,4304,345,8,"id"],[1,4309,345,15,"offerId"],[1,4312,345,26,"o"],[1,4314,345,28,"offer_id"],[1,4325,345,41,"offerId"],[1,4327,346,10],[1,4331,346,15,"o"],[1,4333,346,18,"status"],[1,4340,346,26],[1,4353,347,10,"o"],[1,4357,350,4],[1,4361,352,6],[1,4367,352,12,"response"],[1,4375,352,29,"fetch"],[1,4381,353,8],[1,4384,353,11,"API_URL"],[1,4420,353,53,"userId"],[1,4434,353,72,"offerId"],[1,4438,354,8],[1,4439,354,10,"method"],[1,4446,354,18],[1,4455,357,6],[1,4459,357,11,"isMountedRef"],[1,4461,357,24,"current"],[1,4469,357,33],[1,4476,357,40],[1,4478,359,6],[1,4484,359,12,"data"],[1,4492,359,25,"response"],[1,4494,359,34,"json"],[1,4501,361,6],[1,4508,361,10,"data"],[1,4510,361,15,"success"],[1,4519,363,8,"socket"],[1,4521,363,15,"emit"],[1,4526,363,20],[1,4541,363,36],[1,4542,364,10,"request_id"],[1,4553,364,22,"requestId"],[1,4555,365,10,"offer_id"],[1,4564,365,20,"offerId"],[1,4566,366,10,"driver_id"],[1,4576,366,21,"driverId"],[1,4578,367,10,"tag_id"],[1,4585,367,18,"tagId"],[1,4587,368,10,"passenger_id"],[1,4600,368,24,"userId"],[1,4604,372,8,"setOffers"],[1,4606,372,18,"prev"],[1,4609,372,26,"prev"],[1,4611,372,31,"filter"],[1,4618,372,38,"o"],[1,4621,372,43,"o"],[1,4623,372,45,"id"],[1,4628,372,52,"offerId"],[1,4631,372,63,"o"],[1,4633,372,65,"offer_id"],[1,4644,372,78,"offerId"],[1,4649,373,15],[1,4653,376,8,"setOffers"],[1,4655,376,18,"prev"],[1,4658,376,26,"prev"],[1,4660,376,31,"map"],[1,4664,376,35,"o"],[1,4667,377,10,"o"],[1,4669,377,12,"id"],[1,4674,377,19,"offerId"],[1,4677,377,30,"o"],[1,4679,377,32,"offer_id"],[1,4690,377,45,"offerId"],[1,4692,378,14],[1,4696,378,19,"o"],[1,4698,378,22,"status"],[1,4705,378,30],[1,4716,379,14,"o"],[1,4720,381,8,"Alert"],[1,4722,381,13,"default"],[1,4730,381,14,"alert"],[1,4736,381,20],[1,4743,381,28,"data"],[1,4745,381,33,"detail"],[1,4753,381,43],[1,4780,382,15],[1,4782,384,4],[1,4783,384,6],[1,4789,384,13,"err"],[1,4792,385,6],[1,4800,385,11,"isMountedRef"],[1,4802,385,24,"current"],[1,4812,386,6,"setOffers"],[1,4814,386,16,"prev"],[1,4817,386,24,"prev"],[1,4819,386,29,"map"],[1,4823,386,33,"o"],[1,4826,387,8,"o"],[1,4828,387,10,"id"],[1,4833,387,17,"offerId"],[1,4836,387,28,"o"],[1,4838,387,30,"offer_id"],[1,4849,387,43,"offerId"],[1,4851,388,12],[1,4855,388,17,"o"],[1,4857,388,20,"status"],[1,4864,388,28],[1,4875,389,12,"o"],[1,4879,391,6,"Alert"],[1,4881,391,11,"default"],[1,4889,391,12,"alert"],[1,4895,391,18],[1,4902,391,26],[1,4937,392,13],[1,4939,393,4],[1,4942,394,5],[1,4943,394,6,"userId"],[1,4945,394,14,"socket"],[1,4947,394,22,"requestId"],[1,4949,394,33,"tagId"],[1,4953,398,8,"rejectOffer"],[1,4956,398,22],[1,4958,398,22,"useCallback"],[1,4960,398,33,"useCallback"],[1,4973,398,34,"async"],[1,4979,398,41,"offerId"],[1,4981,398,58,"driverId"],[1,4986,399,4],[1,4990,399,9,"userId"],[1,4994,399,20,"socket"],[1,4996,399,28],[1,5003,399,35],[1,5005,402,4],[1,5011,402,10,"removedOffer"],[1,5013,402,25,"offers"],[1,5015,402,32,"find"],[1,5020,402,37,"o"],[1,5023,402,42,"o"],[1,5025,402,44,"id"],[1,5030,402,51,"offerId"],[1,5033,402,62,"o"],[1,5035,402,64,"offer_id"],[1,5046,402,77,"offerId"],[1,5049,403,4,"setOffers"],[1,5051,403,14,"prev"],[1,5054,403,22,"prev"],[1,5056,403,27,"filter"],[1,5063,403,34,"o"],[1,5066,403,39,"o"],[1,5068,403,41,"id"],[1,5073,403,48,"offerId"],[1,5076,403,59,"o"],[1,5078,403,61,"offer_id"],[1,5089,403,74,"offerId"],[1,5093,405,4],[1,5097,418,6],[1,5110,406,12,"fetch"],[1,5116,407,8],[1,5119,407,11,"API_URL"],[1,5156,407,54,"userId"],[1,5170,407,73,"offerId"],[1,5174,408,8],[1,5175,408,10,"method"],[1,5182,408,18],[1,5191,412,6,"socket"],[1,5193,412,13,"emit"],[1,5198,412,18],[1,5213,412,34],[1,5214,413,8,"request_id"],[1,5225,413,20,"requestId"],[1,5227,414,8,"offer_id"],[1,5236,414,18,"offerId"],[1,5238,415,8,"driver_id"],[1,5248,415,19,"driverId"],[1,5253,418,13],[1,5254,419,4],[1,5255,419,6],[1,5261,424,6],[1,5268,421,10,"removedOffer"],[1,5271,421,26,"isMountedRef"],[1,5273,421,39,"current"],[1,5282,422,8,"setOffers"],[1,5284,422,18,"prev"],[1,5287,422,26],[1,5288,422,27,"removedOffer"],[1,5293,422,44,"prev"],[1,5298,424,13],[1,5299,425,4],[1,5302,426,5],[1,5303,426,6,"userId"],[1,5305,426,14,"socket"],[1,5307,426,22,"requestId"],[1,5309,426,33,"offers"],[1,5313,430,8,"clearOffers"],[1,5316,430,22],[1,5318,430,22,"useCallback"],[1,5320,430,33,"useCallback"],[1,5333,430,34],[1,5338,431,4,"setOffers"],[1,5340,431,14],[1,5344,432,4,"seenOfferIdsRef"],[1,5346,432,20,"current"],[1,5354,432,28,"clear"],[1,5362,433,4,"console"],[1,5370,433,12,"log"],[1,5374,433,16],[1,5418,434,5],[1,5422,436,8,"addOffer"],[1,5425,436,19],[1,5427,436,19,"useCallback"],[1,5429,436,30,"useCallback"],[1,5442,436,32,"offer"],[1,5446,437,4],[1,5452,437,10,"offerId"],[1,5454,437,20,"offer"],[1,5456,437,26,"id"],[1,5460,437,32,"offer"],[1,5462,437,38,"offer_id"],[1,5471,438,8,"offerId"],[1,5475,438,20,"seenOfferIdsRef"],[1,5477,438,36,"current"],[1,5485,438,44,"has"],[1,5489,438,48,"offerId"],[1,5494,439,6,"seenOfferIdsRef"],[1,5496,439,22,"current"],[1,5504,439,30,"add"],[1,5508,439,34,"offerId"],[1,5511,440,6,"setOffers"],[1,5513,440,16,"prev"],[1,5516,440,24],[1,5517,440,25,"offer"],[1,5522,440,35,"prev"],[1,5528,442,5],[1,5532,446,2],[1,5538,446,9],[1,5539,447,4,"offers"],[1,5546,447,12,"offers"],[1,5548,447,19,"filter"],[1,5555,447,26,"o"],[1,5558,447,44],[1,5570,447,31,"o"],[1,5572,447,33,"status"],[1,5580,447,70],[1,5594,447,57,"o"],[1,5596,447,59,"status"],[1,5604,447,98],[1,5617,447,85,"o"],[1,5619,447,87,"status"],[1,5627,448,4,"isLoading"],[1,5639,449,4,"error"],[1,5647,450,4,"sendOffer"],[1,5659,451,4,"acceptOffer"],[1,5673,452,4,"rejectOffer"],[1,5687,453,4,"clearOffers"],[1,5701,454,4,"addOffer"],[1,5712,456,0],[1,5713,458,0],[1,5717,458,0,"_default"],[1,5719,458,15,"useOffers"],[1,5720,458,25],[1,5723]],"functionMap":{"names":["<global>","useOffers","useEffect$argument_0","handleNewOffer","setOffers$argument_0","prev.some$argument_0","handleOfferAccepted","prev.map$argument_0","handleOfferRejected","prev.filter$argument_0","handleOfferSentAck","handleTagCancelled","<anonymous>","sendOffer","setTimeout$argument_0","acceptOffer","rejectOffer","offers.find$argument_0","clearOffers","addOffer","offers.filter$argument_0"],"mappings":"AAA;OCqE;YCuB;2BCgB;gBC8C;sBCE,+CD;ODI;KDG;gCIG;gBFI,iBG;aHG;OEC;KJG;gCMG;gBJI,oBK;8DLC;OIC;KNG;+BQG;kBNO,iBG;eHG;SMC;KRE;+BSG;KTQ;WUW;KVQ;GDC;gCYI;cTyB,kCS;mCCO,wBD;kBTkC,iBG;eHG;SSC;kBTO,oBK,0BL,CS;gBTS,oBK,0BL,CS;GZS;kCcI;cXI,iBG;WHG;KWC;kBXwB,oBK,+CL,CW;kBXI,iBG;eHG;SWC;gBXM,iBG;aHG;OWC;GdI;kCeI;qCCI,+CD;cZC,oBK,+CL,CY;kBZmB,+BY;GfI;kCiBI;GjBI;+BkBE;gBfI,wBe;GlBE;0BmBK,kFnB;CDS"},"hasCjsExports":false},"type":"js/module"}]}