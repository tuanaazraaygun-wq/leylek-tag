{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/callSuper","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"378KbBHdmndC3iMXZ2Ix8oB3LeE=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/superPropGet","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"b4Lel0pEiTM8mvZZX/d05uR+OmU=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/inherits","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"y0uNg4LxF1CLscQChxzgo5dfjvA=","exportNames":["*"],"imports":1}},{"name":"ts-interface-checker","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":54,"index":54}}],"key":"HfhaKjnice1fCpg0Sn7EyYWsNYo=","exportNames":["*"],"imports":1}},{"name":"../AgoraBase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":56},"end":{"line":3,"column":45,"index":101}}],"key":"DlZ3bIZKenMx+ASVBy9vnXRtwdo=","exportNames":["*"],"imports":1}},{"name":"../impl/IAgoraMediaRecorderImpl","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":243},"end":{"line":6,"column":69,"index":312}}],"key":"E08aYQSotczmkUUZQgZFmbabu8U=","exportNames":["*"],"imports":1}},{"name":"../ti/AgoraMediaBase-ti","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":313},"end":{"line":7,"column":55,"index":368}}],"key":"QZ6mImaAognVYZX7es9N8fUStRE=","exportNames":["*"],"imports":1}},{"name":"./IrisApiEngine","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":10,"column":0,"index":421},"end":{"line":14,"column":25,"index":509}}],"key":"0UpvluOwke2G7Jk/PkNw9qFcW40=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"MediaRecorderInternal\", {\n    enumerable: true,\n    get: function () {\n      return MediaRecorderInternal;\n    }\n  });\n  var _babelRuntimeHelpersClassCallCheck = require(_dependencyMap[0]);\n  var _classCallCheck = _interopDefault(_babelRuntimeHelpersClassCallCheck);\n  var _babelRuntimeHelpersCreateClass = require(_dependencyMap[1]);\n  var _createClass = _interopDefault(_babelRuntimeHelpersCreateClass);\n  var _babelRuntimeHelpersCallSuper = require(_dependencyMap[2]);\n  var _callSuper = _interopDefault(_babelRuntimeHelpersCallSuper);\n  var _babelRuntimeHelpersSuperPropGet = require(_dependencyMap[3]);\n  var _superPropGet = _interopDefault(_babelRuntimeHelpersSuperPropGet);\n  var _babelRuntimeHelpersInherits = require(_dependencyMap[4]);\n  var _inherits = _interopDefault(_babelRuntimeHelpersInherits);\n  var _tsInterfaceChecker = require(_dependencyMap[5]);\n  var _AgoraBase = require(_dependencyMap[6]);\n  var _implIAgoraMediaRecorderImpl = require(_dependencyMap[7]);\n  var _tiAgoraMediaBaseTi = require(_dependencyMap[8]);\n  var AgoraMediaBaseTI = _interopDefault(_tiAgoraMediaBaseTi);\n  var _IrisApiEngine = require(_dependencyMap[9]);\n  var checkers = (0, _tsInterfaceChecker.createCheckers)(AgoraMediaBaseTI.default);\n  var MediaRecorderInternal = /*#__PURE__*/function (_IMediaRecorderImpl) {\n    function MediaRecorderInternal(nativeHandle) {\n      var _this;\n      (0, _classCallCheck.default)(this, MediaRecorderInternal);\n      _this = (0, _callSuper.default)(this, MediaRecorderInternal);\n      _this._nativeHandle = nativeHandle;\n      return _this;\n    }\n    (0, _inherits.default)(MediaRecorderInternal, _IMediaRecorderImpl);\n    return (0, _createClass.default)(MediaRecorderInternal, [{\n      key: \"release\",\n      value: function release() {\n        MediaRecorderInternal._observers.delete(this._nativeHandle);\n        this.removeAllListeners();\n      }\n    }, {\n      key: \"nativeHandle\",\n      get: function () {\n        return this._nativeHandle;\n      }\n    }, {\n      key: \"setMediaRecorderObserver\",\n      value: function setMediaRecorderObserver(callback) {\n        var key = this._nativeHandle;\n        if (MediaRecorderInternal._observers.has(key)) {\n          return _AgoraBase.ErrorCodeType.ErrOk;\n        }\n        MediaRecorderInternal._observers.set(key, callback);\n        return (0, _superPropGet.default)(MediaRecorderInternal, \"setMediaRecorderObserver\", this, 3)([callback]);\n      }\n    }, {\n      key: \"_addListenerPreCheck\",\n      value: function _addListenerPreCheck(eventType) {\n        if (checkers.IMediaRecorderObserver?.strictTest({\n          [eventType]: undefined\n        })) {\n          if (MediaRecorderInternal._observers.get(this._nativeHandle) === undefined) {\n            this.setMediaRecorderObserver({});\n          }\n        }\n        return true;\n      }\n    }, {\n      key: \"addListener\",\n      value: function addListener(eventType, listener) {\n        this._addListenerPreCheck(eventType);\n        var callback = (eventProcessor, data) => {\n          if (eventProcessor.type(data) !== _IrisApiEngine.EVENT_TYPE.IMediaRecorder) {\n            return;\n          }\n          if (data.nativeHandle !== this._nativeHandle) {\n            return;\n          }\n          eventProcessor.func.map(it => {\n            it({\n              [eventType]: listener\n            }, eventType, data);\n          });\n        };\n        // @ts-ignore\n        listener.agoraCallback = callback;\n        _IrisApiEngine.DeviceEventEmitter.addListener(eventType, callback);\n      }\n    }, {\n      key: \"removeListener\",\n      value: function removeListener(eventType, listener) {\n        _IrisApiEngine.DeviceEventEmitter.removeListener(eventType,\n        // @ts-ignore\n        listener?.agoraCallback ?? listener);\n      }\n    }, {\n      key: \"removeAllListeners\",\n      value: function removeAllListeners(eventType) {\n        _IrisApiEngine.DeviceEventEmitter.removeAllListeners(eventType);\n      }\n    }]);\n  }(_implIAgoraMediaRecorderImpl.IMediaRecorderImpl);\n  MediaRecorderInternal._observers = new Map();\n});","lineCount":113,"map":[[12,2,16,0,"Object"],[12,8,16,0],[12,9,16,0,"defineProperty"],[12,23,16,0],[12,24,16,0,"exports"],[12,31,16,0],[13,4,16,0,"enumerable"],[13,14,16,0],[14,4,16,0,"get"],[14,7,16,0],[14,18,16,0,"get"],[14,19,16,0],[15,6,16,0],[15,13,16,0,"MediaRecorderInternal"],[15,34,16,0],[16,4,16,0],[17,2,16,0],[18,2,100,1],[18,6,100,1,"_babelRuntimeHelpersClassCallCheck"],[18,40,100,1],[18,43,100,1,"require"],[18,50,100,1],[18,51,100,1,"_dependencyMap"],[18,65,100,1],[19,2,100,1],[19,6,100,1,"_classCallCheck"],[19,21,100,1],[19,24,100,1,"_interopDefault"],[19,39,100,1],[19,40,100,1,"_babelRuntimeHelpersClassCallCheck"],[19,74,100,1],[20,2,100,1],[20,6,100,1,"_babelRuntimeHelpersCreateClass"],[20,37,100,1],[20,40,100,1,"require"],[20,47,100,1],[20,48,100,1,"_dependencyMap"],[20,62,100,1],[21,2,100,1],[21,6,100,1,"_createClass"],[21,18,100,1],[21,21,100,1,"_interopDefault"],[21,36,100,1],[21,37,100,1,"_babelRuntimeHelpersCreateClass"],[21,68,100,1],[22,2,100,1],[22,6,100,1,"_babelRuntimeHelpersCallSuper"],[22,35,100,1],[22,38,100,1,"require"],[22,45,100,1],[22,46,100,1,"_dependencyMap"],[22,60,100,1],[23,2,100,1],[23,6,100,1,"_callSuper"],[23,16,100,1],[23,19,100,1,"_interopDefault"],[23,34,100,1],[23,35,100,1,"_babelRuntimeHelpersCallSuper"],[23,64,100,1],[24,2,100,1],[24,6,100,1,"_babelRuntimeHelpersSuperPropGet"],[24,38,100,1],[24,41,100,1,"require"],[24,48,100,1],[24,49,100,1,"_dependencyMap"],[24,63,100,1],[25,2,100,1],[25,6,100,1,"_superPropGet"],[25,19,100,1],[25,22,100,1,"_interopDefault"],[25,37,100,1],[25,38,100,1,"_babelRuntimeHelpersSuperPropGet"],[25,70,100,1],[26,2,100,1],[26,6,100,1,"_babelRuntimeHelpersInherits"],[26,34,100,1],[26,37,100,1,"require"],[26,44,100,1],[26,45,100,1,"_dependencyMap"],[26,59,100,1],[27,2,100,1],[27,6,100,1,"_inherits"],[27,15,100,1],[27,18,100,1,"_interopDefault"],[27,33,100,1],[27,34,100,1,"_babelRuntimeHelpersInherits"],[27,62,100,1],[28,2,1,0],[28,6,1,0,"_tsInterfaceChecker"],[28,25,1,0],[28,28,1,0,"require"],[28,35,1,0],[28,36,1,0,"_dependencyMap"],[28,50,1,0],[29,2,3,0],[29,6,3,0,"_AgoraBase"],[29,16,3,0],[29,19,3,0,"require"],[29,26,3,0],[29,27,3,0,"_dependencyMap"],[29,41,3,0],[30,2,6,0],[30,6,6,0,"_implIAgoraMediaRecorderImpl"],[30,34,6,0],[30,37,6,0,"require"],[30,44,6,0],[30,45,6,0,"_dependencyMap"],[30,59,6,0],[31,2,7,0],[31,6,7,0,"_tiAgoraMediaBaseTi"],[31,25,7,0],[31,28,7,0,"require"],[31,35,7,0],[31,36,7,0,"_dependencyMap"],[31,50,7,0],[32,2,7,0],[32,6,7,0,"AgoraMediaBaseTI"],[32,22,7,0],[32,25,7,0,"_interopDefault"],[32,40,7,0],[32,41,7,0,"_tiAgoraMediaBaseTi"],[32,60,7,0],[33,2,10,0],[33,6,10,0,"_IrisApiEngine"],[33,20,10,0],[33,23,10,0,"require"],[33,30,10,0],[33,31,10,0,"_dependencyMap"],[33,45,10,0],[34,2,8,0],[34,6,8,6,"checkers"],[34,14,8,14],[34,17,8,17],[34,21,8,17,"createCheckers"],[34,40,8,31],[34,41,8,31,"createCheckers"],[34,55,8,31],[34,57,8,32,"AgoraMediaBaseTI"],[34,73,8,48],[34,74,8,48,"default"],[34,81,8,48],[34,82,8,49],[35,2,8,50],[35,6,16,13,"MediaRecorderInternal"],[35,27,16,34],[35,53,16,34,"_IMediaRecorderImpl"],[35,72,16,34],[36,4,23,2],[36,13,23,2,"MediaRecorderInternal"],[36,35,23,14,"nativeHandle"],[36,47,23,34],[36,49,23,36],[37,6,23,36],[37,10,23,36,"_this"],[37,15,23,36],[38,6,23,36],[38,10,23,36,"_classCallCheck"],[38,25,23,36],[38,26,23,36,"default"],[38,33,23,36],[38,41,23,36,"MediaRecorderInternal"],[38,62,23,36],[39,6,24,4,"_this"],[39,11,24,4],[39,18,24,4,"_callSuper"],[39,28,24,4],[39,29,24,4,"default"],[39,36,24,4],[39,44,24,4,"MediaRecorderInternal"],[39,65,24,4],[40,6,25,4,"_this"],[40,11,25,4],[40,12,25,9,"_nativeHandle"],[40,25,25,22],[40,28,25,25,"nativeHandle"],[40,40,25,37],[41,6,25,38],[41,13,25,38,"_this"],[41,18,25,38],[42,4,26,2],[43,4,26,3],[43,8,26,3,"_inherits"],[43,17,26,3],[43,18,26,3,"default"],[43,25,26,3],[43,27,26,3,"MediaRecorderInternal"],[43,48,26,3],[43,50,26,3,"_IMediaRecorderImpl"],[43,69,26,3],[44,4,26,3],[44,15,26,3,"_createClass"],[44,27,26,3],[44,28,26,3,"default"],[44,35,26,3],[44,37,26,3,"MediaRecorderInternal"],[44,58,26,3],[45,6,26,3,"key"],[45,9,26,3],[46,6,26,3,"value"],[46,11,26,3],[46,13,28,2],[46,22,28,2,"release"],[46,29,28,9,"release"],[46,30,28,9],[46,32,28,12],[47,8,29,4,"MediaRecorderInternal"],[47,29,29,25],[47,30,29,26,"_observers"],[47,40,29,36],[47,41,29,37,"delete"],[47,47,29,43],[47,48,29,44],[47,52,29,48],[47,53,29,49,"_nativeHandle"],[47,66,29,62],[47,67,29,63],[48,8,30,4],[48,12,30,8],[48,13,30,9,"removeAllListeners"],[48,31,30,27],[48,32,30,28],[48,33,30,29],[49,6,31,2],[50,4,31,3],[51,6,31,3,"key"],[51,9,31,3],[52,6,31,3,"get"],[52,9,31,3],[52,11,33,2],[52,20,33,2,"get"],[52,21,33,2],[52,23,33,29],[53,8,34,4],[53,15,34,11],[53,19,34,15],[53,20,34,16,"_nativeHandle"],[53,33,34,29],[54,6,35,2],[55,4,35,3],[56,6,35,3,"key"],[56,9,35,3],[57,6,35,3,"value"],[57,11,35,3],[57,13,37,2],[57,22,37,11,"setMediaRecorderObserver"],[57,46,37,35,"setMediaRecorderObserver"],[57,47,37,36,"callback"],[57,55,37,68],[57,57,37,78],[58,8,38,4],[58,12,38,10,"key"],[58,15,38,13],[58,18,38,16],[58,22,38,20],[58,23,38,21,"_nativeHandle"],[58,36,38,34],[59,8,39,4],[59,12,39,8,"MediaRecorderInternal"],[59,33,39,29],[59,34,39,30,"_observers"],[59,44,39,40],[59,45,39,41,"has"],[59,48,39,44],[59,49,39,45,"key"],[59,52,39,48],[59,53,39,49],[59,55,39,51],[60,10,40,6],[60,17,40,13,"ErrorCodeType"],[60,27,40,26],[60,28,40,26,"ErrorCodeType"],[60,41,40,26],[60,42,40,27,"ErrOk"],[60,47,40,32],[61,8,41,4],[62,8,42,4,"MediaRecorderInternal"],[62,29,42,25],[62,30,42,26,"_observers"],[62,40,42,36],[62,41,42,37,"set"],[62,44,42,40],[62,45,42,41,"key"],[62,48,42,44],[62,50,42,46,"callback"],[62,58,42,54],[62,59,42,55],[63,8,43,4],[63,19,43,4,"_superPropGet"],[63,32,43,4],[63,33,43,4,"default"],[63,40,43,4],[63,42,43,4,"MediaRecorderInternal"],[63,63,43,4],[63,103,43,42,"callback"],[63,111,43,50],[64,6,44,2],[65,4,44,3],[66,6,44,3,"key"],[66,9,44,3],[67,6,44,3,"value"],[67,11,44,3],[67,13,46,2],[67,22,46,2,"_addListenerPreCheck"],[67,42,46,22,"_addListenerPreCheck"],[67,43,47,4,"eventType"],[67,52,47,24],[67,54,48,13],[68,8,49,4],[68,12,50,6,"checkers"],[68,20,50,14],[68,21,50,15,"IMediaRecorderObserver"],[68,43,50,37],[68,45,50,39,"strictTest"],[68,55,50,49],[68,56,50,50],[69,10,51,8],[69,11,51,9,"eventType"],[69,20,51,18],[69,23,51,21,"undefined"],[70,8,52,6],[70,9,52,7],[70,10,52,8],[70,12,53,6],[71,10,54,6],[71,14,55,8,"MediaRecorderInternal"],[71,35,55,29],[71,36,55,30,"_observers"],[71,46,55,40],[71,47,55,41,"get"],[71,50,55,44],[71,51,55,45],[71,55,55,49],[71,56,55,50,"_nativeHandle"],[71,69,55,63],[71,70,55,64],[71,75,55,69,"undefined"],[71,84,55,78],[71,86,56,8],[72,12,57,8],[72,16,57,12],[72,17,57,13,"setMediaRecorderObserver"],[72,41,57,37],[72,42,57,38],[72,43,57,39],[72,44,57,40],[72,45,57,41],[73,10,58,6],[74,8,59,4],[75,8,60,4],[75,15,60,11],[75,19,60,15],[76,6,61,2],[77,4,61,3],[78,6,61,3,"key"],[78,9,61,3],[79,6,61,3,"value"],[79,11,61,3],[79,13,63,2],[79,22,63,2,"addListener"],[79,33,63,13,"addListener"],[79,34,64,4,"eventType"],[79,43,64,24],[79,45,65,4,"listener"],[79,53,65,44],[79,55,66,10],[80,8,67,4],[80,12,67,8],[80,13,67,9,"_addListenerPreCheck"],[80,33,67,29],[80,34,67,30,"eventType"],[80,43,67,39],[80,44,67,40],[81,8,68,4],[81,12,68,10,"callback"],[81,20,68,18],[81,23,68,21,"callback"],[81,24,68,22,"eventProcessor"],[81,38,68,57],[81,40,68,59,"data"],[81,44,68,68],[81,49,68,73],[82,10,69,6],[82,14,69,10,"eventProcessor"],[82,28,69,24],[82,29,69,25,"type"],[82,33,69,29],[82,34,69,30,"data"],[82,38,69,34],[82,39,69,35],[82,44,69,40,"EVENT_TYPE"],[82,58,69,50],[82,59,69,50,"EVENT_TYPE"],[82,69,69,50],[82,70,69,51,"IMediaRecorder"],[82,84,69,65],[82,86,69,67],[83,12,70,8],[84,10,71,6],[85,10,72,6],[85,14,72,10,"data"],[85,18,72,14],[85,19,72,15,"nativeHandle"],[85,31,72,27],[85,36,72,32],[85,40,72,36],[85,41,72,37,"_nativeHandle"],[85,54,72,50],[85,56,72,52],[86,12,73,8],[87,10,74,6],[88,10,75,6,"eventProcessor"],[88,24,75,20],[88,25,75,21,"func"],[88,29,75,25],[88,30,75,26,"map"],[88,33,75,29],[88,34,75,31,"it"],[88,36,75,33],[88,40,75,38],[89,12,76,8,"it"],[89,14,76,10],[89,15,76,11],[90,14,76,13],[90,15,76,14,"eventType"],[90,24,76,23],[90,27,76,26,"listener"],[91,12,76,35],[91,13,76,36],[91,15,76,38,"eventType"],[91,24,76,47],[91,26,76,49,"data"],[91,30,76,53],[91,31,76,54],[92,10,77,6],[92,11,77,7],[92,12,77,8],[93,8,78,4],[93,9,78,5],[94,8,79,4],[95,8,80,4,"listener"],[95,16,80,12],[95,17,80,14,"agoraCallback"],[95,30,80,27],[95,33,80,30,"callback"],[95,41,80,38],[96,8,81,4,"DeviceEventEmitter"],[96,22,81,22],[96,23,81,22,"DeviceEventEmitter"],[96,41,81,22],[96,42,81,23,"addListener"],[96,53,81,34],[96,54,81,35,"eventType"],[96,63,81,44],[96,65,81,46,"callback"],[96,73,81,54],[96,74,81,55],[97,6,82,2],[98,4,82,3],[99,6,82,3,"key"],[99,9,82,3],[100,6,82,3,"value"],[100,11,82,3],[100,13,84,2],[100,22,84,2,"removeListener"],[100,36,84,16,"removeListener"],[100,37,85,4,"eventType"],[100,46,85,24],[100,48,86,4,"listener"],[100,56,86,45],[100,58,87,4],[101,8,88,4,"DeviceEventEmitter"],[101,22,88,22],[101,23,88,22,"DeviceEventEmitter"],[101,41,88,22],[101,42,88,23,"removeListener"],[101,56,88,37],[101,57,89,6,"eventType"],[101,66,89,15],[102,8,90,6],[103,8,91,6,"listener"],[103,16,91,14],[103,18,91,16,"agoraCallback"],[103,31,91,29],[103,35,91,33,"listener"],[103,43,92,4],[103,44,92,5],[104,6,93,2],[105,4,93,3],[106,6,93,3,"key"],[106,9,93,3],[107,6,93,3,"value"],[107,11,93,3],[107,13,95,2],[107,22,95,2,"removeAllListeners"],[107,40,95,20,"removeAllListeners"],[107,41,96,4,"eventType"],[107,50,96,25],[107,52,97,4],[108,8,98,4,"DeviceEventEmitter"],[108,22,98,22],[108,23,98,22,"DeviceEventEmitter"],[108,41,98,22],[108,42,98,23,"removeAllListeners"],[108,60,98,41],[108,61,98,42,"eventType"],[108,70,98,51],[108,71,98,52],[109,6,99,2],[110,4,99,3],[111,2,99,3],[111,4,16,43,"IMediaRecorderImpl"],[111,32,16,61],[111,33,16,61,"IMediaRecorderImpl"],[111,51,16,61],[112,2,16,13,"MediaRecorderInternal"],[112,23,16,34],[112,24,17,9,"_observers"],[112,34,17,19],[112,37,17,59],[112,41,17,63,"Map"],[112,44,17,66],[112,45,20,4],[112,46,20,5],[113,0,20,5],[113,3]],"functionMap":{"names":["<global>","MediaRecorderInternal","constructor","release","get__nativeHandle","setMediaRecorderObserver","_addListenerPreCheck","addListener","callback","eventProcessor.func.map$argument_0","removeListener","removeAllListeners"],"mappings":"AAA;OCe;ECO;GDG;EEE;GFG;EGE;GHE;EIE;GJO;EKE;GLe;EME;qBCK;8BCO;ODE;KDC;GNI;ESE;GTS;EUE;GVI;CDC"},"hasCjsExports":false},"type":"js/module"}]}