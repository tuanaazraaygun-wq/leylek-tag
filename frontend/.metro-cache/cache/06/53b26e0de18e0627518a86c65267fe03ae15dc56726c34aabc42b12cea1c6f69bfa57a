{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":102},"end":{"line":6,"column":65,"index":167}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/AppState","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"JfCM6WRyn2619+pzBJhEHd1+SSw=","exportNames":["*"],"imports":1}},{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":219},"end":{"line":8,"column":52,"index":271}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"expo-device","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":272},"end":{"line":9,"column":38,"index":310}}],"key":"bBpmAhO1g++sdeUzQmFVGoQIVwg=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":10,"column":0,"index":311},"end":{"line":10,"column":39,"index":350}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,_d){\"use strict\";function e(e){return e&&e.__esModule?e:{default:e}}function t(e){if(e&&e.__esModule)return e;var t={};return e&&Object.keys(e).forEach(function(n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}),t.default=e,t}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"default\",{enumerable:!0,get:function(){return h}}),_e.usePushNotifications=d;var n=r(_d[0]);r(_d[1]);var o=e(r(_d[2])),s=t(r(_d[3])),l=t(r(_d[4])),c=e(r(_d[5]));s.setNotificationHandler({handleNotification:async()=>({shouldShowAlert:!0,shouldPlaySound:!0,shouldSetBadge:!0,shouldShowBanner:!0,shouldShowList:!0})});const u=\"https://socketmsgs.preview.emergentagent.com/api\";function d(){const[e,t]=(0,n.useState)(null),[d,h]=(0,n.useState)(null),[f,y]=(0,n.useState)(null),k=(0,n.useRef)(null),p=(0,n.useRef)(null),P=(0,n.useRef)(o.default.currentState),b=(0,n.useCallback)(async()=>{try{if(!l.isDevice)return console.log('\\ud83d\\udcf1 Push bildirimleri sadece fiziksel cihazlarda \\xe7al\\u0131\\u015f\\u0131r'),y('Sim\\xfclat\\xf6rde push bildirimi desteklenmiyor'),null;const{status:e}=await s.getPermissionsAsync();let n=e;if('granted'!==e){console.log('\\ud83d\\udcf1 Push bildirimi izni isteniyor...');const{status:e}=await s.requestPermissionsAsync();n=e}if('granted'!==n)return console.log('\\u274c Push bildirimi izni reddedildi'),y('Bildirim izni verilmedi'),null;const o=c.default.expoConfig?.extra?.eas?.projectId||'f00346b0-b9cb-47f9-a647-7f56b168e3a9';try{const e=await s.getExpoPushTokenAsync({projectId:o});return console.log('\\u2705 Push Token al\\u0131nd\\u0131:',e.data),t(e.data),y(null),e.data}catch(e){return console.log('\\u26a0\\ufe0f Push token al\\u0131namad\\u0131 (development modda normal):',e.message),null}}catch(e){return console.log('\\u26a0\\ufe0f Push notification setup hatas\\u0131:',e.message),null}},[]),v=(0,n.useCallback)(async t=>{try{let n=e;if(n||(n=await b()),!n)return console.log('\\u26a0\\ufe0f Push token al\\u0131namad\\u0131, kay\\u0131t atlan\\u0131yor'),!1;const o=await fetch(`${u}/user/register-push-token?user_id=${t}&push_token=${encodeURIComponent(n)}`,{method:'POST',headers:{'Content-Type':'application/json'}}),s=await o.json();return s.success?(console.log('\\u2705 Push token backend\\'e kaydedildi'),!0):(console.error('\\u274c Push token kay\\u0131t hatas\\u0131:',s.detail),!1)}catch(e){return console.error('\\u274c Push token kay\\u0131t hatas\\u0131:',e),!1}},[e,b]),w=(0,n.useCallback)(async e=>{try{await fetch(`${u}/user/remove-push-token?user_id=${e}`,{method:'DELETE'}),console.log('\\u2705 Push token silindi'),t(null)}catch(e){console.error('\\u274c Push token silme hatas\\u0131:',e)}},[]),S=(0,n.useCallback)(async(e,t,n)=>{try{await s.scheduleNotificationAsync({content:{title:e,body:t,data:n||{},sound:'default'},trigger:null})}catch(e){console.error('\\u274c Yerel bildirim hatas\\u0131:',e)}},[]);return(0,n.useEffect)(()=>{b(),k.current=s.addNotificationReceivedListener(e=>{console.log('\\ud83d\\udcec Bildirim al\\u0131nd\\u0131:',e.request.content.title),h(e)}),p.current=s.addNotificationResponseReceivedListener(e=>{console.log('\\ud83d\\udc46 Bildirime t\\u0131kland\\u0131:',e.notification.request.content);const t=e.notification.request.content.data;t&&console.log('\\ud83d\\udce6 Bildirim verisi:',t)});const e=o.default.addEventListener('change',e=>{P.current.match(/inactive|background/)&&'active'===e&&s.setBadgeCountAsync(0),P.current=e});return()=>{k.current&&k.current.remove(),p.current&&p.current.remove(),e.remove()}},[b]),{expoPushToken:e,notification:d,error:f,registerPushToken:v,removePushToken:w,scheduleLocalNotification:S}}var h=d});","lineCount":1,"map":[[1,378,251,0,"Object"],[1,385,251,0,"defineProperty"],[1,400,251,0,"_e"],[1,403,251,0],[1,414,251,0,"enumerable"],[1,426,251,0],[1,428,251,0,"get"],[1,432,251,0],[1,450,251,0,"_default"],[1,451,251,0],[1,455,38,0,"_e"],[1,458,38,0,"usePushNotifications"],[1,481,6,0],[1,485,6,0,"_react"],[1,487,6,0,"r"],[1,489,6,0,"_d"],[1,492,6,0],[1,496,6,65,"r"],[1,498,6,65,"_d"],[1,501,6,65],[1,509,6,65,"AppState"],[1,511,6,65,"_interopDefault"],[1,513,6,65,"r"],[1,515,6,65,"_d"],[1,518,6,65],[1,523,8,0,"Notifications"],[1,525,8,0,"_interopNamespace"],[1,527,8,0,"r"],[1,529,8,0,"_d"],[1,532,8,0],[1,537,9,0,"Device"],[1,539,9,0,"_interopNamespace"],[1,541,9,0,"r"],[1,543,9,0,"_d"],[1,546,9,0],[1,551,10,0,"Constants"],[1,553,10,0,"_interopDefault"],[1,555,10,0,"r"],[1,557,10,0,"_d"],[1,560,10,0],[1,565,13,0,"Notifications"],[1,567,13,14,"setNotificationHandler"],[1,590,13,37],[1,591,14,2,"handleNotification"],[1,610,14,22,"async"],[1,620,14,22],[1,621,15,4,"shouldShowAlert"],[1,638,15,21],[1,640,16,4,"shouldPlaySound"],[1,657,16,21],[1,659,17,4,"shouldSetBadge"],[1,675,17,20],[1,677,18,4,"shouldShowBanner"],[1,695,18,22],[1,697,19,4,"shouldShowList"],[1,713,19,20],[1,719,23,0],[1,725,24,6,"API_URL"],[1,727,24,16],[1,781,38,7],[1,790,38,16,"usePushNotifications"],[1,794,39,2],[1,800,39,9,"expoPushToken"],[1,802,39,24,"setExpoPushToken"],[1,806,39,44],[1,808,39,44,"useState"],[1,810,39,52,"useState"],[1,820,39,68],[1,827,40,9,"notification"],[1,829,40,23,"setNotification"],[1,833,40,42],[1,835,40,42,"useState"],[1,837,40,50,"useState"],[1,847,40,86],[1,854,41,9,"error"],[1,856,41,16,"setError"],[1,860,41,28],[1,862,41,28,"useState"],[1,864,41,36,"useState"],[1,874,41,52],[1,880,43,8,"notificationListener"],[1,883,43,31],[1,885,43,31,"useRef"],[1,887,43,37,"useRef"],[1,895,43,78],[1,901,44,8,"responseListener"],[1,904,44,27],[1,906,44,27,"useRef"],[1,908,44,33,"useRef"],[1,916,44,74],[1,922,45,8,"appStateRef"],[1,925,45,22],[1,927,45,22,"useRef"],[1,929,45,28,"useRef"],[1,937,45,29,"AppState"],[1,939,45,37,"default"],[1,947,45,38,"currentState"],[1,961,48,8,"getExpoPushToken"],[1,964,48,27],[1,966,48,27,"useCallback"],[1,968,48,38,"useCallback"],[1,981,48,39,"async"],[1,991,49,4],[1,995,51,6],[1,999,51,11,"Device"],[1,1001,51,18,"isDevice"],[1,1010,54,8],[1,1017,52,8,"console"],[1,1025,52,16,"log"],[1,1029,52,20],[1,1116,53,8,"setError"],[1,1118,53,17],[1,1169,54,15],[1,1174,82,6],[1,1180,82,14,"status"],[1,1187,82,22,"existingStatus"],[1,1196,82,47,"Notifications"],[1,1198,82,61,"getPermissionsAsync"],[1,1220,83,6],[1,1224,83,10,"finalStatus"],[1,1226,83,24,"existingStatus"],[1,1228,85,6],[1,1231,85,29],[1,1243,85,10,"existingStatus"],[1,1245,85,40],[1,1246,86,8,"console"],[1,1254,86,16,"log"],[1,1258,86,20],[1,1307,87,8],[1,1313,87,14,"status"],[1,1320,87,16,"status"],[1,1329,87,33,"Notifications"],[1,1331,87,47,"requestPermissionsAsync"],[1,1357,88,8,"finalStatus"],[1,1359,88,22,"status"],[1,1360,89,6],[1,1361,91,6],[1,1364,91,26],[1,1376,91,10,"finalStatus"],[1,1378,94,8],[1,1385,92,8,"console"],[1,1393,92,16,"log"],[1,1397,92,20],[1,1438,93,8,"setError"],[1,1440,93,17],[1,1467,94,15],[1,1472,98,6],[1,1478,98,12,"projectId"],[1,1480,98,24,"Constants"],[1,1482,98,33,"default"],[1,1490,98,34,"expoConfig"],[1,1502,98,46,"extra"],[1,1509,98,53,"eas"],[1,1514,98,58,"projectId"],[1,1525,98,71],[1,1564,100,6],[1,1568,101,8],[1,1574,101,14,"tokenData"],[1,1582,101,32,"Notifications"],[1,1584,101,46,"getExpoPushTokenAsync"],[1,1606,101,68],[1,1607,102,10,"projectId"],[1,1617,102,21,"projectId"],[1,1621,109,8],[1,1628,105,8,"console"],[1,1636,105,16,"log"],[1,1640,105,20],[1,1678,105,44,"tokenData"],[1,1680,105,54,"data"],[1,1686,106,8,"setExpoPushToken"],[1,1688,106,25,"tokenData"],[1,1690,106,35,"data"],[1,1696,107,8,"setError"],[1,1698,107,17],[1,1704,109,15,"tokenData"],[1,1706,109,25,"data"],[1,1710,110,6],[1,1711,110,8],[1,1717,110,15,"tokenError"],[1,1720,113,8],[1,1727,112,8,"console"],[1,1735,112,16,"log"],[1,1739,112,20],[1,1813,112,75,"tokenError"],[1,1815,112,86,"message"],[1,1824,113,15],[1,1828,114,6],[1,1829,115,4],[1,1830,115,6],[1,1836,115,13,"err"],[1,1839,118,6],[1,1846,116,6,"console"],[1,1854,116,14,"log"],[1,1858,116,18],[1,1910,116,56,"err"],[1,1912,116,60,"message"],[1,1921,118,13],[1,1925,119,4],[1,1928,120,5],[1,1932,123,8,"registerPushToken"],[1,1935,123,28],[1,1937,123,28,"useCallback"],[1,1939,123,39,"useCallback"],[1,1952,123,40,"async"],[1,1962,124,4],[1,1966,125,6],[1,1970,125,10,"token"],[1,1972,125,18,"expoPushToken"],[1,1974,132,6],[1,1977,128,11,"token"],[1,1981,129,8,"token"],[1,1989,129,22,"getExpoPushToken"],[1,1995,132,11,"token"],[1,1997,134,8],[1,2004,133,8,"console"],[1,2012,133,16,"log"],[1,2016,133,20],[1,2091,134,15],[1,2093,138,6],[1,2099,138,12,"response"],[1,2107,138,29,"fetch"],[1,2113,138,35],[1,2116,138,38,"API_URL"],[1,2154,138,82,"userId"],[1,2170,138,103,"encodeURIComponent"],[1,2189,138,122,"token"],[1,2194,138,132],[1,2195,139,8,"method"],[1,2202,139,16],[1,2209,140,8,"headers"],[1,2217,140,17],[1,2218,141,10],[1,2233,141,26],[1,2255,145,12,"data"],[1,2263,145,25,"response"],[1,2265,145,34,"json"],[1,2272,147,6],[1,2279,147,10,"data"],[1,2281,147,15,"success"],[1,2290,148,8,"console"],[1,2298,148,16,"log"],[1,2302,148,20],[1,2346,149,15],[1,2350,151,8,"console"],[1,2358,151,16,"error"],[1,2364,151,22],[1,2408,151,52,"data"],[1,2410,151,57,"detail"],[1,2419,152,15],[1,2421,154,4],[1,2422,154,6],[1,2428,154,13,"err"],[1,2431,156,6],[1,2438,155,6,"console"],[1,2446,155,14,"error"],[1,2452,155,20],[1,2496,155,50,"err"],[1,2500,156,13],[1,2501,157,4],[1,2504,158,5],[1,2505,158,6,"expoPushToken"],[1,2507,158,21,"getExpoPushToken"],[1,2511,161,8,"removePushToken"],[1,2514,161,26],[1,2516,161,26,"useCallback"],[1,2518,161,37,"useCallback"],[1,2531,161,38,"async"],[1,2541,162,4],[1,2551,163,12,"fetch"],[1,2557,163,18],[1,2560,163,21,"API_URL"],[1,2596,163,63,"userId"],[1,2600,163,73],[1,2601,164,8,"method"],[1,2608,164,16],[1,2619,166,6,"console"],[1,2627,166,14,"log"],[1,2631,166,18],[1,2660,167,6,"setExpoPushToken"],[1,2662,167,23],[1,2667,168,4],[1,2668,168,6],[1,2674,168,13,"err"],[1,2677,169,6,"console"],[1,2685,169,14,"error"],[1,2691,169,20],[1,2730,169,50,"err"],[1,2732,170,4],[1,2735,171,5],[1,2739,174,8,"scheduleLocalNotification"],[1,2742,174,36],[1,2744,174,36,"useCallback"],[1,2746,174,47,"useCallback"],[1,2759,174,48,"async"],[1,2765,175,4,"title"],[1,2767,176,4,"body"],[1,2769,177,4,"data"],[1,2774,179,4],[1,2784,180,12,"Notifications"],[1,2786,180,26,"scheduleNotificationAsync"],[1,2812,180,52],[1,2813,181,8,"content"],[1,2821,181,17],[1,2822,182,10,"title"],[1,2830,183,10,"body"],[1,2837,184,10,"data"],[1,2842,184,16,"data"],[1,2845,184,24],[1,2846,184,25],[1,2848,185,10,"sound"],[1,2854,185,17],[1,2865,187,8,"trigger"],[1,2873,187,17],[1,2879,189,4],[1,2880,189,6],[1,2886,189,13,"err"],[1,2889,190,6,"console"],[1,2897,190,14,"error"],[1,2903,190,20],[1,2940,190,48,"err"],[1,2942,191,4],[1,2945,192,5],[1,2949,241,2],[1,2956,195,2],[1,2958,195,2,"useEffect"],[1,2960,195,11,"useEffect"],[1,2971,195,12],[1,2976,197,4,"getExpoPushToken"],[1,2980,200,4,"notificationListener"],[1,2982,200,25,"current"],[1,2990,200,35,"Notifications"],[1,2992,200,49,"addNotificationReceivedListener"],[1,3024,200,81,"notification"],[1,3028,201,6,"console"],[1,3036,201,14,"log"],[1,3040,201,18],[1,3082,201,41,"notification"],[1,3084,201,54,"request"],[1,3092,201,62,"content"],[1,3100,201,70,"title"],[1,3107,202,6,"setNotification"],[1,3109,202,22,"notification"],[1,3114,206,4,"responseListener"],[1,3116,206,21,"current"],[1,3124,206,31,"Notifications"],[1,3126,206,45,"addNotificationResponseReceivedListener"],[1,3166,206,85,"response"],[1,3170,207,6,"console"],[1,3178,207,14,"log"],[1,3182,207,18],[1,3227,207,44,"response"],[1,3229,207,53,"notification"],[1,3242,207,66,"request"],[1,3250,207,74,"content"],[1,3259,209,6],[1,3265,209,12,"data"],[1,3267,209,19,"response"],[1,3269,209,28,"notification"],[1,3282,209,41,"request"],[1,3290,209,49,"content"],[1,3298,209,57,"data"],[1,3303,210,10,"data"],[1,3306,211,8,"console"],[1,3314,211,16,"log"],[1,3318,211,20],[1,3350,211,43,"data"],[1,3355,218,4],[1,3361,218,10,"subscription"],[1,3363,218,25,"AppState"],[1,3365,218,33,"default"],[1,3373,218,34,"addEventListener"],[1,3390,218,51],[1,3399,218,61,"nextAppState"],[1,3403,220,8,"appStateRef"],[1,3405,220,20,"current"],[1,3413,220,28,"match"],[1,3419,220,34],[1,3443,221,25],[1,3454,221,8,"nextAppState"],[1,3457,224,8,"Notifications"],[1,3459,224,22,"setBadgeCountAsync"],[1,3478,224,41],[1,3481,226,6,"appStateRef"],[1,3483,226,18,"current"],[1,3491,226,28,"nextAppState"],[1,3495,230,4],[1,3501,230,11],[1,3506,231,10,"notificationListener"],[1,3508,231,31,"current"],[1,3517,232,8,"notificationListener"],[1,3519,232,29,"current"],[1,3527,232,37,"remove"],[1,3536,234,10,"responseListener"],[1,3538,234,27,"current"],[1,3547,235,8,"responseListener"],[1,3549,235,25,"current"],[1,3557,235,33,"remove"],[1,3566,237,6,"subscription"],[1,3568,237,19,"remove"],[1,3579,239,5],[1,3580,239,6,"getExpoPushToken"],[1,3584,241,9],[1,3585,242,4,"expoPushToken"],[1,3601,243,4,"notification"],[1,3616,244,4,"error"],[1,3624,245,4,"registerPushToken"],[1,3644,246,4,"removePushToken"],[1,3662,247,4,"scheduleLocalNotification"],[1,3690,249,0],[1,3691,251,0],[1,3695,251,0,"_default"],[1,3697,251,15,"usePushNotifications"],[1,3698,251,36],[1,3701]],"functionMap":{"names":["<global>","Notifications.setNotificationHandler$argument_0.handleNotification","usePushNotifications","getExpoPushToken","registerPushToken","removePushToken","scheduleLocalNotification","useEffect$argument_0","Notifications.addNotificationReceivedListener$argument_0","Notifications.addNotificationResponseReceivedListener$argument_0","AppState.addEventListener$argument_1","<anonymous>"],"mappings":"AAA;sBCa;IDM;OEkB;uCCU;GDwE;wCEG;GFmC;sCGG;GHU;gDIG;GJkB;YKG;iFCK;KDG;qFEG;KFS;6DGG;KHS;WIG;KJQ;GLC;CFU"},"hasCjsExports":false},"type":"js/module"}]}