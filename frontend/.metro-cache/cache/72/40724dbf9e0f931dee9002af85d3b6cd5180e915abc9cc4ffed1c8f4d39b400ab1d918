{"dependencies":[{"name":"event-target-shim","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":70,"index":85}}],"key":"NbjKHRYGUQGwCXA5fondJGZijfU=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/NativeModules","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"MRft9soElPgDBIQyAww27iefYeU=","exportNames":["*"],"imports":1}},{"name":"./MediaStreamTrack","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":132},"end":{"line":5,"column":50,"index":182}}],"key":"p8DgKb9dKwcdlolbSXUFkI2QMkE=","exportNames":["*"],"imports":1}},{"name":"./RTCUtil","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":183},"end":{"line":6,"column":37,"index":220}}],"key":"CN8UyESr1mxcK8UZcasAG4s3jsI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return MediaStream;\n    }\n  });\n  var _eventTargetShim = require(_dependencyMap[0], \"event-target-shim\");\n  var _reactNativeWebDistExportsNativeModules = require(_dependencyMap[1], \"react-native-web/dist/exports/NativeModules\");\n  var NativeModules = _interopDefault(_reactNativeWebDistExportsNativeModules);\n  var _MediaStreamTrack = require(_dependencyMap[2], \"./MediaStreamTrack\");\n  var MediaStreamTrack = _interopDefault(_MediaStreamTrack);\n  var _RTCUtil = require(_dependencyMap[3], \"./RTCUtil\");\n  const {\n    WebRTCModule\n  } = NativeModules.default;\n  class MediaStream extends _eventTargetShim.EventTarget {\n    _tracks = [];\n\n    /**\n     * The identifier of this MediaStream unique within the associated\n     * WebRTCModule instance. As the id of a remote MediaStream instance is unique\n     * only within the associated RTCPeerConnection, it is not sufficiently unique\n     * to identify this MediaStream across multiple RTCPeerConnections and to\n     * unambiguously differentiate it from a local MediaStream instance not added\n     * to an RTCPeerConnection.\n     */\n\n    /**\n     * A MediaStream can be constructed in several ways, depending on the parameters\n     * that are passed here.\n     *\n     * - undefined: just a new stream, with no tracks.\n     * - MediaStream instance: a new stream, with a copy of the tracks of the passed stream.\n     * - Array of MediaStreamTrack: a new stream with a copy of the tracks in the array.\n     * - object: a new stream instance, represented by the passed info object, this is always\n     *   done internally, when the stream is first created in native and the JS wrapper is\n     *   built afterwards.\n     */\n    constructor(arg) {\n      super();\n\n      // Assign a UUID to start with. It will get overridden for remote streams.\n      this._id = (0, _RTCUtil.uniqueID)();\n\n      // Local MediaStreams are created by WebRTCModule to have their id and\n      // reactTag equal because WebRTCModule follows the respective standard's\n      // recommendation for id generation i.e. uses UUID which is unique enough\n      // for the purposes of reactTag.\n      this._reactTag = this._id;\n      if (typeof arg === 'undefined') {\n        WebRTCModule.mediaStreamCreate(this.id);\n      } else if (arg instanceof MediaStream) {\n        WebRTCModule.mediaStreamCreate(this.id);\n        for (const track of arg.getTracks()) {\n          this.addTrack(track);\n        }\n      } else if (Array.isArray(arg)) {\n        WebRTCModule.mediaStreamCreate(this.id);\n        for (const track of arg) {\n          this.addTrack(track);\n        }\n      } else if (typeof arg === 'object' && arg.streamId && arg.streamReactTag && arg.tracks) {\n        this._id = arg.streamId;\n        this._reactTag = arg.streamReactTag;\n        for (const trackInfo of arg.tracks) {\n          // We are not using addTrack here because the track is already part of the\n          // stream, so there is no need to add it on the native side.\n          this._tracks.push(new MediaStreamTrack.default(trackInfo));\n        }\n      } else {\n        throw new TypeError(`invalid type: ${typeof arg}`);\n      }\n    }\n    get id() {\n      return this._id;\n    }\n    get active() {\n      // TODO: can we reliably report this value?\n\n      return true;\n    }\n    addTrack(track) {\n      const index = this._tracks.indexOf(track);\n      if (index !== -1) {\n        return;\n      }\n      this._tracks.push(track);\n      WebRTCModule.mediaStreamAddTrack(this._reactTag, track.remote ? track._peerConnectionId : -1, track.id);\n    }\n    removeTrack(track) {\n      const index = this._tracks.indexOf(track);\n      if (index === -1) {\n        return;\n      }\n      this._tracks.splice(index, 1);\n      WebRTCModule.mediaStreamRemoveTrack(this._reactTag, track.remote ? track._peerConnectionId : -1, track.id);\n    }\n    getTracks() {\n      return this._tracks.slice();\n    }\n    getTrackById(trackId) {\n      return this._tracks.find(track => track.id === trackId);\n    }\n    getAudioTracks() {\n      return this._tracks.filter(track => track.kind === 'audio');\n    }\n    getVideoTracks() {\n      return this._tracks.filter(track => track.kind === 'video');\n    }\n    clone() {\n      throw new Error('Not implemented.');\n    }\n    toURL() {\n      return this._reactTag;\n    }\n    release(releaseTracks = true) {\n      const tracks = [...this._tracks];\n      for (const track of tracks) {\n        this.removeTrack(track);\n        if (releaseTracks) {\n          track.release();\n        }\n      }\n      WebRTCModule.mediaStreamRelease(this._reactTag);\n    }\n  }\n\n  /**\n   * Define the `onxxx` event handlers.\n   */\n  const proto = MediaStream.prototype;\n  (0, _eventTargetShim.defineEventAttribute)(proto, 'addtrack');\n  (0, _eventTargetShim.defineEventAttribute)(proto, 'removetrack');\n});","lineCount":145,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,1,13],[7,11,1,13,"_interopDefault"],[7,27,1,13,"e"],[7,28,1,13],[8,4,1,13],[8,11,1,13,"e"],[8,12,1,13],[8,16,1,13,"e"],[8,17,1,13],[8,18,1,13,"__esModule"],[8,28,1,13],[8,31,1,13,"e"],[8,32,1,13],[9,6,1,13,"default"],[9,13,1,13],[9,15,1,13,"e"],[10,4,1,13],[11,2,1,13],[12,2,10,15,"Object"],[12,8,10,15],[12,9,10,15,"defineProperty"],[12,23,10,15],[12,24,10,15,"exports"],[12,31,10,15],[13,4,10,15,"enumerable"],[13,14,10,15],[14,4,10,15,"get"],[14,7,10,15],[14,18,10,15,"get"],[14,19,10,15],[15,6,10,15],[15,13,10,15,"MediaStream"],[15,24,10,15],[16,4,10,15],[17,2,10,15],[18,2,3,0],[18,6,3,0,"_eventTargetShim"],[18,22,3,0],[18,25,3,0,"require"],[18,32,3,0],[18,33,3,0,"_dependencyMap"],[18,47,3,0],[19,2,3,70],[19,6,3,70,"_reactNativeWebDistExportsNativeModules"],[19,45,3,70],[19,48,3,70,"require"],[19,55,3,70],[19,56,3,70,"_dependencyMap"],[19,70,3,70],[20,2,3,70],[20,6,3,70,"NativeModules"],[20,19,3,70],[20,22,3,70,"_interopDefault"],[20,37,3,70],[20,38,3,70,"_reactNativeWebDistExportsNativeModules"],[20,77,3,70],[21,2,5,0],[21,6,5,0,"_MediaStreamTrack"],[21,23,5,0],[21,26,5,0,"require"],[21,33,5,0],[21,34,5,0,"_dependencyMap"],[21,48,5,0],[22,2,5,0],[22,6,5,0,"MediaStreamTrack"],[22,22,5,0],[22,25,5,0,"_interopDefault"],[22,40,5,0],[22,41,5,0,"_MediaStreamTrack"],[22,58,5,0],[23,2,6,0],[23,6,6,0,"_RTCUtil"],[23,14,6,0],[23,17,6,0,"require"],[23,24,6,0],[23,25,6,0,"_dependencyMap"],[23,39,6,0],[24,2,7,0],[24,8,7,6],[25,4,8,2,"WebRTCModule"],[26,2,9,0],[26,3,9,1],[26,6,9,4,"NativeModules"],[26,19,9,17],[26,20,9,17,"default"],[26,27,9,17],[27,2,10,15],[27,8,10,21,"MediaStream"],[27,19,10,32],[27,28,10,41,"EventTarget"],[27,44,10,52],[27,45,10,52,"EventTarget"],[27,56,10,52],[27,57,10,53],[28,4,11,2,"_tracks"],[28,11,11,9],[28,14,11,12],[28,16,11,14],[30,4,13,2],[31,0,14,0],[32,0,15,0],[33,0,16,0],[34,0,17,0],[35,0,18,0],[36,0,19,0],[37,0,20,0],[39,4,22,2],[40,0,23,0],[41,0,24,0],[42,0,25,0],[43,0,26,0],[44,0,27,0],[45,0,28,0],[46,0,29,0],[47,0,30,0],[48,0,31,0],[49,0,32,0],[50,4,33,2,"constructor"],[50,15,33,13,"constructor"],[50,16,33,14,"arg"],[50,19,33,17],[50,21,33,19],[51,6,34,4],[51,11,34,9],[51,12,34,10],[51,13,34,11],[53,6,36,4],[54,6,37,4],[54,10,37,8],[54,11,37,9,"_id"],[54,14,37,12],[54,17,37,15],[54,21,37,15,"uniqueID"],[54,29,37,23],[54,30,37,23,"uniqueID"],[54,38,37,23],[54,40,37,24],[54,41,37,25],[56,6,39,4],[57,6,40,4],[58,6,41,4],[59,6,42,4],[60,6,43,4],[60,10,43,8],[60,11,43,9,"_reactTag"],[60,20,43,18],[60,23,43,21],[60,27,43,25],[60,28,43,26,"_id"],[60,31,43,29],[61,6,44,4],[61,10,44,8],[61,17,44,15,"arg"],[61,20,44,18],[61,25,44,23],[61,36,44,34],[61,38,44,36],[62,8,45,6,"WebRTCModule"],[62,20,45,18],[62,21,45,19,"mediaStreamCreate"],[62,38,45,36],[62,39,45,37],[62,43,45,41],[62,44,45,42,"id"],[62,46,45,44],[62,47,45,45],[63,6,46,4],[63,7,46,5],[63,13,46,11],[63,17,46,15,"arg"],[63,20,46,18],[63,32,46,30,"MediaStream"],[63,43,46,41],[63,45,46,43],[64,8,47,6,"WebRTCModule"],[64,20,47,18],[64,21,47,19,"mediaStreamCreate"],[64,38,47,36],[64,39,47,37],[64,43,47,41],[64,44,47,42,"id"],[64,46,47,44],[64,47,47,45],[65,8,48,6],[65,13,48,11],[65,19,48,17,"track"],[65,24,48,22],[65,28,48,26,"arg"],[65,31,48,29],[65,32,48,30,"getTracks"],[65,41,48,39],[65,42,48,40],[65,43,48,41],[65,45,48,43],[66,10,49,8],[66,14,49,12],[66,15,49,13,"addTrack"],[66,23,49,21],[66,24,49,22,"track"],[66,29,49,27],[66,30,49,28],[67,8,50,6],[68,6,51,4],[68,7,51,5],[68,13,51,11],[68,17,51,15,"Array"],[68,22,51,20],[68,23,51,21,"isArray"],[68,30,51,28],[68,31,51,29,"arg"],[68,34,51,32],[68,35,51,33],[68,37,51,35],[69,8,52,6,"WebRTCModule"],[69,20,52,18],[69,21,52,19,"mediaStreamCreate"],[69,38,52,36],[69,39,52,37],[69,43,52,41],[69,44,52,42,"id"],[69,46,52,44],[69,47,52,45],[70,8,53,6],[70,13,53,11],[70,19,53,17,"track"],[70,24,53,22],[70,28,53,26,"arg"],[70,31,53,29],[70,33,53,31],[71,10,54,8],[71,14,54,12],[71,15,54,13,"addTrack"],[71,23,54,21],[71,24,54,22,"track"],[71,29,54,27],[71,30,54,28],[72,8,55,6],[73,6,56,4],[73,7,56,5],[73,13,56,11],[73,17,56,15],[73,24,56,22,"arg"],[73,27,56,25],[73,32,56,30],[73,40,56,38],[73,44,56,42,"arg"],[73,47,56,45],[73,48,56,46,"streamId"],[73,56,56,54],[73,60,56,58,"arg"],[73,63,56,61],[73,64,56,62,"streamReactTag"],[73,78,56,76],[73,82,56,80,"arg"],[73,85,56,83],[73,86,56,84,"tracks"],[73,92,56,90],[73,94,56,92],[74,8,57,6],[74,12,57,10],[74,13,57,11,"_id"],[74,16,57,14],[74,19,57,17,"arg"],[74,22,57,20],[74,23,57,21,"streamId"],[74,31,57,29],[75,8,58,6],[75,12,58,10],[75,13,58,11,"_reactTag"],[75,22,58,20],[75,25,58,23,"arg"],[75,28,58,26],[75,29,58,27,"streamReactTag"],[75,43,58,41],[76,8,59,6],[76,13,59,11],[76,19,59,17,"trackInfo"],[76,28,59,26],[76,32,59,30,"arg"],[76,35,59,33],[76,36,59,34,"tracks"],[76,42,59,40],[76,44,59,42],[77,10,60,8],[78,10,61,8],[79,10,62,8],[79,14,62,12],[79,15,62,13,"_tracks"],[79,22,62,20],[79,23,62,21,"push"],[79,27,62,25],[79,28,62,26],[79,32,62,30,"MediaStreamTrack"],[79,48,62,46],[79,49,62,46,"default"],[79,56,62,46],[79,57,62,47,"trackInfo"],[79,66,62,56],[79,67,62,57],[79,68,62,58],[80,8,63,6],[81,6,64,4],[81,7,64,5],[81,13,64,11],[82,8,65,6],[82,14,65,12],[82,18,65,16,"TypeError"],[82,27,65,25],[82,28,65,26],[82,45,65,43],[82,52,65,50,"arg"],[82,55,65,53],[82,57,65,55],[82,58,65,56],[83,6,66,4],[84,4,67,2],[85,4,68,2],[85,8,68,6,"id"],[85,10,68,8,"id"],[85,11,68,8],[85,13,68,11],[86,6,69,4],[86,13,69,11],[86,17,69,15],[86,18,69,16,"_id"],[86,21,69,19],[87,4,70,2],[88,4,71,2],[88,8,71,6,"active"],[88,14,71,12,"active"],[88,15,71,12],[88,17,71,15],[89,6,72,4],[91,6,74,4],[91,13,74,11],[91,17,74,15],[92,4,75,2],[93,4,76,2,"addTrack"],[93,12,76,10,"addTrack"],[93,13,76,11,"track"],[93,18,76,16],[93,20,76,18],[94,6,77,4],[94,12,77,10,"index"],[94,17,77,15],[94,20,77,18],[94,24,77,22],[94,25,77,23,"_tracks"],[94,32,77,30],[94,33,77,31,"indexOf"],[94,40,77,38],[94,41,77,39,"track"],[94,46,77,44],[94,47,77,45],[95,6,78,4],[95,10,78,8,"index"],[95,15,78,13],[95,20,78,18],[95,21,78,19],[95,22,78,20],[95,24,78,22],[96,8,79,6],[97,6,80,4],[98,6,81,4],[98,10,81,8],[98,11,81,9,"_tracks"],[98,18,81,16],[98,19,81,17,"push"],[98,23,81,21],[98,24,81,22,"track"],[98,29,81,27],[98,30,81,28],[99,6,82,4,"WebRTCModule"],[99,18,82,16],[99,19,82,17,"mediaStreamAddTrack"],[99,38,82,36],[99,39,82,37],[99,43,82,41],[99,44,82,42,"_reactTag"],[99,53,82,51],[99,55,82,53,"track"],[99,60,82,58],[99,61,82,59,"remote"],[99,67,82,65],[99,70,82,68,"track"],[99,75,82,73],[99,76,82,74,"_peerConnectionId"],[99,93,82,91],[99,96,82,94],[99,97,82,95],[99,98,82,96],[99,100,82,98,"track"],[99,105,82,103],[99,106,82,104,"id"],[99,108,82,106],[99,109,82,107],[100,4,83,2],[101,4,84,2,"removeTrack"],[101,15,84,13,"removeTrack"],[101,16,84,14,"track"],[101,21,84,19],[101,23,84,21],[102,6,85,4],[102,12,85,10,"index"],[102,17,85,15],[102,20,85,18],[102,24,85,22],[102,25,85,23,"_tracks"],[102,32,85,30],[102,33,85,31,"indexOf"],[102,40,85,38],[102,41,85,39,"track"],[102,46,85,44],[102,47,85,45],[103,6,86,4],[103,10,86,8,"index"],[103,15,86,13],[103,20,86,18],[103,21,86,19],[103,22,86,20],[103,24,86,22],[104,8,87,6],[105,6,88,4],[106,6,89,4],[106,10,89,8],[106,11,89,9,"_tracks"],[106,18,89,16],[106,19,89,17,"splice"],[106,25,89,23],[106,26,89,24,"index"],[106,31,89,29],[106,33,89,31],[106,34,89,32],[106,35,89,33],[107,6,90,4,"WebRTCModule"],[107,18,90,16],[107,19,90,17,"mediaStreamRemoveTrack"],[107,41,90,39],[107,42,90,40],[107,46,90,44],[107,47,90,45,"_reactTag"],[107,56,90,54],[107,58,90,56,"track"],[107,63,90,61],[107,64,90,62,"remote"],[107,70,90,68],[107,73,90,71,"track"],[107,78,90,76],[107,79,90,77,"_peerConnectionId"],[107,96,90,94],[107,99,90,97],[107,100,90,98],[107,101,90,99],[107,103,90,101,"track"],[107,108,90,106],[107,109,90,107,"id"],[107,111,90,109],[107,112,90,110],[108,4,91,2],[109,4,92,2,"getTracks"],[109,13,92,11,"getTracks"],[109,14,92,11],[109,16,92,14],[110,6,93,4],[110,13,93,11],[110,17,93,15],[110,18,93,16,"_tracks"],[110,25,93,23],[110,26,93,24,"slice"],[110,31,93,29],[110,32,93,30],[110,33,93,31],[111,4,94,2],[112,4,95,2,"getTrackById"],[112,16,95,14,"getTrackById"],[112,17,95,15,"trackId"],[112,24,95,22],[112,26,95,24],[113,6,96,4],[113,13,96,11],[113,17,96,15],[113,18,96,16,"_tracks"],[113,25,96,23],[113,26,96,24,"find"],[113,30,96,28],[113,31,96,29,"track"],[113,36,96,34],[113,40,96,38,"track"],[113,45,96,43],[113,46,96,44,"id"],[113,48,96,46],[113,53,96,51,"trackId"],[113,60,96,58],[113,61,96,59],[114,4,97,2],[115,4,98,2,"getAudioTracks"],[115,18,98,16,"getAudioTracks"],[115,19,98,16],[115,21,98,19],[116,6,99,4],[116,13,99,11],[116,17,99,15],[116,18,99,16,"_tracks"],[116,25,99,23],[116,26,99,24,"filter"],[116,32,99,30],[116,33,99,31,"track"],[116,38,99,36],[116,42,99,40,"track"],[116,47,99,45],[116,48,99,46,"kind"],[116,52,99,50],[116,57,99,55],[116,64,99,62],[116,65,99,63],[117,4,100,2],[118,4,101,2,"getVideoTracks"],[118,18,101,16,"getVideoTracks"],[118,19,101,16],[118,21,101,19],[119,6,102,4],[119,13,102,11],[119,17,102,15],[119,18,102,16,"_tracks"],[119,25,102,23],[119,26,102,24,"filter"],[119,32,102,30],[119,33,102,31,"track"],[119,38,102,36],[119,42,102,40,"track"],[119,47,102,45],[119,48,102,46,"kind"],[119,52,102,50],[119,57,102,55],[119,64,102,62],[119,65,102,63],[120,4,103,2],[121,4,104,2,"clone"],[121,9,104,7,"clone"],[121,10,104,7],[121,12,104,10],[122,6,105,4],[122,12,105,10],[122,16,105,14,"Error"],[122,21,105,19],[122,22,105,20],[122,40,105,38],[122,41,105,39],[123,4,106,2],[124,4,107,2,"toURL"],[124,9,107,7,"toURL"],[124,10,107,7],[124,12,107,10],[125,6,108,4],[125,13,108,11],[125,17,108,15],[125,18,108,16,"_reactTag"],[125,27,108,25],[126,4,109,2],[127,4,110,2,"release"],[127,11,110,9,"release"],[127,12,110,10,"releaseTracks"],[127,25,110,23],[127,28,110,26],[127,32,110,30],[127,34,110,32],[128,6,111,4],[128,12,111,10,"tracks"],[128,18,111,16],[128,21,111,19],[128,22,111,20],[128,25,111,23],[128,29,111,27],[128,30,111,28,"_tracks"],[128,37,111,35],[128,38,111,36],[129,6,112,4],[129,11,112,9],[129,17,112,15,"track"],[129,22,112,20],[129,26,112,24,"tracks"],[129,32,112,30],[129,34,112,32],[130,8,113,6],[130,12,113,10],[130,13,113,11,"removeTrack"],[130,24,113,22],[130,25,113,23,"track"],[130,30,113,28],[130,31,113,29],[131,8,114,6],[131,12,114,10,"releaseTracks"],[131,25,114,23],[131,27,114,25],[132,10,115,8,"track"],[132,15,115,13],[132,16,115,14,"release"],[132,23,115,21],[132,24,115,22],[132,25,115,23],[133,8,116,6],[134,6,117,4],[135,6,118,4,"WebRTCModule"],[135,18,118,16],[135,19,118,17,"mediaStreamRelease"],[135,37,118,35],[135,38,118,36],[135,42,118,40],[135,43,118,41,"_reactTag"],[135,52,118,50],[135,53,118,51],[136,4,119,2],[137,2,120,0],[139,2,122,0],[140,0,123,0],[141,0,124,0],[142,2,125,0],[142,8,125,6,"proto"],[142,13,125,11],[142,16,125,14,"MediaStream"],[142,27,125,25],[142,28,125,26,"prototype"],[142,37,125,35],[143,2,126,0],[143,6,126,0,"defineEventAttribute"],[143,22,126,20],[143,23,126,20,"defineEventAttribute"],[143,43,126,20],[143,45,126,21,"proto"],[143,50,126,26],[143,52,126,28],[143,62,126,38],[143,63,126,39],[144,2,127,0],[144,6,127,0,"defineEventAttribute"],[144,22,127,20],[144,23,127,20,"defineEventAttribute"],[144,43,127,20],[144,45,127,21,"proto"],[144,50,127,26],[144,52,127,28],[144,65,127,41],[144,66,127,42],[145,0,127,43],[145,3]],"functionMap":{"names":["<global>","MediaStream","constructor","get__id","get__active","addTrack","removeTrack","getTracks","getTrackById","_tracks.find$argument_0","getAudioTracks","_tracks.filter$argument_0","getVideoTracks","clone","toURL","release"],"mappings":"AAA;eCS;ECuB;GDkC;EEC;GFE;EGC;GHI;EIC;GJO;EKC;GLO;EMC;GNE;EOC;6BCC,6BD;GPC;ESC;+BCC,+BD;GTC;EWC;+BDC,+BC;GXC;EYC;GZE;EaC;GbE;EcC;GdS;CDC"},"hasCjsExports":false},"type":"js/module"}]}