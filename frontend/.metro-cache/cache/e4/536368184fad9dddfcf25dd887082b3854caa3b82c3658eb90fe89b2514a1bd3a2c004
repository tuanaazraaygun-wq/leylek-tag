{"dependencies":[{"name":"../transport.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":44,"index":44}}],"key":"q68AWRvh2qc0QUlp41HSOL9aMUA=","exportNames":["*"],"imports":1}},{"name":"../util.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":45},"end":{"line":2,"column":48,"index":93}}],"key":"kanFP5HUYYYoVhDf3d7saim1ZXY=","exportNames":["*"],"imports":1}},{"name":"engine.io-parser","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":94},"end":{"line":3,"column":48,"index":142}}],"key":"IB5HY76c7xC+tDEPCV8b/nK76DU=","exportNames":["*"],"imports":1}},{"name":"../globals.node.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":143},"end":{"line":4,"column":76,"index":219}}],"key":"RPWURBgga4vfm2ZRigByneogh6w=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,_i,a,m,_e,d){\"use strict\";Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"BaseWS\",{enumerable:!0,get:function(){return n}}),Object.defineProperty(_e,\"WS\",{enumerable:!0,get:function(){return h}});var e=r(d[0]),t=r(d[1]),s=r(d[2]),i=r(d[3]);const o=\"undefined\"!=typeof navigator&&\"string\"==typeof navigator.product&&\"reactnative\"===navigator.product.toLowerCase();class n extends e.Transport{get name(){return\"websocket\"}doOpen(){const e=this.uri(),s=this.opts.protocols,i=o?{}:(0,t.pick)(this.opts,\"agent\",\"perMessageDeflate\",\"pfx\",\"key\",\"passphrase\",\"cert\",\"ca\",\"ciphers\",\"rejectUnauthorized\",\"localAddress\",\"protocolVersion\",\"origin\",\"maxPayload\",\"family\",\"checkServerIdentity\");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,s,i)}catch(e){return this.emitReserved(\"error\",e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:\"websocket connection closed\",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError(\"websocket error\",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const o=e[t],n=t===e.length-1;(0,s.encodePacket)(o,this.supportsBinary,e=>{try{this.doWrite(o,e)}catch(e){}n&&(0,i.nextTick)(()=>{this.writable=!0,this.emitReserved(\"drain\")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?\"wss\":\"ws\",s=this.query||{};return this.opts.timestampRequests&&(s[this.opts.timestampParam]=(0,t.randomString)()),this.supportsBinary||(s.b64=1),this.createUri(e,s)}}const c=i.globalThisShim.WebSocket||i.globalThisShim.MozWebSocket;class h extends n{createSocket(e,t,s){return o?new c(e,t,s):t?new c(e,t):new c(e)}doWrite(e,t){this.ws.send(t)}}});","lineCount":1,"map":[[1,93,9,0,"Object"],[1,100,9,0,"defineProperty"],[1,115,9,0,"_e"],[1,118,9,0],[1,128,9,0,"enumerable"],[1,140,9,0],[1,142,9,0,"get"],[1,146,9,0],[1,164,9,0,"BaseWS"],[1,165,9,0],[1,169,114,0,"Object"],[1,176,114,0,"defineProperty"],[1,191,114,0,"_e"],[1,194,114,0],[1,200,114,0,"enumerable"],[1,212,114,0],[1,214,114,0,"get"],[1,218,114,0],[1,236,114,0,"WS"],[1,237,114,0],[1,241,1,0],[1,245,1,0,"_transportJs"],[1,247,1,0,"r"],[1,249,1,0,"d"],[1,251,1,0],[1,255,2,0,"_utilJs"],[1,257,2,0,"r"],[1,259,2,0,"d"],[1,261,2,0],[1,265,3,0,"_engineIoParser"],[1,267,3,0,"r"],[1,269,3,0,"d"],[1,271,3,0],[1,275,4,0,"_globalsNodeJs"],[1,277,4,0,"r"],[1,279,4,0,"d"],[1,281,4,0],[1,285,6,0],[1,291,6,6,"isReactNative"],[1,293,6,43],[1,313,6,29,"navigator"],[1,324,7,33],[1,341,7,11,"navigator"],[1,351,7,21,"product"],[1,360,8,40],[1,376,8,4,"navigator"],[1,386,8,14,"product"],[1,394,8,22,"toLowerCase"],[1,408,9,7],[1,414,9,13,"BaseWS"],[1,424,9,28,"Transport"],[1,426,9,37,"Transport"],[1,436,10,4],[1,444,10,8,"name"],[1,447,11,8],[1,453,11,15],[1,464,12,4],[1,465,13,4,"doOpen"],[1,474,14,8],[1,480,14,14,"uri"],[1,482,14,20,"this"],[1,487,14,25,"uri"],[1,493,15,14,"protocols"],[1,495,15,26,"this"],[1,500,15,31,"opts"],[1,505,15,36,"protocols"],[1,515,17,14,"opts"],[1,517,17,21,"isReactNative"],[1,519,18,14],[1,520,18,15],[1,523,19,14],[1,525,19,14,"pick"],[1,527,19,18,"pick"],[1,533,19,19,"this"],[1,538,19,24,"opts"],[1,543,19,30],[1,551,19,39],[1,571,19,60],[1,577,19,67],[1,583,19,74],[1,596,19,88],[1,603,19,96],[1,608,19,102],[1,618,19,113],[1,639,19,135],[1,654,19,151],[1,672,19,170],[1,681,19,180],[1,694,19,194],[1,703,19,204],[1,726,20,12,"this"],[1,731,20,17,"opts"],[1,736,20,22,"extraHeaders"],[1,751,21,12,"opts"],[1,753,21,17,"headers"],[1,761,21,27,"this"],[1,766,21,32,"opts"],[1,771,21,37,"extraHeaders"],[1,785,23,8],[1,789,24,12,"this"],[1,794,24,17,"ws"],[1,797,24,22,"this"],[1,802,24,27,"createSocket"],[1,815,24,40,"uri"],[1,817,24,45,"protocols"],[1,819,24,56,"opts"],[1,821,25,8],[1,822,26,8],[1,828,26,15,"err"],[1,831,27,12],[1,838,27,19,"this"],[1,843,27,24,"emitReserved"],[1,856,27,37],[1,864,27,46,"err"],[1,866,28,8],[1,867,29,8,"this"],[1,872,29,13,"ws"],[1,875,29,16,"binaryType"],[1,886,29,29,"this"],[1,891,29,34,"socket"],[1,898,29,41,"binaryType"],[1,909,30,8,"this"],[1,914,30,13,"addEventListeners"],[1,933,31,4],[1,934,37,4,"addEventListeners"],[1,954,38,8,"this"],[1,959,38,13,"ws"],[1,962,38,16,"onopen"],[1,969,38,25],[1,974,39,16,"this"],[1,979,39,21,"opts"],[1,984,39,26,"autoUnref"],[1,995,40,16,"this"],[1,1000,40,21,"ws"],[1,1003,40,24,"_socket"],[1,1011,40,32,"unref"],[1,1019,42,12,"this"],[1,1024,42,17,"onOpen"],[1,1034,44,8,"this"],[1,1039,44,13,"ws"],[1,1042,44,16,"onclose"],[1,1050,44,27,"closeEvent"],[1,1053,44,42,"this"],[1,1058,44,47,"onClose"],[1,1066,44,55],[1,1067,45,12,"description"],[1,1079,45,25],[1,1109,46,12,"context"],[1,1117,46,21,"closeEvent"],[1,1121,48,8,"this"],[1,1126,48,13,"ws"],[1,1129,48,16,"onmessage"],[1,1139,48,29,"ev"],[1,1142,48,36,"this"],[1,1147,48,41,"onData"],[1,1154,48,48,"ev"],[1,1156,48,51,"data"],[1,1162,49,8,"this"],[1,1167,49,13,"ws"],[1,1170,49,16,"onerror"],[1,1178,49,27,"e"],[1,1181,49,33,"this"],[1,1186,49,38,"onError"],[1,1194,49,46],[1,1212,49,65,"e"],[1,1214,50,4],[1,1215,51,4,"write"],[1,1221,51,10,"packets"],[1,1224,52,8,"this"],[1,1229,52,13,"writable"],[1,1239,52,24],[1,1241,55,8],[1,1245,55,13],[1,1249,55,17,"i"],[1,1251,55,21],[1,1253,55,24,"i"],[1,1255,55,28,"packets"],[1,1257,55,36,"length"],[1,1264,55,44,"i"],[1,1268,55,49],[1,1269,56,12],[1,1275,56,18,"packet"],[1,1277,56,27,"packets"],[1,1279,56,35,"i"],[1,1282,57,18,"lastPacket"],[1,1284,57,31,"i"],[1,1288,57,37,"packets"],[1,1290,57,45,"length"],[1,1297,57,54],[1,1300,58,12],[1,1302,58,12,"encodePacket"],[1,1304,58,24,"encodePacket"],[1,1318,58,25,"packet"],[1,1320,58,33,"this"],[1,1325,58,38,"supportsBinary"],[1,1340,58,55,"data"],[1,1344,62,16],[1,1348,63,20,"this"],[1,1353,63,25,"doWrite"],[1,1361,63,33,"packet"],[1,1363,63,41,"data"],[1,1365,64,16],[1,1366,65,16],[1,1372,65,23,"e"],[1,1375,66,16],[1,1376,67,20,"lastPacket"],[1,1380,70,20],[1,1382,70,20,"nextTick"],[1,1384,70,28,"nextTick"],[1,1394,70,29],[1,1399,71,24,"this"],[1,1404,71,29,"writable"],[1,1414,71,40],[1,1416,72,24,"this"],[1,1421,72,29,"emitReserved"],[1,1434,72,42],[1,1444,73,23,"this"],[1,1449,73,28,"setTimeoutFn"],[1,1464,76,8],[1,1465,77,4],[1,1466,78,4,"doClose"],[1,1481,79,31],[1,1485,79,19,"this"],[1,1490,79,24,"ws"],[1,1495,80,12,"this"],[1,1500,80,17,"ws"],[1,1503,80,20,"onerror"],[1,1511,80,30],[1,1518,81,12,"this"],[1,1523,81,17,"ws"],[1,1526,81,20,"close"],[1,1534,82,12,"this"],[1,1539,82,17,"ws"],[1,1542,82,22],[1,1547,84,4],[1,1548,90,4,"uri"],[1,1554,91,8],[1,1560,91,14,"schema"],[1,1562,91,23,"this"],[1,1567,91,28,"opts"],[1,1572,91,33,"secure"],[1,1579,91,42],[1,1585,91,50],[1,1590,92,14,"query"],[1,1592,92,22,"this"],[1,1597,92,27,"query"],[1,1604,92,36],[1,1605,92,37],[1,1607,101,8],[1,1614,94,12,"this"],[1,1619,94,17,"opts"],[1,1624,94,22,"timestampRequests"],[1,1644,95,12,"query"],[1,1646,95,18,"this"],[1,1651,95,23,"opts"],[1,1656,95,28,"timestampParam"],[1,1673,95,46],[1,1675,95,46,"randomString"],[1,1677,95,58,"randomString"],[1,1694,98,13,"this"],[1,1699,98,18,"supportsBinary"],[1,1716,99,12,"query"],[1,1718,99,18,"b64"],[1,1722,99,24],[1,1725,101,15,"this"],[1,1730,101,20,"createUri"],[1,1740,101,30,"schema"],[1,1742,101,38,"query"],[1,1744,102,4],[1,1746,104,0],[1,1752,104,6,"WebSocketCtor"],[1,1754,104,22,"globalThis"],[1,1756,104,32,"globalThisShim"],[1,1771,104,33,"WebSocket"],[1,1782,104,46,"globalThis"],[1,1784,104,56,"globalThisShim"],[1,1799,104,57,"MozWebSocket"],[1,1812,114,7],[1,1818,114,13,"WS"],[1,1828,114,24,"BaseWS"],[1,1830,115,4,"createSocket"],[1,1843,115,17,"uri"],[1,1845,115,22,"protocols"],[1,1847,115,33,"opts"],[1,1850,116,8],[1,1857,116,16,"isReactNative"],[1,1859,120,14],[1,1863,120,18,"WebSocketCtor"],[1,1865,120,32,"uri"],[1,1867,120,37,"protocols"],[1,1869,120,48,"opts"],[1,1872,117,14,"protocols"],[1,1874,118,18],[1,1878,118,22,"WebSocketCtor"],[1,1880,118,36,"uri"],[1,1882,118,41,"protocols"],[1,1885,119,18],[1,1889,119,22,"WebSocketCtor"],[1,1891,119,36,"uri"],[1,1893,121,4],[1,1894,122,4,"doWrite"],[1,1902,122,12,"_packet"],[1,1904,122,21,"data"],[1,1907,123,8,"this"],[1,1912,123,13,"ws"],[1,1915,123,16,"send"],[1,1920,123,21,"data"],[1,1922,124,4],[1,1924,125,1],[1,1927]],"functionMap":{"names":["<global>","BaseWS","BaseWS#get__name","BaseWS#doOpen","BaseWS#addEventListeners","ws.onopen","ws.onclose","ws.onmessage","ws.onerror","BaseWS#write","encodePacket$argument_2","nextTick$argument_0","BaseWS#doClose","BaseWS#uri","WS","WS#createSocket","WS#doWrite"],"mappings":"AAA;OCQ;ICC;KDE;IEC;KFkB;IGM;yBCC;SDK;0BEC;UFG;4BGC,4BH;0BIC,yCJ;KHC;IQC;sDCO;6BCY;qBDG;aDE;KRE;IWC;8BJE,SI;KXI;IYM;KZY;CDC;OcW;ICC;KDM;IEC;KFE;CdC"},"hasCjsExports":false},"type":"js/module"}]}