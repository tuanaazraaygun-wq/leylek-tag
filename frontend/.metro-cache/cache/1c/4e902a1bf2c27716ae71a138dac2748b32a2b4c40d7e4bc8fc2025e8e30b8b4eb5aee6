{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":215},"end":{"line":11,"column":65,"index":280}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Alert","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"PEUC6jrQVoAGZ2qYkvimljMOyJI=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":13,"column":0,"index":319},"end":{"line":13,"column":39,"index":358}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){\"use strict\";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"default\",{enumerable:!0,get:function(){return c}}),_e.useOffers=s;var t=r(d[0]),f=e(r(d[1])),o=e(r(d[2]));const n=`${o.default.expoConfig?.extra?.backendUrl||\"https://taxiapp-cards.preview.emergentagent.com\"}/api`;function s(e){const{userId:o,tagId:s,requestId:c,isDriver:u=!1,enabled:l=!0,socket:_,onNewOffer:p,onOfferAccepted:O,onOfferRejected:v}=e,[h,k]=(0,t.useState)([]),[S,b]=(0,t.useState)(!1),[w,y]=(0,t.useState)(null),C=(0,t.useRef)(!0),E=(0,t.useRef)(new Set),q=(0,t.useRef)(null);(0,t.useEffect)(()=>{if(C.current=!0,!l||!_)return;c&&c!==q.current&&(console.log('\\ud83d\\udd04 [useOffers] Request ID changed, clearing offers'),q.current=c,k([]),E.current.clear());const e=e=>{if(!C.current)return;const t=e.offer_id||e.id,f=e.request_id;if(E.current.has(t))return void console.log('\\u26a0\\ufe0f [useOffers] Duplicate offer ignored:',t);if(f&&q.current&&f!==q.current)return void console.log('\\u26a0\\ufe0f [useOffers] Wrong request_id, ignoring offer:',f,'vs',q.current);console.log('\\u2705 [useOffers] Request ID check passed:',f||'none','/',q.current||'none'),E.current.add(t);const o={id:t,offer_id:t,request_id:f,tag_id:e.tag_id||s||'',driver_id:e.driver_id,driver_name:e.driver_name||'\\u015eof\\xf6r',driver_rating:e.driver_rating||5,driver_photo:e.driver_photo,price:e.price,notes:e.notes,status:e.status||'pending',vehicle_model:e.vehicle_model,vehicle_color:e.vehicle_color,distance_km:e.distance_km,estimated_arrival_min:e.estimated_arrival_min,created_at:e.created_at||(new Date).toISOString(),_optimistic:!1};console.log('\\ud83d\\udce5 [useOffers] NEW OFFER received:',o.price,'TL from',o.driver_name),k(e=>e.some(e=>e.id===t||e.offer_id===t)?e:[o,...e]),p?.(o)},t=e=>{C.current&&(console.log('\\u2705 [useOffers] OFFER ACCEPTED:',e),k(t=>t.map(t=>t.id===e.offer_id||t.offer_id===e.offer_id?{...t,status:'accepted'}:t)),O?.(e))},f=e=>{C.current&&(console.log('\\u274c [useOffers] OFFER REJECTED:',e),k(t=>t.filter(t=>t.id!==e.offer_id&&t.offer_id!==e.offer_id)),v?.(e))},o=e=>{C.current&&(console.log('\\u2705 [useOffers] Offer sent acknowledged:',e),b(!1),e.offer_id&&k(t=>t.map(t=>t._optimistic?{...t,id:e.offer_id,offer_id:e.offer_id,_optimistic:!1}:t)))},n=e=>{C.current&&(e.request_id!==c&&e.tag_id!==s||(console.log('\\ud83d\\udeab [useOffers] TAG CANCELLED, clearing offers'),k([]),E.current.clear()))};return _.on('new_offer',e),_.on('offer_accepted',t),_.on('offer_rejected',f),_.on('offer_sent_ack',o),_.on('tag_cancelled',n),console.log('\\ud83d\\udce1 [useOffers] Socket listeners registered'),()=>{C.current=!1,_.off('new_offer',e),_.off('offer_accepted',t),_.off('offer_rejected',f),_.off('offer_sent_ack',o),_.off('tag_cancelled',n),console.log('\\ud83e\\uddf9 [useOffers] Socket listeners removed')}},[l,_,c,s,p,O,v]);const T=(0,t.useCallback)(async(e,t,s,c,u)=>{if(!o||!_)return!1;const l=`optimistic_${Date.now()}`,p={id:l,request_id:s,tag_id:e,driver_id:o,driver_name:u||'Sen',driver_rating:5,price:t,status:'pending',notes:'G\\xf6nderiliyor...',created_at:(new Date).toISOString(),_optimistic:!0};k(e=>[p,...e]),b(!0);try{const p=new AbortController,O=setTimeout(()=>p.abort(),1e4),v=await fetch(`${n}/driver/send-offer?user_id=${o}`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({tag_id:e,request_id:s,price:t,latitude:c?.latitude||0,longitude:c?.longitude||0}),signal:p.signal});if(clearTimeout(O),!C.current)return!0;const h=await v.json();return h.success||h.offer_id?(_.emit('send_offer',{request_id:s,tag_id:e,offer_id:h.offer_id,driver_id:o,driver_name:u,price:t,notes:''}),k(e=>e.map(e=>e.id===l?{...e,id:h.offer_id,offer_id:h.offer_id,notes:'',_optimistic:!1}:e)),console.log('\\u2705 [useOffers] Offer sent:',h.offer_id),b(!1),!0):(k(e=>e.filter(e=>e.id!==l)),b(!1),f.default.alert('Hata',h.detail||'Teklif g\\xf6nderilemedi'),!1)}catch(e){return!!C.current&&(b(!1),k(e=>e.filter(e=>e.id!==l)),'AbortError'===e.name?f.default.alert('Zaman A\\u015f\\u0131m\\u0131','Sunucu yan\\u0131t vermedi'):f.default.alert('Hata','Ba\\u011flant\\u0131 hatas\\u0131'),!1)}},[o,_]),j=(0,t.useCallback)(async(e,t)=>{if(!o||!_)return!1;k(t=>t.map(t=>t.id===e||t.offer_id===e?{...t,status:'accepting'}:t));try{const u=await fetch(`${n}/passenger/accept-offer?user_id=${o}&offer_id=${e}`,{method:'POST'});if(!C.current)return!0;const l=await u.json();return l.success?(_.emit('accept_offer',{request_id:c,offer_id:e,driver_id:t,tag_id:s,passenger_id:o}),k(t=>t.filter(t=>t.id===e||t.offer_id===e)),!0):(k(t=>t.map(t=>t.id===e||t.offer_id===e?{...t,status:'pending'}:t)),f.default.alert('Hata',l.detail||'Teklif kabul edilemedi'),!1)}catch(t){return!!C.current&&(k(t=>t.map(t=>t.id===e||t.offer_id===e?{...t,status:'pending'}:t)),f.default.alert('Hata','Ba\\u011flant\\u0131 hatas\\u0131'),!1)}},[o,_,c,s]),D=(0,t.useCallback)(async(e,t)=>{if(!o||!_)return!1;const f=h.find(t=>t.id===e||t.offer_id===e);k(t=>t.filter(t=>t.id!==e&&t.offer_id!==e));try{return await fetch(`${n}/passenger/dismiss-offer?user_id=${o}&offer_id=${e}`,{method:'POST'}),_.emit('reject_offer',{request_id:c,offer_id:e,driver_id:t}),!0}catch{return f&&C.current&&k(e=>[f,...e]),!1}},[o,_,c,h]),R=(0,t.useCallback)(()=>{k([]),E.current.clear(),console.log('\\ud83e\\uddf9 [useOffers] Offers cleared')},[]),$=(0,t.useCallback)(e=>{const t=e.id||e.offer_id;t&&!E.current.has(t)&&(E.current.add(t),k(t=>[e,...t]))},[]);return{offers:h.filter(e=>'pending'===e.status||'accepting'===e.status||'accepted'===e.status),isLoading:S,error:w,sendOffer:T,acceptOffer:j,rejectOffer:D,clearOffers:R,addOffer:$}}var c=s});","lineCount":1,"map":[[1,143,458,0,"Object"],[1,150,458,0,"defineProperty"],[1,165,458,0,"_e"],[1,168,458,0],[1,179,458,0,"enumerable"],[1,191,458,0],[1,193,458,0,"get"],[1,197,458,0],[1,215,458,0,"_default"],[1,216,458,0],[1,220,70,0,"_e"],[1,223,70,0,"useOffers"],[1,235,11,0],[1,239,11,0,"_react"],[1,241,11,0,"r"],[1,243,11,0,"d"],[1,245,11,0],[1,249,11,65,"Alert"],[1,251,11,65,"_interopDefault"],[1,253,11,65,"r"],[1,255,11,65,"d"],[1,257,11,65],[1,262,13,0,"Constants"],[1,264,13,0,"_interopDefault"],[1,266,13,0,"r"],[1,268,13,0,"d"],[1,270,13,0],[1,275,15,0],[1,281,18,6,"API_URL"],[1,283,18,16],[1,286,15,20,"Constants"],[1,288,15,29,"default"],[1,296,15,30,"expoConfig"],[1,308,15,42,"extra"],[1,315,15,49,"backendUrl"],[1,327,15,59],[1,383,70,7],[1,392,70,16,"useOffers"],[1,394,70,26,"options"],[1,397,71,2],[1,403,71,8,"userId"],[1,410,72,4,"userId"],[1,412,72,10,"tagId"],[1,418,73,4,"tagId"],[1,420,73,9,"requestId"],[1,430,74,4,"requestId"],[1,432,74,13,"isDriver"],[1,441,75,4,"isDriver"],[1,444,75,15],[1,446,75,20,"enabled"],[1,454,76,4,"enabled"],[1,457,76,14],[1,459,76,18,"socket"],[1,466,77,4,"socket"],[1,468,77,10,"onNewOffer"],[1,479,78,4,"onNewOffer"],[1,481,78,14,"onOfferAccepted"],[1,497,79,4,"onOfferAccepted"],[1,499,79,19,"onOfferRejected"],[1,515,80,4,"onOfferRejected"],[1,518,81,6,"options"],[1,521,83,9,"offers"],[1,523,83,17,"setOffers"],[1,527,83,30],[1,529,83,30,"useState"],[1,531,83,38,"useState"],[1,541,83,48],[1,546,84,9,"isLoading"],[1,548,84,20,"setIsLoading"],[1,552,84,36],[1,554,84,36,"useState"],[1,556,84,44,"useState"],[1,567,84,45],[1,571,85,9,"error"],[1,573,85,16,"setError"],[1,577,85,28],[1,579,85,28,"useState"],[1,581,85,36,"useState"],[1,591,85,52],[1,597,87,8,"isMountedRef"],[1,600,87,23],[1,602,87,23,"useRef"],[1,604,87,29,"useRef"],[1,613,87,30],[1,616,88,8,"seenOfferIdsRef"],[1,619,88,26],[1,621,88,26,"useRef"],[1,623,88,32,"useRef"],[1,631,88,46],[1,635,88,50,"Set"],[1,640,89,8,"currentRequestIdRef"],[1,643,89,30],[1,645,89,30,"useRef"],[1,647,89,36,"useRef"],[1,655,89,52],[1,662,93,2],[1,664,93,2,"useEffect"],[1,666,93,11,"useEffect"],[1,677,93,12],[1,682,96,4],[1,685,94,4,"isMountedRef"],[1,687,94,17,"current"],[1,696,94,27],[1,699,96,9,"enabled"],[1,703,96,21,"socket"],[1,705,97,6],[1,712,101,8,"requestId"],[1,715,101,21,"requestId"],[1,719,101,35,"currentRequestIdRef"],[1,721,101,55,"current"],[1,731,102,6,"console"],[1,739,102,14,"log"],[1,743,102,18],[1,807,103,6,"currentRequestIdRef"],[1,809,103,26,"current"],[1,817,103,36,"requestId"],[1,819,104,6,"setOffers"],[1,821,104,16],[1,825,105,6,"seenOfferIdsRef"],[1,827,105,22,"current"],[1,835,105,30,"clear"],[1,844,109,4],[1,850,109,10,"handleNewOffer"],[1,852,109,28,"data"],[1,856,110,6],[1,860,110,11,"isMountedRef"],[1,862,110,24,"current"],[1,870,110,33],[1,877,112,6],[1,883,112,12,"offerId"],[1,885,112,22,"data"],[1,887,112,27,"offer_id"],[1,897,112,39,"data"],[1,899,112,44,"id"],[1,902,113,12,"incomingRequestId"],[1,904,113,32,"data"],[1,906,113,37,"request_id"],[1,917,116,6],[1,920,116,10,"seenOfferIdsRef"],[1,922,116,26,"current"],[1,930,116,34,"has"],[1,934,116,38,"offerId"],[1,937,118,8],[1,949,117,8,"console"],[1,957,117,16,"log"],[1,961,117,20],[1,1013,117,63,"offerId"],[1,1016,123,6],[1,1019,123,10,"incomingRequestId"],[1,1022,123,31,"currentRequestIdRef"],[1,1024,123,51,"current"],[1,1033,123,62,"incomingRequestId"],[1,1037,123,84,"currentRequestIdRef"],[1,1039,123,104,"current"],[1,1047,125,8],[1,1059,124,8,"console"],[1,1067,124,16,"log"],[1,1071,124,20],[1,1132,124,72,"incomingRequestId"],[1,1134,124,91],[1,1139,124,97,"currentRequestIdRef"],[1,1141,124,117,"current"],[1,1150,129,6,"console"],[1,1158,129,14,"log"],[1,1162,129,18],[1,1208,129,60,"incomingRequestId"],[1,1211,129,81],[1,1218,129,89],[1,1222,129,94,"currentRequestIdRef"],[1,1224,129,114,"current"],[1,1233,129,125],[1,1241,131,6,"seenOfferIdsRef"],[1,1243,131,22,"current"],[1,1251,131,30,"add"],[1,1255,131,34,"offerId"],[1,1258,133,6],[1,1264,133,12,"newOffer"],[1,1266,133,30],[1,1267,134,8,"id"],[1,1270,134,12,"offerId"],[1,1272,135,8,"offer_id"],[1,1281,135,18,"offerId"],[1,1283,136,8,"request_id"],[1,1294,136,20,"incomingRequestId"],[1,1296,137,8,"tag_id"],[1,1303,137,16,"data"],[1,1305,137,21,"tag_id"],[1,1313,137,31,"tagId"],[1,1316,137,40],[1,1319,138,8,"driver_id"],[1,1329,138,19,"data"],[1,1331,138,24,"driver_id"],[1,1341,139,8,"driver_name"],[1,1353,139,21,"data"],[1,1355,139,26,"driver_name"],[1,1368,139,41],[1,1384,140,8,"driver_rating"],[1,1398,140,23,"data"],[1,1400,140,28,"driver_rating"],[1,1415,140,45],[1,1417,141,8,"driver_photo"],[1,1430,141,22,"data"],[1,1432,141,27,"driver_photo"],[1,1445,142,8,"price"],[1,1451,142,15,"data"],[1,1453,142,20,"price"],[1,1459,143,8,"notes"],[1,1465,143,15,"data"],[1,1467,143,20,"notes"],[1,1473,144,8,"status"],[1,1480,144,16,"data"],[1,1482,144,21,"status"],[1,1490,144,31],[1,1500,145,8,"vehicle_model"],[1,1514,145,23,"data"],[1,1516,145,28,"vehicle_model"],[1,1530,146,8,"vehicle_color"],[1,1544,146,23,"data"],[1,1546,146,28,"vehicle_color"],[1,1560,147,8,"distance_km"],[1,1572,147,21,"data"],[1,1574,147,26,"distance_km"],[1,1586,148,8,"estimated_arrival_min"],[1,1608,148,31,"data"],[1,1610,148,36,"estimated_arrival_min"],[1,1632,149,8,"created_at"],[1,1643,149,20,"data"],[1,1645,149,25,"created_at"],[1,1658,149,39],[1,1662,149,43,"Date"],[1,1668,149,50,"toISOString"],[1,1682,150,8,"_optimistic"],[1,1695,150,21],[1,1698,153,6,"console"],[1,1706,153,14,"log"],[1,1710,153,18],[1,1757,153,56,"newOffer"],[1,1759,153,65,"price"],[1,1765,153,72],[1,1775,153,83,"newOffer"],[1,1777,153,92,"driver_name"],[1,1790,155,6,"setOffers"],[1,1792,155,16,"prev"],[1,1795,157,12,"prev"],[1,1797,157,17,"some"],[1,1802,157,22,"o"],[1,1805,157,27,"o"],[1,1807,157,29,"id"],[1,1812,157,36,"offerId"],[1,1815,157,47,"o"],[1,1817,157,49,"offer_id"],[1,1828,157,62,"offerId"],[1,1831,158,17,"prev"],[1,1833,160,15],[1,1834,160,16,"newOffer"],[1,1839,160,29,"prev"],[1,1843,163,6,"onNewOffer"],[1,1847,163,19,"newOffer"],[1,1851,167,10,"handleOfferAccepted"],[1,1853,167,33,"data"],[1,1857,168,11,"isMountedRef"],[1,1859,168,24,"current"],[1,1869,169,6,"console"],[1,1877,169,14,"log"],[1,1881,169,18],[1,1918,169,51,"data"],[1,1921,171,6,"setOffers"],[1,1923,171,16,"prev"],[1,1926,171,24,"prev"],[1,1928,171,29,"map"],[1,1932,171,33,"o"],[1,1935,172,9,"o"],[1,1937,172,11,"id"],[1,1942,172,18,"data"],[1,1944,172,23,"offer_id"],[1,1954,172,35,"o"],[1,1956,172,37,"offer_id"],[1,1967,172,50,"data"],[1,1969,172,55,"offer_id"],[1,1978,173,12],[1,1982,173,17,"o"],[1,1984,173,20,"status"],[1,1991,173,28],[1,2003,174,12,"o"],[1,2007,177,6,"onOfferAccepted"],[1,2011,177,24,"data"],[1,2016,181,10,"handleOfferRejected"],[1,2018,181,33,"data"],[1,2022,182,11,"isMountedRef"],[1,2024,182,24,"current"],[1,2034,183,6,"console"],[1,2042,183,14,"log"],[1,2046,183,18],[1,2083,183,51,"data"],[1,2086,185,6,"setOffers"],[1,2088,185,16,"prev"],[1,2091,185,24,"prev"],[1,2093,185,29,"filter"],[1,2100,185,36,"o"],[1,2103,186,8,"o"],[1,2105,186,10,"id"],[1,2110,186,17,"data"],[1,2112,186,22,"offer_id"],[1,2122,186,34,"o"],[1,2124,186,36,"offer_id"],[1,2135,186,49,"data"],[1,2137,186,54,"offer_id"],[1,2148,189,6,"onOfferRejected"],[1,2152,189,24,"data"],[1,2157,193,10,"handleOfferSentAck"],[1,2159,193,32,"data"],[1,2163,194,11,"isMountedRef"],[1,2165,194,24,"current"],[1,2175,195,6,"console"],[1,2183,195,14,"log"],[1,2187,195,18],[1,2233,195,60,"data"],[1,2236,196,6,"setIsLoading"],[1,2239,196,19],[1,2242,199,10,"data"],[1,2244,199,15,"offer_id"],[1,2254,200,8,"setOffers"],[1,2256,200,18,"prev"],[1,2259,200,26,"prev"],[1,2261,200,31,"map"],[1,2265,200,35,"o"],[1,2268,201,10,"o"],[1,2270,201,12,"_optimistic"],[1,2282,202,14],[1,2286,202,19,"o"],[1,2288,202,22,"id"],[1,2291,202,26,"data"],[1,2293,202,31,"offer_id"],[1,2302,202,41,"offer_id"],[1,2311,202,51,"data"],[1,2313,202,56,"offer_id"],[1,2322,202,66,"_optimistic"],[1,2335,202,79],[1,2338,203,14,"o"],[1,2344,209,10,"handleTagCancelled"],[1,2346,209,32,"data"],[1,2350,210,11,"isMountedRef"],[1,2352,210,24,"current"],[1,2362,212,10,"data"],[1,2364,212,15,"request_id"],[1,2377,212,30,"requestId"],[1,2380,212,43,"data"],[1,2382,212,48,"tag_id"],[1,2391,212,59,"tagId"],[1,2395,213,8,"console"],[1,2403,213,16,"log"],[1,2407,213,20],[1,2466,214,8,"setOffers"],[1,2468,214,18],[1,2472,215,8,"seenOfferIdsRef"],[1,2474,215,24,"current"],[1,2482,215,32,"clear"],[1,2493,228,4],[1,2500,220,4,"socket"],[1,2502,220,11,"on"],[1,2505,220,14],[1,2517,220,27,"handleNewOffer"],[1,2520,221,4,"socket"],[1,2522,221,11,"on"],[1,2525,221,14],[1,2542,221,32,"handleOfferAccepted"],[1,2545,222,4,"socket"],[1,2547,222,11,"on"],[1,2550,222,14],[1,2567,222,32,"handleOfferRejected"],[1,2570,223,4,"socket"],[1,2572,223,11,"on"],[1,2575,223,14],[1,2592,223,32,"handleOfferSentAck"],[1,2595,224,4,"socket"],[1,2597,224,11,"on"],[1,2600,224,14],[1,2616,224,31,"handleTagCancelled"],[1,2619,226,4,"console"],[1,2627,226,12,"log"],[1,2631,226,16],[1,2687,228,11],[1,2692,229,6,"isMountedRef"],[1,2694,229,19,"current"],[1,2703,229,29],[1,2705,230,6,"socket"],[1,2707,230,13,"off"],[1,2711,230,17],[1,2723,230,30,"handleNewOffer"],[1,2726,231,6,"socket"],[1,2728,231,13,"off"],[1,2732,231,17],[1,2749,231,35,"handleOfferAccepted"],[1,2752,232,6,"socket"],[1,2754,232,13,"off"],[1,2758,232,17],[1,2775,232,35,"handleOfferRejected"],[1,2778,233,6,"socket"],[1,2780,233,13,"off"],[1,2784,233,17],[1,2801,233,35,"handleOfferSentAck"],[1,2804,234,6,"socket"],[1,2806,234,13,"off"],[1,2810,234,17],[1,2826,234,34,"handleTagCancelled"],[1,2829,235,6,"console"],[1,2837,235,14,"log"],[1,2841,235,18],[1,2896,237,5],[1,2897,237,6,"enabled"],[1,2899,237,15,"socket"],[1,2901,237,23,"requestId"],[1,2903,237,34,"tagId"],[1,2905,237,41,"onNewOffer"],[1,2907,237,53,"onOfferAccepted"],[1,2909,237,70,"onOfferRejected"],[1,2913,241,2],[1,2919,241,8,"sendOffer"],[1,2922,241,20],[1,2924,241,20,"useCallback"],[1,2926,241,31,"useCallback"],[1,2939,241,32,"async"],[1,2945,242,4,"targetTagId"],[1,2947,243,4,"price"],[1,2949,244,4,"targetRequestId"],[1,2951,245,4,"location"],[1,2953,246,4,"driverName"],[1,2958,248,4],[1,2962,248,9,"userId"],[1,2966,248,20,"socket"],[1,2968,248,28],[1,2975,248,35],[1,2977,251,4],[1,2983,251,10,"optimisticId"],[1,2985,251,25],[1,2999,251,39,"Date"],[1,3004,251,44,"now"],[1,3012,252,10,"optimisticOffer"],[1,3014,252,35],[1,3015,253,6,"id"],[1,3018,253,10,"optimisticId"],[1,3020,254,6,"request_id"],[1,3031,254,18,"targetRequestId"],[1,3033,255,6,"tag_id"],[1,3040,255,14,"targetTagId"],[1,3042,256,6,"driver_id"],[1,3052,256,17,"userId"],[1,3054,257,6,"driver_name"],[1,3066,257,19,"driverName"],[1,3069,257,33],[1,3075,258,6,"driver_rating"],[1,3089,258,21],[1,3091,259,6,"price"],[1,3097,259,13,"price"],[1,3099,260,6,"status"],[1,3106,260,14],[1,3116,261,6,"notes"],[1,3122,261,13],[1,3143,262,6,"created_at"],[1,3155,262,18],[1,3159,262,22,"Date"],[1,3165,262,29,"toISOString"],[1,3179,263,6,"_optimistic"],[1,3192,263,19],[1,3195,266,4,"setOffers"],[1,3197,266,14,"prev"],[1,3200,266,22],[1,3201,266,23,"optimisticOffer"],[1,3206,266,43,"prev"],[1,3210,267,4,"setIsLoading"],[1,3213,267,17],[1,3216,270,4],[1,3220,272,6],[1,3226,272,12,"controller"],[1,3228,272,25],[1,3232,272,29,"AbortController"],[1,3248,273,12,"timeoutId"],[1,3250,273,24,"setTimeout"],[1,3261,273,35],[1,3265,273,41,"controller"],[1,3267,273,52,"abort"],[1,3275,273,61],[1,3280,275,12,"response"],[1,3288,275,29,"fetch"],[1,3294,275,35],[1,3297,275,38,"API_URL"],[1,3328,275,75,"userId"],[1,3332,275,85],[1,3333,276,8,"method"],[1,3340,276,16],[1,3347,277,8,"headers"],[1,3355,277,17],[1,3356,277,19],[1,3371,277,35],[1,3391,278,8,"body"],[1,3396,278,14,"JSON"],[1,3401,278,19,"stringify"],[1,3411,278,29],[1,3412,279,10,"tag_id"],[1,3419,279,18,"targetTagId"],[1,3421,280,10,"request_id"],[1,3432,280,22,"targetRequestId"],[1,3434,281,10,"price"],[1,3442,282,10,"latitude"],[1,3451,282,20,"location"],[1,3454,282,30,"latitude"],[1,3464,282,42],[1,3466,283,10,"longitude"],[1,3476,283,21,"location"],[1,3479,283,31,"longitude"],[1,3490,283,44],[1,3494,285,8,"signal"],[1,3501,285,16,"controller"],[1,3503,285,27,"signal"],[1,3512,290,6],[1,3515,288,6,"clearTimeout"],[1,3528,288,19,"timeoutId"],[1,3532,290,11,"isMountedRef"],[1,3534,290,24,"current"],[1,3542,290,33],[1,3549,290,40],[1,3551,292,6],[1,3557,292,12,"data"],[1,3565,292,25,"response"],[1,3567,292,34,"json"],[1,3574,294,6],[1,3581,294,10,"data"],[1,3583,294,15,"success"],[1,3592,294,26,"data"],[1,3594,294,31,"offer_id"],[1,3604,296,8,"socket"],[1,3606,296,15,"emit"],[1,3611,296,20],[1,3624,296,34],[1,3625,297,10,"request_id"],[1,3636,297,22,"targetRequestId"],[1,3638,298,10,"tag_id"],[1,3645,298,18,"targetTagId"],[1,3647,299,10,"offer_id"],[1,3656,299,20,"data"],[1,3658,299,25,"offer_id"],[1,3667,300,10,"driver_id"],[1,3677,300,21,"userId"],[1,3679,301,10,"driver_name"],[1,3691,301,23,"driverName"],[1,3693,302,10,"price"],[1,3699,302,17,"price"],[1,3701,303,10,"notes"],[1,3707,303,17],[1,3712,307,8,"setOffers"],[1,3714,307,18,"prev"],[1,3717,307,26,"prev"],[1,3719,307,31,"map"],[1,3723,307,35,"o"],[1,3726,308,10,"o"],[1,3728,308,12,"id"],[1,3733,308,19,"optimisticId"],[1,3735,309,14],[1,3739,309,19,"o"],[1,3741,309,22,"id"],[1,3744,309,26,"data"],[1,3746,309,31,"offer_id"],[1,3755,309,41,"offer_id"],[1,3764,309,51,"data"],[1,3766,309,56,"offer_id"],[1,3775,309,66,"notes"],[1,3781,309,73],[1,3784,309,77,"_optimistic"],[1,3797,309,90],[1,3800,310,14,"o"],[1,3804,313,8,"console"],[1,3812,313,16,"log"],[1,3816,313,20],[1,3849,313,49,"data"],[1,3851,313,54,"offer_id"],[1,3861,314,8,"setIsLoading"],[1,3864,314,21],[1,3868,315,15],[1,3872,318,8,"setOffers"],[1,3874,318,18,"prev"],[1,3877,318,26,"prev"],[1,3879,318,31,"filter"],[1,3886,318,38,"o"],[1,3889,318,43,"o"],[1,3891,318,45,"id"],[1,3896,318,52,"optimisticId"],[1,3900,319,8,"setIsLoading"],[1,3903,319,21],[1,3906,320,8,"Alert"],[1,3908,320,13,"default"],[1,3916,320,14,"alert"],[1,3922,320,20],[1,3929,320,28,"data"],[1,3931,320,33,"detail"],[1,3939,320,43],[1,3967,321,15],[1,3969,323,4],[1,3970,323,6],[1,3976,323,13,"err"],[1,3979,324,6],[1,3987,324,11,"isMountedRef"],[1,3989,324,24,"current"],[1,3999,326,6,"setIsLoading"],[1,4002,326,19],[1,4005,327,6,"setOffers"],[1,4007,327,16,"prev"],[1,4010,327,24,"prev"],[1,4012,327,29,"filter"],[1,4019,327,36,"o"],[1,4022,327,41,"o"],[1,4024,327,43,"id"],[1,4029,327,50,"optimisticId"],[1,4033,329,23],[1,4048,329,10,"err"],[1,4050,329,14,"name"],[1,4055,330,8,"Alert"],[1,4057,330,13,"default"],[1,4065,330,14,"alert"],[1,4071,330,20],[1,4100,330,35],[1,4129,332,8,"Alert"],[1,4131,332,13,"default"],[1,4139,332,14,"alert"],[1,4145,332,20],[1,4152,332,28],[1,4187,334,13],[1,4189,335,4],[1,4192,336,5],[1,4193,336,6,"userId"],[1,4195,336,14,"socket"],[1,4199,340,8,"acceptOffer"],[1,4202,340,22],[1,4204,340,22,"useCallback"],[1,4206,340,33,"useCallback"],[1,4219,340,34,"async"],[1,4225,340,41,"offerId"],[1,4227,340,58,"driverId"],[1,4232,341,4],[1,4236,341,9,"userId"],[1,4240,341,20,"socket"],[1,4242,341,28],[1,4249,341,35],[1,4251,344,4,"setOffers"],[1,4253,344,14,"prev"],[1,4256,344,22,"prev"],[1,4258,344,27,"map"],[1,4262,344,31,"o"],[1,4265,345,6,"o"],[1,4267,345,8,"id"],[1,4272,345,15,"offerId"],[1,4275,345,26,"o"],[1,4277,345,28,"offer_id"],[1,4288,345,41,"offerId"],[1,4290,346,10],[1,4294,346,15,"o"],[1,4296,346,18,"status"],[1,4303,346,26],[1,4316,347,10,"o"],[1,4320,350,4],[1,4324,352,6],[1,4330,352,12,"response"],[1,4338,352,29,"fetch"],[1,4344,353,8],[1,4347,353,11,"API_URL"],[1,4383,353,53,"userId"],[1,4397,353,72,"offerId"],[1,4401,354,8],[1,4402,354,10,"method"],[1,4409,354,18],[1,4418,357,6],[1,4422,357,11,"isMountedRef"],[1,4424,357,24,"current"],[1,4432,357,33],[1,4439,357,40],[1,4441,359,6],[1,4447,359,12,"data"],[1,4455,359,25,"response"],[1,4457,359,34,"json"],[1,4464,361,6],[1,4471,361,10,"data"],[1,4473,361,15,"success"],[1,4482,363,8,"socket"],[1,4484,363,15,"emit"],[1,4489,363,20],[1,4504,363,36],[1,4505,364,10,"request_id"],[1,4516,364,22,"requestId"],[1,4518,365,10,"offer_id"],[1,4527,365,20,"offerId"],[1,4529,366,10,"driver_id"],[1,4539,366,21,"driverId"],[1,4541,367,10,"tag_id"],[1,4548,367,18,"tagId"],[1,4550,368,10,"passenger_id"],[1,4563,368,24,"userId"],[1,4567,372,8,"setOffers"],[1,4569,372,18,"prev"],[1,4572,372,26,"prev"],[1,4574,372,31,"filter"],[1,4581,372,38,"o"],[1,4584,372,43,"o"],[1,4586,372,45,"id"],[1,4591,372,52,"offerId"],[1,4594,372,63,"o"],[1,4596,372,65,"offer_id"],[1,4607,372,78,"offerId"],[1,4612,373,15],[1,4616,376,8,"setOffers"],[1,4618,376,18,"prev"],[1,4621,376,26,"prev"],[1,4623,376,31,"map"],[1,4627,376,35,"o"],[1,4630,377,10,"o"],[1,4632,377,12,"id"],[1,4637,377,19,"offerId"],[1,4640,377,30,"o"],[1,4642,377,32,"offer_id"],[1,4653,377,45,"offerId"],[1,4655,378,14],[1,4659,378,19,"o"],[1,4661,378,22,"status"],[1,4668,378,30],[1,4679,379,14,"o"],[1,4683,381,8,"Alert"],[1,4685,381,13,"default"],[1,4693,381,14,"alert"],[1,4699,381,20],[1,4706,381,28,"data"],[1,4708,381,33,"detail"],[1,4716,381,43],[1,4743,382,15],[1,4745,384,4],[1,4746,384,6],[1,4752,384,13,"err"],[1,4755,385,6],[1,4763,385,11,"isMountedRef"],[1,4765,385,24,"current"],[1,4775,386,6,"setOffers"],[1,4777,386,16,"prev"],[1,4780,386,24,"prev"],[1,4782,386,29,"map"],[1,4786,386,33,"o"],[1,4789,387,8,"o"],[1,4791,387,10,"id"],[1,4796,387,17,"offerId"],[1,4799,387,28,"o"],[1,4801,387,30,"offer_id"],[1,4812,387,43,"offerId"],[1,4814,388,12],[1,4818,388,17,"o"],[1,4820,388,20,"status"],[1,4827,388,28],[1,4838,389,12,"o"],[1,4842,391,6,"Alert"],[1,4844,391,11,"default"],[1,4852,391,12,"alert"],[1,4858,391,18],[1,4865,391,26],[1,4900,392,13],[1,4902,393,4],[1,4905,394,5],[1,4906,394,6,"userId"],[1,4908,394,14,"socket"],[1,4910,394,22,"requestId"],[1,4912,394,33,"tagId"],[1,4916,398,8,"rejectOffer"],[1,4919,398,22],[1,4921,398,22,"useCallback"],[1,4923,398,33,"useCallback"],[1,4936,398,34,"async"],[1,4942,398,41,"offerId"],[1,4944,398,58,"driverId"],[1,4949,399,4],[1,4953,399,9,"userId"],[1,4957,399,20,"socket"],[1,4959,399,28],[1,4966,399,35],[1,4968,402,4],[1,4974,402,10,"removedOffer"],[1,4976,402,25,"offers"],[1,4978,402,32,"find"],[1,4983,402,37,"o"],[1,4986,402,42,"o"],[1,4988,402,44,"id"],[1,4993,402,51,"offerId"],[1,4996,402,62,"o"],[1,4998,402,64,"offer_id"],[1,5009,402,77,"offerId"],[1,5012,403,4,"setOffers"],[1,5014,403,14,"prev"],[1,5017,403,22,"prev"],[1,5019,403,27,"filter"],[1,5026,403,34,"o"],[1,5029,403,39,"o"],[1,5031,403,41,"id"],[1,5036,403,48,"offerId"],[1,5039,403,59,"o"],[1,5041,403,61,"offer_id"],[1,5052,403,74,"offerId"],[1,5056,405,4],[1,5060,418,6],[1,5073,406,12,"fetch"],[1,5079,407,8],[1,5082,407,11,"API_URL"],[1,5119,407,54,"userId"],[1,5133,407,73,"offerId"],[1,5137,408,8],[1,5138,408,10,"method"],[1,5145,408,18],[1,5154,412,6,"socket"],[1,5156,412,13,"emit"],[1,5161,412,18],[1,5176,412,34],[1,5177,413,8,"request_id"],[1,5188,413,20,"requestId"],[1,5190,414,8,"offer_id"],[1,5199,414,18,"offerId"],[1,5201,415,8,"driver_id"],[1,5211,415,19,"driverId"],[1,5216,418,13],[1,5217,419,4],[1,5218,419,6],[1,5224,424,6],[1,5231,421,10,"removedOffer"],[1,5234,421,26,"isMountedRef"],[1,5236,421,39,"current"],[1,5245,422,8,"setOffers"],[1,5247,422,18,"prev"],[1,5250,422,26],[1,5251,422,27,"removedOffer"],[1,5256,422,44,"prev"],[1,5261,424,13],[1,5262,425,4],[1,5265,426,5],[1,5266,426,6,"userId"],[1,5268,426,14,"socket"],[1,5270,426,22,"requestId"],[1,5272,426,33,"offers"],[1,5276,430,8,"clearOffers"],[1,5279,430,22],[1,5281,430,22,"useCallback"],[1,5283,430,33,"useCallback"],[1,5296,430,34],[1,5301,431,4,"setOffers"],[1,5303,431,14],[1,5307,432,4,"seenOfferIdsRef"],[1,5309,432,20,"current"],[1,5317,432,28,"clear"],[1,5325,433,4,"console"],[1,5333,433,12,"log"],[1,5337,433,16],[1,5381,434,5],[1,5385,436,8,"addOffer"],[1,5388,436,19],[1,5390,436,19,"useCallback"],[1,5392,436,30,"useCallback"],[1,5405,436,32,"offer"],[1,5409,437,4],[1,5415,437,10,"offerId"],[1,5417,437,20,"offer"],[1,5419,437,26,"id"],[1,5423,437,32,"offer"],[1,5425,437,38,"offer_id"],[1,5434,438,8,"offerId"],[1,5438,438,20,"seenOfferIdsRef"],[1,5440,438,36,"current"],[1,5448,438,44,"has"],[1,5452,438,48,"offerId"],[1,5457,439,6,"seenOfferIdsRef"],[1,5459,439,22,"current"],[1,5467,439,30,"add"],[1,5471,439,34,"offerId"],[1,5474,440,6,"setOffers"],[1,5476,440,16,"prev"],[1,5479,440,24],[1,5480,440,25,"offer"],[1,5485,440,35,"prev"],[1,5491,442,5],[1,5495,446,2],[1,5501,446,9],[1,5502,447,4,"offers"],[1,5509,447,12,"offers"],[1,5511,447,19,"filter"],[1,5518,447,26,"o"],[1,5521,447,44],[1,5533,447,31,"o"],[1,5535,447,33,"status"],[1,5543,447,70],[1,5557,447,57,"o"],[1,5559,447,59,"status"],[1,5567,447,98],[1,5580,447,85,"o"],[1,5582,447,87,"status"],[1,5590,448,4,"isLoading"],[1,5602,449,4,"error"],[1,5610,450,4,"sendOffer"],[1,5622,451,4,"acceptOffer"],[1,5636,452,4,"rejectOffer"],[1,5650,453,4,"clearOffers"],[1,5664,454,4,"addOffer"],[1,5675,456,0],[1,5676,458,0],[1,5680,458,0,"_default"],[1,5682,458,15,"useOffers"],[1,5683,458,25],[1,5686]],"functionMap":{"names":["<global>","useOffers","useEffect$argument_0","handleNewOffer","setOffers$argument_0","prev.some$argument_0","handleOfferAccepted","prev.map$argument_0","handleOfferRejected","prev.filter$argument_0","handleOfferSentAck","handleTagCancelled","<anonymous>","sendOffer","setTimeout$argument_0","acceptOffer","rejectOffer","offers.find$argument_0","clearOffers","addOffer","offers.filter$argument_0"],"mappings":"AAA;OCqE;YCuB;2BCgB;gBC8C;sBCE,+CD;ODI;KDG;gCIG;gBFI,iBG;aHG;OEC;KJG;gCMG;gBJI,oBK;8DLC;OIC;KNG;+BQG;kBNO,iBG;eHG;SMC;KRE;+BSG;KTQ;WUW;KVQ;GDC;gCYI;cTyB,kCS;mCCO,wBD;kBTkC,iBG;eHG;SSC;kBTO,oBK,0BL,CS;gBTS,oBK,0BL,CS;GZS;kCcI;cXI,iBG;WHG;KWC;kBXwB,oBK,+CL,CW;kBXI,iBG;eHG;SWC;gBXM,iBG;aHG;OWC;GdI;kCeI;qCCI,+CD;cZC,oBK,+CL,CY;kBZmB,+BY;GfI;kCiBI;GjBI;+BkBE;gBfI,wBe;GlBE;0BmBK,kFnB;CDS"},"hasCjsExports":false},"type":"js/module"}]}