{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":215},"end":{"line":11,"column":65,"index":280}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Alert","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"PEUC6jrQVoAGZ2qYkvimljMOyJI=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":13,"column":0,"index":319},"end":{"line":13,"column":39,"index":358}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){\"use strict\";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"default\",{enumerable:!0,get:function(){return c}}),_e.useOffers=s;var t=r(d[0]),f=e(r(d[1])),o=e(r(d[2]));const n=`${o.default.expoConfig?.extra?.backendUrl||\"https://rideconvo.preview.emergentagent.com\"}/api`;function s(e){const{userId:o,tagId:s,requestId:c,isDriver:u=!1,enabled:l=!0,socket:_,onNewOffer:p,onOfferAccepted:O,onOfferRejected:v}=e,[h,k]=(0,t.useState)([]),[S,b]=(0,t.useState)(!1),[w,y]=(0,t.useState)(null),C=(0,t.useRef)(!0),E=(0,t.useRef)(new Set),T=(0,t.useRef)(null);(0,t.useEffect)(()=>{if(C.current=!0,!l||!_)return;c&&c!==T.current&&(console.log('\\ud83d\\udd04 [useOffers] Request ID changed, clearing offers'),T.current=c,k([]),E.current.clear());const e=e=>{if(!C.current)return;const t=e.offer_id||e.id,f=e.request_id;if(E.current.has(t))return void console.log('\\u26a0\\ufe0f [useOffers] Duplicate offer ignored:',t);if(c&&f&&f!==c)return void console.log('\\u26a0\\ufe0f [useOffers] Wrong request_id, ignoring offer');E.current.add(t);const o={id:t,offer_id:t,request_id:f,tag_id:e.tag_id||s||'',driver_id:e.driver_id,driver_name:e.driver_name||'\\u015eof\\xf6r',driver_rating:e.driver_rating||5,driver_photo:e.driver_photo,price:e.price,notes:e.notes,status:e.status||'pending',vehicle_model:e.vehicle_model,vehicle_color:e.vehicle_color,distance_km:e.distance_km,estimated_arrival_min:e.estimated_arrival_min,created_at:e.created_at||(new Date).toISOString(),_optimistic:!1};console.log('\\ud83d\\udce5 [useOffers] NEW OFFER received:',o.price,'TL from',o.driver_name),k(e=>e.some(e=>e.id===t||e.offer_id===t)?e:[o,...e]),p?.(o)},t=e=>{C.current&&(console.log('\\u2705 [useOffers] OFFER ACCEPTED:',e),k(t=>t.map(t=>t.id===e.offer_id||t.offer_id===e.offer_id?{...t,status:'accepted'}:t)),O?.(e))},f=e=>{C.current&&(console.log('\\u274c [useOffers] OFFER REJECTED:',e),k(t=>t.filter(t=>t.id!==e.offer_id&&t.offer_id!==e.offer_id)),v?.(e))},o=e=>{C.current&&(console.log('\\u2705 [useOffers] Offer sent acknowledged:',e),b(!1),e.offer_id&&k(t=>t.map(t=>t._optimistic?{...t,id:e.offer_id,offer_id:e.offer_id,_optimistic:!1}:t)))},n=e=>{C.current&&(e.request_id!==c&&e.tag_id!==s||(console.log('\\ud83d\\udeab [useOffers] TAG CANCELLED, clearing offers'),k([]),E.current.clear()))};return _.on('new_offer',e),_.on('offer_accepted',t),_.on('offer_rejected',f),_.on('offer_sent_ack',o),_.on('tag_cancelled',n),console.log('\\ud83d\\udce1 [useOffers] Socket listeners registered'),()=>{C.current=!1,_.off('new_offer',e),_.off('offer_accepted',t),_.off('offer_rejected',f),_.off('offer_sent_ack',o),_.off('tag_cancelled',n),console.log('\\ud83e\\uddf9 [useOffers] Socket listeners removed')}},[l,_,c,s,p,O,v]);const q=(0,t.useCallback)(async(e,t,s,c,u)=>{if(!o||!_)return!1;const l=`optimistic_${Date.now()}`,p={id:l,request_id:s,tag_id:e,driver_id:o,driver_name:u||'Sen',driver_rating:5,price:t,status:'pending',notes:'G\\xf6nderiliyor...',created_at:(new Date).toISOString(),_optimistic:!0};k(e=>[p,...e]),b(!0);try{const p=new AbortController,O=setTimeout(()=>p.abort(),1e4),v=await fetch(`${n}/driver/send-offer?user_id=${o}`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({tag_id:e,request_id:s,price:t,latitude:c?.latitude||0,longitude:c?.longitude||0}),signal:p.signal});if(clearTimeout(O),!C.current)return!0;const h=await v.json();return h.success||h.offer_id?(_.emit('send_offer',{request_id:s,tag_id:e,offer_id:h.offer_id,driver_id:o,driver_name:u,price:t,notes:''}),k(e=>e.map(e=>e.id===l?{...e,id:h.offer_id,offer_id:h.offer_id,notes:'',_optimistic:!1}:e)),console.log('\\u2705 [useOffers] Offer sent:',h.offer_id),b(!1),!0):(k(e=>e.filter(e=>e.id!==l)),b(!1),f.default.alert('Hata',h.detail||'Teklif g\\xf6nderilemedi'),!1)}catch(e){return!!C.current&&(b(!1),k(e=>e.filter(e=>e.id!==l)),'AbortError'===e.name?f.default.alert('Zaman A\\u015f\\u0131m\\u0131','Sunucu yan\\u0131t vermedi'):f.default.alert('Hata','Ba\\u011flant\\u0131 hatas\\u0131'),!1)}},[o,_]),j=(0,t.useCallback)(async(e,t)=>{if(!o||!_)return!1;k(t=>t.map(t=>t.id===e||t.offer_id===e?{...t,status:'accepting'}:t));try{const u=await fetch(`${n}/passenger/accept-offer?user_id=${o}&offer_id=${e}`,{method:'POST'});if(!C.current)return!0;const l=await u.json();return l.success?(_.emit('accept_offer',{request_id:c,offer_id:e,driver_id:t,tag_id:s,passenger_id:o}),k(t=>t.filter(t=>t.id===e||t.offer_id===e)),!0):(k(t=>t.map(t=>t.id===e||t.offer_id===e?{...t,status:'pending'}:t)),f.default.alert('Hata',l.detail||'Teklif kabul edilemedi'),!1)}catch(t){return!!C.current&&(k(t=>t.map(t=>t.id===e||t.offer_id===e?{...t,status:'pending'}:t)),f.default.alert('Hata','Ba\\u011flant\\u0131 hatas\\u0131'),!1)}},[o,_,c,s]),$=(0,t.useCallback)(async(e,t)=>{if(!o||!_)return!1;const f=h.find(t=>t.id===e||t.offer_id===e);k(t=>t.filter(t=>t.id!==e&&t.offer_id!==e));try{return await fetch(`${n}/passenger/dismiss-offer?user_id=${o}&offer_id=${e}`,{method:'POST'}),_.emit('reject_offer',{request_id:c,offer_id:e,driver_id:t}),!0}catch{return f&&C.current&&k(e=>[f,...e]),!1}},[o,_,c,h]),D=(0,t.useCallback)(()=>{k([]),E.current.clear(),console.log('\\ud83e\\uddf9 [useOffers] Offers cleared')},[]),R=(0,t.useCallback)(e=>{const t=e.id||e.offer_id;t&&!E.current.has(t)&&(E.current.add(t),k(t=>[e,...t]))},[]);return{offers:h.filter(e=>'pending'===e.status||'accepting'===e.status||'accepted'===e.status),isLoading:S,error:w,sendOffer:q,acceptOffer:j,rejectOffer:$,clearOffers:D,addOffer:R}}var c=s});","lineCount":1,"map":[[1,143,454,0,"Object"],[1,150,454,0,"defineProperty"],[1,165,454,0,"_e"],[1,168,454,0],[1,179,454,0,"enumerable"],[1,191,454,0],[1,193,454,0,"get"],[1,197,454,0],[1,215,454,0,"_default"],[1,216,454,0],[1,220,70,0,"_e"],[1,223,70,0,"useOffers"],[1,235,11,0],[1,239,11,0,"_react"],[1,241,11,0,"r"],[1,243,11,0,"d"],[1,245,11,0],[1,249,11,65,"Alert"],[1,251,11,65,"_interopDefault"],[1,253,11,65,"r"],[1,255,11,65,"d"],[1,257,11,65],[1,262,13,0,"Constants"],[1,264,13,0,"_interopDefault"],[1,266,13,0,"r"],[1,268,13,0,"d"],[1,270,13,0],[1,275,15,0],[1,281,18,6,"API_URL"],[1,283,18,16],[1,286,15,20,"Constants"],[1,288,15,29,"default"],[1,296,15,30,"expoConfig"],[1,308,15,42,"extra"],[1,315,15,49,"backendUrl"],[1,327,15,59],[1,383,70,7],[1,392,70,16,"useOffers"],[1,394,70,26,"options"],[1,397,71,2],[1,403,71,8,"userId"],[1,410,72,4,"userId"],[1,412,72,10,"tagId"],[1,418,73,4,"tagId"],[1,420,73,9,"requestId"],[1,430,74,4,"requestId"],[1,432,74,13,"isDriver"],[1,441,75,4,"isDriver"],[1,444,75,15],[1,446,75,20,"enabled"],[1,454,76,4,"enabled"],[1,457,76,14],[1,459,76,18,"socket"],[1,466,77,4,"socket"],[1,468,77,10,"onNewOffer"],[1,479,78,4,"onNewOffer"],[1,481,78,14,"onOfferAccepted"],[1,497,79,4,"onOfferAccepted"],[1,499,79,19,"onOfferRejected"],[1,515,80,4,"onOfferRejected"],[1,518,81,6,"options"],[1,521,83,9,"offers"],[1,523,83,17,"setOffers"],[1,527,83,30],[1,529,83,30,"useState"],[1,531,83,38,"useState"],[1,541,83,48],[1,546,84,9,"isLoading"],[1,548,84,20,"setIsLoading"],[1,552,84,36],[1,554,84,36,"useState"],[1,556,84,44,"useState"],[1,567,84,45],[1,571,85,9,"error"],[1,573,85,16,"setError"],[1,577,85,28],[1,579,85,28,"useState"],[1,581,85,36,"useState"],[1,591,85,52],[1,597,87,8,"isMountedRef"],[1,600,87,23],[1,602,87,23,"useRef"],[1,604,87,29,"useRef"],[1,613,87,30],[1,616,88,8,"seenOfferIdsRef"],[1,619,88,26],[1,621,88,26,"useRef"],[1,623,88,32,"useRef"],[1,631,88,46],[1,635,88,50,"Set"],[1,640,89,8,"currentRequestIdRef"],[1,643,89,30],[1,645,89,30,"useRef"],[1,647,89,36,"useRef"],[1,655,89,52],[1,662,93,2],[1,664,93,2,"useEffect"],[1,666,93,11,"useEffect"],[1,677,93,12],[1,682,96,4],[1,685,94,4,"isMountedRef"],[1,687,94,17,"current"],[1,696,94,27],[1,699,96,9,"enabled"],[1,703,96,21,"socket"],[1,705,97,6],[1,712,101,8,"requestId"],[1,715,101,21,"requestId"],[1,719,101,35,"currentRequestIdRef"],[1,721,101,55,"current"],[1,731,102,6,"console"],[1,739,102,14,"log"],[1,743,102,18],[1,807,103,6,"currentRequestIdRef"],[1,809,103,26,"current"],[1,817,103,36,"requestId"],[1,819,104,6,"setOffers"],[1,821,104,16],[1,825,105,6,"seenOfferIdsRef"],[1,827,105,22,"current"],[1,835,105,30,"clear"],[1,844,109,4],[1,850,109,10,"handleNewOffer"],[1,852,109,28,"data"],[1,856,110,6],[1,860,110,11,"isMountedRef"],[1,862,110,24,"current"],[1,870,110,33],[1,877,112,6],[1,883,112,12,"offerId"],[1,885,112,22,"data"],[1,887,112,27,"offer_id"],[1,897,112,39,"data"],[1,899,112,44,"id"],[1,902,113,12,"incomingRequestId"],[1,904,113,32,"data"],[1,906,113,37,"request_id"],[1,917,116,6],[1,920,116,10,"seenOfferIdsRef"],[1,922,116,26,"current"],[1,930,116,34,"has"],[1,934,116,38,"offerId"],[1,937,118,8],[1,949,117,8,"console"],[1,957,117,16,"log"],[1,961,117,20],[1,1013,117,63,"offerId"],[1,1016,122,6],[1,1019,122,10,"requestId"],[1,1022,122,23,"incomingRequestId"],[1,1025,122,44,"incomingRequestId"],[1,1029,122,66,"requestId"],[1,1031,124,8],[1,1043,123,8,"console"],[1,1051,123,16,"log"],[1,1055,123,20],[1,1116,127,6,"seenOfferIdsRef"],[1,1118,127,22,"current"],[1,1126,127,30,"add"],[1,1130,127,34,"offerId"],[1,1133,129,6],[1,1139,129,12,"newOffer"],[1,1141,129,30],[1,1142,130,8,"id"],[1,1145,130,12,"offerId"],[1,1147,131,8,"offer_id"],[1,1156,131,18,"offerId"],[1,1158,132,8,"request_id"],[1,1169,132,20,"incomingRequestId"],[1,1171,133,8,"tag_id"],[1,1178,133,16,"data"],[1,1180,133,21,"tag_id"],[1,1188,133,31,"tagId"],[1,1191,133,40],[1,1194,134,8,"driver_id"],[1,1204,134,19,"data"],[1,1206,134,24,"driver_id"],[1,1216,135,8,"driver_name"],[1,1228,135,21,"data"],[1,1230,135,26,"driver_name"],[1,1243,135,41],[1,1259,136,8,"driver_rating"],[1,1273,136,23,"data"],[1,1275,136,28,"driver_rating"],[1,1290,136,45],[1,1292,137,8,"driver_photo"],[1,1305,137,22,"data"],[1,1307,137,27,"driver_photo"],[1,1320,138,8,"price"],[1,1326,138,15,"data"],[1,1328,138,20,"price"],[1,1334,139,8,"notes"],[1,1340,139,15,"data"],[1,1342,139,20,"notes"],[1,1348,140,8,"status"],[1,1355,140,16,"data"],[1,1357,140,21,"status"],[1,1365,140,31],[1,1375,141,8,"vehicle_model"],[1,1389,141,23,"data"],[1,1391,141,28,"vehicle_model"],[1,1405,142,8,"vehicle_color"],[1,1419,142,23,"data"],[1,1421,142,28,"vehicle_color"],[1,1435,143,8,"distance_km"],[1,1447,143,21,"data"],[1,1449,143,26,"distance_km"],[1,1461,144,8,"estimated_arrival_min"],[1,1483,144,31,"data"],[1,1485,144,36,"estimated_arrival_min"],[1,1507,145,8,"created_at"],[1,1518,145,20,"data"],[1,1520,145,25,"created_at"],[1,1533,145,39],[1,1537,145,43,"Date"],[1,1543,145,50,"toISOString"],[1,1557,146,8,"_optimistic"],[1,1570,146,21],[1,1573,149,6,"console"],[1,1581,149,14,"log"],[1,1585,149,18],[1,1632,149,56,"newOffer"],[1,1634,149,65,"price"],[1,1640,149,72],[1,1650,149,83,"newOffer"],[1,1652,149,92,"driver_name"],[1,1665,151,6,"setOffers"],[1,1667,151,16,"prev"],[1,1670,153,12,"prev"],[1,1672,153,17,"some"],[1,1677,153,22,"o"],[1,1680,153,27,"o"],[1,1682,153,29,"id"],[1,1687,153,36,"offerId"],[1,1690,153,47,"o"],[1,1692,153,49,"offer_id"],[1,1703,153,62,"offerId"],[1,1706,154,17,"prev"],[1,1708,156,15],[1,1709,156,16,"newOffer"],[1,1714,156,29,"prev"],[1,1718,159,6,"onNewOffer"],[1,1722,159,19,"newOffer"],[1,1726,163,10,"handleOfferAccepted"],[1,1728,163,33,"data"],[1,1732,164,11,"isMountedRef"],[1,1734,164,24,"current"],[1,1744,165,6,"console"],[1,1752,165,14,"log"],[1,1756,165,18],[1,1793,165,51,"data"],[1,1796,167,6,"setOffers"],[1,1798,167,16,"prev"],[1,1801,167,24,"prev"],[1,1803,167,29,"map"],[1,1807,167,33,"o"],[1,1810,168,9,"o"],[1,1812,168,11,"id"],[1,1817,168,18,"data"],[1,1819,168,23,"offer_id"],[1,1829,168,35,"o"],[1,1831,168,37,"offer_id"],[1,1842,168,50,"data"],[1,1844,168,55,"offer_id"],[1,1853,169,12],[1,1857,169,17,"o"],[1,1859,169,20,"status"],[1,1866,169,28],[1,1878,170,12,"o"],[1,1882,173,6,"onOfferAccepted"],[1,1886,173,24,"data"],[1,1891,177,10,"handleOfferRejected"],[1,1893,177,33,"data"],[1,1897,178,11,"isMountedRef"],[1,1899,178,24,"current"],[1,1909,179,6,"console"],[1,1917,179,14,"log"],[1,1921,179,18],[1,1958,179,51,"data"],[1,1961,181,6,"setOffers"],[1,1963,181,16,"prev"],[1,1966,181,24,"prev"],[1,1968,181,29,"filter"],[1,1975,181,36,"o"],[1,1978,182,8,"o"],[1,1980,182,10,"id"],[1,1985,182,17,"data"],[1,1987,182,22,"offer_id"],[1,1997,182,34,"o"],[1,1999,182,36,"offer_id"],[1,2010,182,49,"data"],[1,2012,182,54,"offer_id"],[1,2023,185,6,"onOfferRejected"],[1,2027,185,24,"data"],[1,2032,189,10,"handleOfferSentAck"],[1,2034,189,32,"data"],[1,2038,190,11,"isMountedRef"],[1,2040,190,24,"current"],[1,2050,191,6,"console"],[1,2058,191,14,"log"],[1,2062,191,18],[1,2108,191,60,"data"],[1,2111,192,6,"setIsLoading"],[1,2114,192,19],[1,2117,195,10,"data"],[1,2119,195,15,"offer_id"],[1,2129,196,8,"setOffers"],[1,2131,196,18,"prev"],[1,2134,196,26,"prev"],[1,2136,196,31,"map"],[1,2140,196,35,"o"],[1,2143,197,10,"o"],[1,2145,197,12,"_optimistic"],[1,2157,198,14],[1,2161,198,19,"o"],[1,2163,198,22,"id"],[1,2166,198,26,"data"],[1,2168,198,31,"offer_id"],[1,2177,198,41,"offer_id"],[1,2186,198,51,"data"],[1,2188,198,56,"offer_id"],[1,2197,198,66,"_optimistic"],[1,2210,198,79],[1,2213,199,14,"o"],[1,2219,205,10,"handleTagCancelled"],[1,2221,205,32,"data"],[1,2225,206,11,"isMountedRef"],[1,2227,206,24,"current"],[1,2237,208,10,"data"],[1,2239,208,15,"request_id"],[1,2252,208,30,"requestId"],[1,2255,208,43,"data"],[1,2257,208,48,"tag_id"],[1,2266,208,59,"tagId"],[1,2270,209,8,"console"],[1,2278,209,16,"log"],[1,2282,209,20],[1,2341,210,8,"setOffers"],[1,2343,210,18],[1,2347,211,8,"seenOfferIdsRef"],[1,2349,211,24,"current"],[1,2357,211,32,"clear"],[1,2368,224,4],[1,2375,216,4,"socket"],[1,2377,216,11,"on"],[1,2380,216,14],[1,2392,216,27,"handleNewOffer"],[1,2395,217,4,"socket"],[1,2397,217,11,"on"],[1,2400,217,14],[1,2417,217,32,"handleOfferAccepted"],[1,2420,218,4,"socket"],[1,2422,218,11,"on"],[1,2425,218,14],[1,2442,218,32,"handleOfferRejected"],[1,2445,219,4,"socket"],[1,2447,219,11,"on"],[1,2450,219,14],[1,2467,219,32,"handleOfferSentAck"],[1,2470,220,4,"socket"],[1,2472,220,11,"on"],[1,2475,220,14],[1,2491,220,31,"handleTagCancelled"],[1,2494,222,4,"console"],[1,2502,222,12,"log"],[1,2506,222,16],[1,2562,224,11],[1,2567,225,6,"isMountedRef"],[1,2569,225,19,"current"],[1,2578,225,29],[1,2580,226,6,"socket"],[1,2582,226,13,"off"],[1,2586,226,17],[1,2598,226,30,"handleNewOffer"],[1,2601,227,6,"socket"],[1,2603,227,13,"off"],[1,2607,227,17],[1,2624,227,35,"handleOfferAccepted"],[1,2627,228,6,"socket"],[1,2629,228,13,"off"],[1,2633,228,17],[1,2650,228,35,"handleOfferRejected"],[1,2653,229,6,"socket"],[1,2655,229,13,"off"],[1,2659,229,17],[1,2676,229,35,"handleOfferSentAck"],[1,2679,230,6,"socket"],[1,2681,230,13,"off"],[1,2685,230,17],[1,2701,230,34,"handleTagCancelled"],[1,2704,231,6,"console"],[1,2712,231,14,"log"],[1,2716,231,18],[1,2771,233,5],[1,2772,233,6,"enabled"],[1,2774,233,15,"socket"],[1,2776,233,23,"requestId"],[1,2778,233,34,"tagId"],[1,2780,233,41,"onNewOffer"],[1,2782,233,53,"onOfferAccepted"],[1,2784,233,70,"onOfferRejected"],[1,2788,237,2],[1,2794,237,8,"sendOffer"],[1,2797,237,20],[1,2799,237,20,"useCallback"],[1,2801,237,31,"useCallback"],[1,2814,237,32,"async"],[1,2820,238,4,"targetTagId"],[1,2822,239,4,"price"],[1,2824,240,4,"targetRequestId"],[1,2826,241,4,"location"],[1,2828,242,4,"driverName"],[1,2833,244,4],[1,2837,244,9,"userId"],[1,2841,244,20,"socket"],[1,2843,244,28],[1,2850,244,35],[1,2852,247,4],[1,2858,247,10,"optimisticId"],[1,2860,247,25],[1,2874,247,39,"Date"],[1,2879,247,44,"now"],[1,2887,248,10,"optimisticOffer"],[1,2889,248,35],[1,2890,249,6,"id"],[1,2893,249,10,"optimisticId"],[1,2895,250,6,"request_id"],[1,2906,250,18,"targetRequestId"],[1,2908,251,6,"tag_id"],[1,2915,251,14,"targetTagId"],[1,2917,252,6,"driver_id"],[1,2927,252,17,"userId"],[1,2929,253,6,"driver_name"],[1,2941,253,19,"driverName"],[1,2944,253,33],[1,2950,254,6,"driver_rating"],[1,2964,254,21],[1,2966,255,6,"price"],[1,2972,255,13,"price"],[1,2974,256,6,"status"],[1,2981,256,14],[1,2991,257,6,"notes"],[1,2997,257,13],[1,3018,258,6,"created_at"],[1,3030,258,18],[1,3034,258,22,"Date"],[1,3040,258,29,"toISOString"],[1,3054,259,6,"_optimistic"],[1,3067,259,19],[1,3070,262,4,"setOffers"],[1,3072,262,14,"prev"],[1,3075,262,22],[1,3076,262,23,"optimisticOffer"],[1,3081,262,43,"prev"],[1,3085,263,4,"setIsLoading"],[1,3088,263,17],[1,3091,266,4],[1,3095,268,6],[1,3101,268,12,"controller"],[1,3103,268,25],[1,3107,268,29,"AbortController"],[1,3123,269,12,"timeoutId"],[1,3125,269,24,"setTimeout"],[1,3136,269,35],[1,3140,269,41,"controller"],[1,3142,269,52,"abort"],[1,3150,269,61],[1,3155,271,12,"response"],[1,3163,271,29,"fetch"],[1,3169,271,35],[1,3172,271,38,"API_URL"],[1,3203,271,75,"userId"],[1,3207,271,85],[1,3208,272,8,"method"],[1,3215,272,16],[1,3222,273,8,"headers"],[1,3230,273,17],[1,3231,273,19],[1,3246,273,35],[1,3266,274,8,"body"],[1,3271,274,14,"JSON"],[1,3276,274,19,"stringify"],[1,3286,274,29],[1,3287,275,10,"tag_id"],[1,3294,275,18,"targetTagId"],[1,3296,276,10,"request_id"],[1,3307,276,22,"targetRequestId"],[1,3309,277,10,"price"],[1,3317,278,10,"latitude"],[1,3326,278,20,"location"],[1,3329,278,30,"latitude"],[1,3339,278,42],[1,3341,279,10,"longitude"],[1,3351,279,21,"location"],[1,3354,279,31,"longitude"],[1,3365,279,44],[1,3369,281,8,"signal"],[1,3376,281,16,"controller"],[1,3378,281,27,"signal"],[1,3387,286,6],[1,3390,284,6,"clearTimeout"],[1,3403,284,19,"timeoutId"],[1,3407,286,11,"isMountedRef"],[1,3409,286,24,"current"],[1,3417,286,33],[1,3424,286,40],[1,3426,288,6],[1,3432,288,12,"data"],[1,3440,288,25,"response"],[1,3442,288,34,"json"],[1,3449,290,6],[1,3456,290,10,"data"],[1,3458,290,15,"success"],[1,3467,290,26,"data"],[1,3469,290,31,"offer_id"],[1,3479,292,8,"socket"],[1,3481,292,15,"emit"],[1,3486,292,20],[1,3499,292,34],[1,3500,293,10,"request_id"],[1,3511,293,22,"targetRequestId"],[1,3513,294,10,"tag_id"],[1,3520,294,18,"targetTagId"],[1,3522,295,10,"offer_id"],[1,3531,295,20,"data"],[1,3533,295,25,"offer_id"],[1,3542,296,10,"driver_id"],[1,3552,296,21,"userId"],[1,3554,297,10,"driver_name"],[1,3566,297,23,"driverName"],[1,3568,298,10,"price"],[1,3574,298,17,"price"],[1,3576,299,10,"notes"],[1,3582,299,17],[1,3587,303,8,"setOffers"],[1,3589,303,18,"prev"],[1,3592,303,26,"prev"],[1,3594,303,31,"map"],[1,3598,303,35,"o"],[1,3601,304,10,"o"],[1,3603,304,12,"id"],[1,3608,304,19,"optimisticId"],[1,3610,305,14],[1,3614,305,19,"o"],[1,3616,305,22,"id"],[1,3619,305,26,"data"],[1,3621,305,31,"offer_id"],[1,3630,305,41,"offer_id"],[1,3639,305,51,"data"],[1,3641,305,56,"offer_id"],[1,3650,305,66,"notes"],[1,3656,305,73],[1,3659,305,77,"_optimistic"],[1,3672,305,90],[1,3675,306,14,"o"],[1,3679,309,8,"console"],[1,3687,309,16,"log"],[1,3691,309,20],[1,3724,309,49,"data"],[1,3726,309,54,"offer_id"],[1,3736,310,8,"setIsLoading"],[1,3739,310,21],[1,3743,311,15],[1,3747,314,8,"setOffers"],[1,3749,314,18,"prev"],[1,3752,314,26,"prev"],[1,3754,314,31,"filter"],[1,3761,314,38,"o"],[1,3764,314,43,"o"],[1,3766,314,45,"id"],[1,3771,314,52,"optimisticId"],[1,3775,315,8,"setIsLoading"],[1,3778,315,21],[1,3781,316,8,"Alert"],[1,3783,316,13,"default"],[1,3791,316,14,"alert"],[1,3797,316,20],[1,3804,316,28,"data"],[1,3806,316,33,"detail"],[1,3814,316,43],[1,3842,317,15],[1,3844,319,4],[1,3845,319,6],[1,3851,319,13,"err"],[1,3854,320,6],[1,3862,320,11,"isMountedRef"],[1,3864,320,24,"current"],[1,3874,322,6,"setIsLoading"],[1,3877,322,19],[1,3880,323,6,"setOffers"],[1,3882,323,16,"prev"],[1,3885,323,24,"prev"],[1,3887,323,29,"filter"],[1,3894,323,36,"o"],[1,3897,323,41,"o"],[1,3899,323,43,"id"],[1,3904,323,50,"optimisticId"],[1,3908,325,23],[1,3923,325,10,"err"],[1,3925,325,14,"name"],[1,3930,326,8,"Alert"],[1,3932,326,13,"default"],[1,3940,326,14,"alert"],[1,3946,326,20],[1,3975,326,35],[1,4004,328,8,"Alert"],[1,4006,328,13,"default"],[1,4014,328,14,"alert"],[1,4020,328,20],[1,4027,328,28],[1,4062,330,13],[1,4064,331,4],[1,4067,332,5],[1,4068,332,6,"userId"],[1,4070,332,14,"socket"],[1,4074,336,8,"acceptOffer"],[1,4077,336,22],[1,4079,336,22,"useCallback"],[1,4081,336,33,"useCallback"],[1,4094,336,34,"async"],[1,4100,336,41,"offerId"],[1,4102,336,58,"driverId"],[1,4107,337,4],[1,4111,337,9,"userId"],[1,4115,337,20,"socket"],[1,4117,337,28],[1,4124,337,35],[1,4126,340,4,"setOffers"],[1,4128,340,14,"prev"],[1,4131,340,22,"prev"],[1,4133,340,27,"map"],[1,4137,340,31,"o"],[1,4140,341,6,"o"],[1,4142,341,8,"id"],[1,4147,341,15,"offerId"],[1,4150,341,26,"o"],[1,4152,341,28,"offer_id"],[1,4163,341,41,"offerId"],[1,4165,342,10],[1,4169,342,15,"o"],[1,4171,342,18,"status"],[1,4178,342,26],[1,4191,343,10,"o"],[1,4195,346,4],[1,4199,348,6],[1,4205,348,12,"response"],[1,4213,348,29,"fetch"],[1,4219,349,8],[1,4222,349,11,"API_URL"],[1,4258,349,53,"userId"],[1,4272,349,72,"offerId"],[1,4276,350,8],[1,4277,350,10,"method"],[1,4284,350,18],[1,4293,353,6],[1,4297,353,11,"isMountedRef"],[1,4299,353,24,"current"],[1,4307,353,33],[1,4314,353,40],[1,4316,355,6],[1,4322,355,12,"data"],[1,4330,355,25,"response"],[1,4332,355,34,"json"],[1,4339,357,6],[1,4346,357,10,"data"],[1,4348,357,15,"success"],[1,4357,359,8,"socket"],[1,4359,359,15,"emit"],[1,4364,359,20],[1,4379,359,36],[1,4380,360,10,"request_id"],[1,4391,360,22,"requestId"],[1,4393,361,10,"offer_id"],[1,4402,361,20,"offerId"],[1,4404,362,10,"driver_id"],[1,4414,362,21,"driverId"],[1,4416,363,10,"tag_id"],[1,4423,363,18,"tagId"],[1,4425,364,10,"passenger_id"],[1,4438,364,24,"userId"],[1,4442,368,8,"setOffers"],[1,4444,368,18,"prev"],[1,4447,368,26,"prev"],[1,4449,368,31,"filter"],[1,4456,368,38,"o"],[1,4459,368,43,"o"],[1,4461,368,45,"id"],[1,4466,368,52,"offerId"],[1,4469,368,63,"o"],[1,4471,368,65,"offer_id"],[1,4482,368,78,"offerId"],[1,4487,369,15],[1,4491,372,8,"setOffers"],[1,4493,372,18,"prev"],[1,4496,372,26,"prev"],[1,4498,372,31,"map"],[1,4502,372,35,"o"],[1,4505,373,10,"o"],[1,4507,373,12,"id"],[1,4512,373,19,"offerId"],[1,4515,373,30,"o"],[1,4517,373,32,"offer_id"],[1,4528,373,45,"offerId"],[1,4530,374,14],[1,4534,374,19,"o"],[1,4536,374,22,"status"],[1,4543,374,30],[1,4554,375,14,"o"],[1,4558,377,8,"Alert"],[1,4560,377,13,"default"],[1,4568,377,14,"alert"],[1,4574,377,20],[1,4581,377,28,"data"],[1,4583,377,33,"detail"],[1,4591,377,43],[1,4618,378,15],[1,4620,380,4],[1,4621,380,6],[1,4627,380,13,"err"],[1,4630,381,6],[1,4638,381,11,"isMountedRef"],[1,4640,381,24,"current"],[1,4650,382,6,"setOffers"],[1,4652,382,16,"prev"],[1,4655,382,24,"prev"],[1,4657,382,29,"map"],[1,4661,382,33,"o"],[1,4664,383,8,"o"],[1,4666,383,10,"id"],[1,4671,383,17,"offerId"],[1,4674,383,28,"o"],[1,4676,383,30,"offer_id"],[1,4687,383,43,"offerId"],[1,4689,384,12],[1,4693,384,17,"o"],[1,4695,384,20,"status"],[1,4702,384,28],[1,4713,385,12,"o"],[1,4717,387,6,"Alert"],[1,4719,387,11,"default"],[1,4727,387,12,"alert"],[1,4733,387,18],[1,4740,387,26],[1,4775,388,13],[1,4777,389,4],[1,4780,390,5],[1,4781,390,6,"userId"],[1,4783,390,14,"socket"],[1,4785,390,22,"requestId"],[1,4787,390,33,"tagId"],[1,4791,394,8,"rejectOffer"],[1,4794,394,22],[1,4796,394,22,"useCallback"],[1,4798,394,33,"useCallback"],[1,4811,394,34,"async"],[1,4817,394,41,"offerId"],[1,4819,394,58,"driverId"],[1,4824,395,4],[1,4828,395,9,"userId"],[1,4832,395,20,"socket"],[1,4834,395,28],[1,4841,395,35],[1,4843,398,4],[1,4849,398,10,"removedOffer"],[1,4851,398,25,"offers"],[1,4853,398,32,"find"],[1,4858,398,37,"o"],[1,4861,398,42,"o"],[1,4863,398,44,"id"],[1,4868,398,51,"offerId"],[1,4871,398,62,"o"],[1,4873,398,64,"offer_id"],[1,4884,398,77,"offerId"],[1,4887,399,4,"setOffers"],[1,4889,399,14,"prev"],[1,4892,399,22,"prev"],[1,4894,399,27,"filter"],[1,4901,399,34,"o"],[1,4904,399,39,"o"],[1,4906,399,41,"id"],[1,4911,399,48,"offerId"],[1,4914,399,59,"o"],[1,4916,399,61,"offer_id"],[1,4927,399,74,"offerId"],[1,4931,401,4],[1,4935,414,6],[1,4948,402,12,"fetch"],[1,4954,403,8],[1,4957,403,11,"API_URL"],[1,4994,403,54,"userId"],[1,5008,403,73,"offerId"],[1,5012,404,8],[1,5013,404,10,"method"],[1,5020,404,18],[1,5029,408,6,"socket"],[1,5031,408,13,"emit"],[1,5036,408,18],[1,5051,408,34],[1,5052,409,8,"request_id"],[1,5063,409,20,"requestId"],[1,5065,410,8,"offer_id"],[1,5074,410,18,"offerId"],[1,5076,411,8,"driver_id"],[1,5086,411,19,"driverId"],[1,5091,414,13],[1,5092,415,4],[1,5093,415,6],[1,5099,420,6],[1,5106,417,10,"removedOffer"],[1,5109,417,26,"isMountedRef"],[1,5111,417,39,"current"],[1,5120,418,8,"setOffers"],[1,5122,418,18,"prev"],[1,5125,418,26],[1,5126,418,27,"removedOffer"],[1,5131,418,44,"prev"],[1,5136,420,13],[1,5137,421,4],[1,5140,422,5],[1,5141,422,6,"userId"],[1,5143,422,14,"socket"],[1,5145,422,22,"requestId"],[1,5147,422,33,"offers"],[1,5151,426,8,"clearOffers"],[1,5154,426,22],[1,5156,426,22,"useCallback"],[1,5158,426,33,"useCallback"],[1,5171,426,34],[1,5176,427,4,"setOffers"],[1,5178,427,14],[1,5182,428,4,"seenOfferIdsRef"],[1,5184,428,20,"current"],[1,5192,428,28,"clear"],[1,5200,429,4,"console"],[1,5208,429,12,"log"],[1,5212,429,16],[1,5256,430,5],[1,5260,432,8,"addOffer"],[1,5263,432,19],[1,5265,432,19,"useCallback"],[1,5267,432,30,"useCallback"],[1,5280,432,32,"offer"],[1,5284,433,4],[1,5290,433,10,"offerId"],[1,5292,433,20,"offer"],[1,5294,433,26,"id"],[1,5298,433,32,"offer"],[1,5300,433,38,"offer_id"],[1,5309,434,8,"offerId"],[1,5313,434,20,"seenOfferIdsRef"],[1,5315,434,36,"current"],[1,5323,434,44,"has"],[1,5327,434,48,"offerId"],[1,5332,435,6,"seenOfferIdsRef"],[1,5334,435,22,"current"],[1,5342,435,30,"add"],[1,5346,435,34,"offerId"],[1,5349,436,6,"setOffers"],[1,5351,436,16,"prev"],[1,5354,436,24],[1,5355,436,25,"offer"],[1,5360,436,35,"prev"],[1,5366,438,5],[1,5370,442,2],[1,5376,442,9],[1,5377,443,4,"offers"],[1,5384,443,12,"offers"],[1,5386,443,19,"filter"],[1,5393,443,26,"o"],[1,5396,443,44],[1,5408,443,31,"o"],[1,5410,443,33,"status"],[1,5418,443,70],[1,5432,443,57,"o"],[1,5434,443,59,"status"],[1,5442,443,98],[1,5455,443,85,"o"],[1,5457,443,87,"status"],[1,5465,444,4,"isLoading"],[1,5477,445,4,"error"],[1,5485,446,4,"sendOffer"],[1,5497,447,4,"acceptOffer"],[1,5511,448,4,"rejectOffer"],[1,5525,449,4,"clearOffers"],[1,5539,450,4,"addOffer"],[1,5550,452,0],[1,5551,454,0],[1,5555,454,0,"_default"],[1,5557,454,15,"useOffers"],[1,5558,454,25],[1,5561]],"functionMap":{"names":["<global>","useOffers","useEffect$argument_0","handleNewOffer","setOffers$argument_0","prev.some$argument_0","handleOfferAccepted","prev.map$argument_0","handleOfferRejected","prev.filter$argument_0","handleOfferSentAck","handleTagCancelled","<anonymous>","sendOffer","setTimeout$argument_0","acceptOffer","rejectOffer","offers.find$argument_0","clearOffers","addOffer","offers.filter$argument_0"],"mappings":"AAA;OCqE;YCuB;2BCgB;gBC0C;sBCE,+CD;ODI;KDG;gCIG;gBFI,iBG;aHG;OEC;KJG;gCMG;gBJI,oBK;8DLC;OIC;KNG;+BQG;kBNO,iBG;eHG;SMC;KRE;+BSG;KTQ;WUW;KVQ;GDC;gCYI;cTyB,kCS;mCCO,wBD;kBTkC,iBG;eHG;SSC;kBTO,oBK,0BL,CS;gBTS,oBK,0BL,CS;GZS;kCcI;cXI,iBG;WHG;KWC;kBXwB,oBK,+CL,CW;kBXI,iBG;eHG;SWC;gBXM,iBG;aHG;OWC;GdI;kCeI;qCCI,+CD;cZC,oBK,+CL,CY;kBZmB,+BY;GfI;kCiBI;GjBI;+BkBE;gBfI,wBe;GlBE;0BmBK,kFnB;CDS"},"hasCjsExports":false},"type":"js/module"}]}