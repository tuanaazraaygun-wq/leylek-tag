{"dependencies":[{"name":"event-target-shim","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":23,"index":129},"end":{"line":7,"column":51,"index":157}}],"key":"t/kqAMiLesXIzkIltlY+wVSfky4=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/index","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"55efhPHw3gz2FoQtoN2yI1VuhbM=","exportNames":["*"],"imports":1}},{"name":"./MediaStreamTrack","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":47,"index":250},"end":{"line":9,"column":76,"index":279}}],"key":"o0F23v+3OKyCF3fnMyw+QVl2Ke0=","exportNames":["*"],"imports":1}},{"name":"./RTCUtil","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":10,"column":15,"index":297},"end":{"line":10,"column":35,"index":317}}],"key":"Vec4jd22qPLTEFX0oFYI4F3/9lQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n  var _eventTargetShim = require(_dependencyMap[0], \"event-target-shim\");\n  var _reactNative = require(_dependencyMap[1], \"react-native-web/dist/index\");\n  var _MediaStreamTrack = _interopRequireDefault(require(_dependencyMap[2], \"./MediaStreamTrack\"));\n  var _RTCUtil = require(_dependencyMap[3], \"./RTCUtil\");\n  function _interopRequireDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  const {\n    WebRTCModule\n  } = _reactNative.NativeModules;\n  class MediaStream extends _eventTargetShim.EventTarget {\n    _tracks = [];\n\n    /**\n     * The identifier of this MediaStream unique within the associated\n     * WebRTCModule instance. As the id of a remote MediaStream instance is unique\n     * only within the associated RTCPeerConnection, it is not sufficiently unique\n     * to identify this MediaStream across multiple RTCPeerConnections and to\n     * unambiguously differentiate it from a local MediaStream instance not added\n     * to an RTCPeerConnection.\n     */\n\n    /**\n     * A MediaStream can be constructed in several ways, depending on the parameters\n     * that are passed here.\n     *\n     * - undefined: just a new stream, with no tracks.\n     * - MediaStream instance: a new stream, with a copy of the tracks of the passed stream.\n     * - Array of MediaStreamTrack: a new stream with a copy of the tracks in the array.\n     * - object: a new stream instance, represented by the passed info object, this is always\n     *   done internally, when the stream is first created in native and the JS wrapper is\n     *   built afterwards.\n     */\n    constructor(arg) {\n      super();\n\n      // Assign a UUID to start with. It will get overridden for remote streams.\n      this._id = (0, _RTCUtil.uniqueID)();\n\n      // Local MediaStreams are created by WebRTCModule to have their id and\n      // reactTag equal because WebRTCModule follows the respective standard's\n      // recommendation for id generation i.e. uses UUID which is unique enough\n      // for the purposes of reactTag.\n      this._reactTag = this._id;\n      if (typeof arg === 'undefined') {\n        WebRTCModule.mediaStreamCreate(this.id);\n      } else if (arg instanceof MediaStream) {\n        WebRTCModule.mediaStreamCreate(this.id);\n        for (const track of arg.getTracks()) {\n          this.addTrack(track);\n        }\n      } else if (Array.isArray(arg)) {\n        WebRTCModule.mediaStreamCreate(this.id);\n        for (const track of arg) {\n          this.addTrack(track);\n        }\n      } else if (typeof arg === 'object' && arg.streamId && arg.streamReactTag && arg.tracks) {\n        this._id = arg.streamId;\n        this._reactTag = arg.streamReactTag;\n        for (const trackInfo of arg.tracks) {\n          // We are not using addTrack here because the track is already part of the\n          // stream, so there is no need to add it on the native side.\n          this._tracks.push(new _MediaStreamTrack.default(trackInfo));\n        }\n      } else {\n        throw new TypeError(`invalid type: ${typeof arg}`);\n      }\n    }\n    get id() {\n      return this._id;\n    }\n    get active() {\n      // TODO: can we reliably report this value?\n\n      return true;\n    }\n    addTrack(track) {\n      const index = this._tracks.indexOf(track);\n      if (index !== -1) {\n        return;\n      }\n      this._tracks.push(track);\n      WebRTCModule.mediaStreamAddTrack(this._reactTag, track.remote ? track._peerConnectionId : -1, track.id);\n    }\n    removeTrack(track) {\n      const index = this._tracks.indexOf(track);\n      if (index === -1) {\n        return;\n      }\n      this._tracks.splice(index, 1);\n      WebRTCModule.mediaStreamRemoveTrack(this._reactTag, track.remote ? track._peerConnectionId : -1, track.id);\n    }\n    getTracks() {\n      return this._tracks.slice();\n    }\n    getTrackById(trackId) {\n      return this._tracks.find(track => track.id === trackId);\n    }\n    getAudioTracks() {\n      return this._tracks.filter(track => track.kind === 'audio');\n    }\n    getVideoTracks() {\n      return this._tracks.filter(track => track.kind === 'video');\n    }\n    clone() {\n      throw new Error('Not implemented.');\n    }\n    toURL() {\n      return this._reactTag;\n    }\n    release(releaseTracks = true) {\n      const tracks = [...this._tracks];\n      for (const track of tracks) {\n        this.removeTrack(track);\n        if (releaseTracks) {\n          track.release();\n        }\n      }\n      WebRTCModule.mediaStreamRelease(this._reactTag);\n    }\n  }\n\n  /**\n   * Define the `onxxx` event handlers.\n   */\n  exports.default = MediaStream;\n  const proto = MediaStream.prototype;\n  (0, _eventTargetShim.defineEventAttribute)(proto, 'addtrack');\n  (0, _eventTargetShim.defineEventAttribute)(proto, 'removetrack');\n});","lineCount":139,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,2,5,0],[6,3,5,1],[6,4,5,2],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"default"],[7,17,6,15],[7,20,6,18],[7,25,6,23],[7,26,6,24],[8,2,7,0],[8,6,7,4,"_eventTargetShim"],[8,22,7,20],[8,25,7,23,"require"],[8,32,7,30],[8,33,7,30,"_dependencyMap"],[8,47,7,30],[8,71,7,50],[8,72,7,51],[9,2,7,52],[9,6,7,52,"_reactNative"],[9,18,7,52],[9,21,7,52,"require"],[9,28,7,52],[9,29,7,52,"_dependencyMap"],[9,43,7,52],[10,2,9,0],[10,6,9,4,"_MediaStreamTrack"],[10,23,9,21],[10,26,9,24,"_interopRequireDefault"],[10,48,9,46],[10,49,9,47,"require"],[10,56,9,54],[10,57,9,54,"_dependencyMap"],[10,71,9,54],[10,96,9,75],[10,97,9,76],[10,98,9,77],[11,2,10,0],[11,6,10,4,"_RTCUtil"],[11,14,10,12],[11,17,10,15,"require"],[11,24,10,22],[11,25,10,22,"_dependencyMap"],[11,39,10,22],[11,55,10,34],[11,56,10,35],[12,2,11,0],[12,11,11,9,"_interopRequireDefault"],[12,33,11,31,"_interopRequireDefault"],[12,34,11,32,"e"],[12,35,11,33],[12,37,11,35],[13,4,11,37],[13,11,11,44,"e"],[13,12,11,45],[13,16,11,49,"e"],[13,17,11,50],[13,18,11,51,"__esModule"],[13,28,11,61],[13,31,11,64,"e"],[13,32,11,65],[13,35,11,68],[14,6,11,70,"default"],[14,13,11,77],[14,15,11,79,"e"],[15,4,11,81],[15,5,11,82],[16,2,11,84],[17,2,12,0],[17,8,12,6],[18,4,13,2,"WebRTCModule"],[19,2,14,0],[19,3,14,1],[19,6,14,4,"_reactNative"],[19,18,14,16],[19,19,14,17,"NativeModules"],[19,32,14,30],[20,2,15,0],[20,8,15,6,"MediaStream"],[20,19,15,17],[20,28,15,26,"_eventTargetShim"],[20,44,15,42],[20,45,15,43,"EventTarget"],[20,56,15,54],[20,57,15,55],[21,4,16,2,"_tracks"],[21,11,16,9],[21,14,16,12],[21,16,16,14],[23,4,18,2],[24,0,19,0],[25,0,20,0],[26,0,21,0],[27,0,22,0],[28,0,23,0],[29,0,24,0],[30,0,25,0],[32,4,27,2],[33,0,28,0],[34,0,29,0],[35,0,30,0],[36,0,31,0],[37,0,32,0],[38,0,33,0],[39,0,34,0],[40,0,35,0],[41,0,36,0],[42,0,37,0],[43,4,38,2,"constructor"],[43,15,38,13,"constructor"],[43,16,38,14,"arg"],[43,19,38,17],[43,21,38,19],[44,6,39,4],[44,11,39,9],[44,12,39,10],[44,13,39,11],[46,6,41,4],[47,6,42,4],[47,10,42,8],[47,11,42,9,"_id"],[47,14,42,12],[47,17,42,15],[47,18,42,16],[47,19,42,17],[47,21,42,19,"_RTCUtil"],[47,29,42,27],[47,30,42,28,"uniqueID"],[47,38,42,36],[47,40,42,38],[47,41,42,39],[49,6,44,4],[50,6,45,4],[51,6,46,4],[52,6,47,4],[53,6,48,4],[53,10,48,8],[53,11,48,9,"_reactTag"],[53,20,48,18],[53,23,48,21],[53,27,48,25],[53,28,48,26,"_id"],[53,31,48,29],[54,6,49,4],[54,10,49,8],[54,17,49,15,"arg"],[54,20,49,18],[54,25,49,23],[54,36,49,34],[54,38,49,36],[55,8,50,6,"WebRTCModule"],[55,20,50,18],[55,21,50,19,"mediaStreamCreate"],[55,38,50,36],[55,39,50,37],[55,43,50,41],[55,44,50,42,"id"],[55,46,50,44],[55,47,50,45],[56,6,51,4],[56,7,51,5],[56,13,51,11],[56,17,51,15,"arg"],[56,20,51,18],[56,32,51,30,"MediaStream"],[56,43,51,41],[56,45,51,43],[57,8,52,6,"WebRTCModule"],[57,20,52,18],[57,21,52,19,"mediaStreamCreate"],[57,38,52,36],[57,39,52,37],[57,43,52,41],[57,44,52,42,"id"],[57,46,52,44],[57,47,52,45],[58,8,53,6],[58,13,53,11],[58,19,53,17,"track"],[58,24,53,22],[58,28,53,26,"arg"],[58,31,53,29],[58,32,53,30,"getTracks"],[58,41,53,39],[58,42,53,40],[58,43,53,41],[58,45,53,43],[59,10,54,8],[59,14,54,12],[59,15,54,13,"addTrack"],[59,23,54,21],[59,24,54,22,"track"],[59,29,54,27],[59,30,54,28],[60,8,55,6],[61,6,56,4],[61,7,56,5],[61,13,56,11],[61,17,56,15,"Array"],[61,22,56,20],[61,23,56,21,"isArray"],[61,30,56,28],[61,31,56,29,"arg"],[61,34,56,32],[61,35,56,33],[61,37,56,35],[62,8,57,6,"WebRTCModule"],[62,20,57,18],[62,21,57,19,"mediaStreamCreate"],[62,38,57,36],[62,39,57,37],[62,43,57,41],[62,44,57,42,"id"],[62,46,57,44],[62,47,57,45],[63,8,58,6],[63,13,58,11],[63,19,58,17,"track"],[63,24,58,22],[63,28,58,26,"arg"],[63,31,58,29],[63,33,58,31],[64,10,59,8],[64,14,59,12],[64,15,59,13,"addTrack"],[64,23,59,21],[64,24,59,22,"track"],[64,29,59,27],[64,30,59,28],[65,8,60,6],[66,6,61,4],[66,7,61,5],[66,13,61,11],[66,17,61,15],[66,24,61,22,"arg"],[66,27,61,25],[66,32,61,30],[66,40,61,38],[66,44,61,42,"arg"],[66,47,61,45],[66,48,61,46,"streamId"],[66,56,61,54],[66,60,61,58,"arg"],[66,63,61,61],[66,64,61,62,"streamReactTag"],[66,78,61,76],[66,82,61,80,"arg"],[66,85,61,83],[66,86,61,84,"tracks"],[66,92,61,90],[66,94,61,92],[67,8,62,6],[67,12,62,10],[67,13,62,11,"_id"],[67,16,62,14],[67,19,62,17,"arg"],[67,22,62,20],[67,23,62,21,"streamId"],[67,31,62,29],[68,8,63,6],[68,12,63,10],[68,13,63,11,"_reactTag"],[68,22,63,20],[68,25,63,23,"arg"],[68,28,63,26],[68,29,63,27,"streamReactTag"],[68,43,63,41],[69,8,64,6],[69,13,64,11],[69,19,64,17,"trackInfo"],[69,28,64,26],[69,32,64,30,"arg"],[69,35,64,33],[69,36,64,34,"tracks"],[69,42,64,40],[69,44,64,42],[70,10,65,8],[71,10,66,8],[72,10,67,8],[72,14,67,12],[72,15,67,13,"_tracks"],[72,22,67,20],[72,23,67,21,"push"],[72,27,67,25],[72,28,67,26],[72,32,67,30,"_MediaStreamTrack"],[72,49,67,47],[72,50,67,48,"default"],[72,57,67,55],[72,58,67,56,"trackInfo"],[72,67,67,65],[72,68,67,66],[72,69,67,67],[73,8,68,6],[74,6,69,4],[74,7,69,5],[74,13,69,11],[75,8,70,6],[75,14,70,12],[75,18,70,16,"TypeError"],[75,27,70,25],[75,28,70,26],[75,45,70,43],[75,52,70,50,"arg"],[75,55,70,53],[75,57,70,55],[75,58,70,56],[76,6,71,4],[77,4,72,2],[78,4,73,2],[78,8,73,6,"id"],[78,10,73,8,"id"],[78,11,73,8],[78,13,73,11],[79,6,74,4],[79,13,74,11],[79,17,74,15],[79,18,74,16,"_id"],[79,21,74,19],[80,4,75,2],[81,4,76,2],[81,8,76,6,"active"],[81,14,76,12,"active"],[81,15,76,12],[81,17,76,15],[82,6,77,4],[84,6,79,4],[84,13,79,11],[84,17,79,15],[85,4,80,2],[86,4,81,2,"addTrack"],[86,12,81,10,"addTrack"],[86,13,81,11,"track"],[86,18,81,16],[86,20,81,18],[87,6,82,4],[87,12,82,10,"index"],[87,17,82,15],[87,20,82,18],[87,24,82,22],[87,25,82,23,"_tracks"],[87,32,82,30],[87,33,82,31,"indexOf"],[87,40,82,38],[87,41,82,39,"track"],[87,46,82,44],[87,47,82,45],[88,6,83,4],[88,10,83,8,"index"],[88,15,83,13],[88,20,83,18],[88,21,83,19],[88,22,83,20],[88,24,83,22],[89,8,84,6],[90,6,85,4],[91,6,86,4],[91,10,86,8],[91,11,86,9,"_tracks"],[91,18,86,16],[91,19,86,17,"push"],[91,23,86,21],[91,24,86,22,"track"],[91,29,86,27],[91,30,86,28],[92,6,87,4,"WebRTCModule"],[92,18,87,16],[92,19,87,17,"mediaStreamAddTrack"],[92,38,87,36],[92,39,87,37],[92,43,87,41],[92,44,87,42,"_reactTag"],[92,53,87,51],[92,55,87,53,"track"],[92,60,87,58],[92,61,87,59,"remote"],[92,67,87,65],[92,70,87,68,"track"],[92,75,87,73],[92,76,87,74,"_peerConnectionId"],[92,93,87,91],[92,96,87,94],[92,97,87,95],[92,98,87,96],[92,100,87,98,"track"],[92,105,87,103],[92,106,87,104,"id"],[92,108,87,106],[92,109,87,107],[93,4,88,2],[94,4,89,2,"removeTrack"],[94,15,89,13,"removeTrack"],[94,16,89,14,"track"],[94,21,89,19],[94,23,89,21],[95,6,90,4],[95,12,90,10,"index"],[95,17,90,15],[95,20,90,18],[95,24,90,22],[95,25,90,23,"_tracks"],[95,32,90,30],[95,33,90,31,"indexOf"],[95,40,90,38],[95,41,90,39,"track"],[95,46,90,44],[95,47,90,45],[96,6,91,4],[96,10,91,8,"index"],[96,15,91,13],[96,20,91,18],[96,21,91,19],[96,22,91,20],[96,24,91,22],[97,8,92,6],[98,6,93,4],[99,6,94,4],[99,10,94,8],[99,11,94,9,"_tracks"],[99,18,94,16],[99,19,94,17,"splice"],[99,25,94,23],[99,26,94,24,"index"],[99,31,94,29],[99,33,94,31],[99,34,94,32],[99,35,94,33],[100,6,95,4,"WebRTCModule"],[100,18,95,16],[100,19,95,17,"mediaStreamRemoveTrack"],[100,41,95,39],[100,42,95,40],[100,46,95,44],[100,47,95,45,"_reactTag"],[100,56,95,54],[100,58,95,56,"track"],[100,63,95,61],[100,64,95,62,"remote"],[100,70,95,68],[100,73,95,71,"track"],[100,78,95,76],[100,79,95,77,"_peerConnectionId"],[100,96,95,94],[100,99,95,97],[100,100,95,98],[100,101,95,99],[100,103,95,101,"track"],[100,108,95,106],[100,109,95,107,"id"],[100,111,95,109],[100,112,95,110],[101,4,96,2],[102,4,97,2,"getTracks"],[102,13,97,11,"getTracks"],[102,14,97,11],[102,16,97,14],[103,6,98,4],[103,13,98,11],[103,17,98,15],[103,18,98,16,"_tracks"],[103,25,98,23],[103,26,98,24,"slice"],[103,31,98,29],[103,32,98,30],[103,33,98,31],[104,4,99,2],[105,4,100,2,"getTrackById"],[105,16,100,14,"getTrackById"],[105,17,100,15,"trackId"],[105,24,100,22],[105,26,100,24],[106,6,101,4],[106,13,101,11],[106,17,101,15],[106,18,101,16,"_tracks"],[106,25,101,23],[106,26,101,24,"find"],[106,30,101,28],[106,31,101,29,"track"],[106,36,101,34],[106,40,101,38,"track"],[106,45,101,43],[106,46,101,44,"id"],[106,48,101,46],[106,53,101,51,"trackId"],[106,60,101,58],[106,61,101,59],[107,4,102,2],[108,4,103,2,"getAudioTracks"],[108,18,103,16,"getAudioTracks"],[108,19,103,16],[108,21,103,19],[109,6,104,4],[109,13,104,11],[109,17,104,15],[109,18,104,16,"_tracks"],[109,25,104,23],[109,26,104,24,"filter"],[109,32,104,30],[109,33,104,31,"track"],[109,38,104,36],[109,42,104,40,"track"],[109,47,104,45],[109,48,104,46,"kind"],[109,52,104,50],[109,57,104,55],[109,64,104,62],[109,65,104,63],[110,4,105,2],[111,4,106,2,"getVideoTracks"],[111,18,106,16,"getVideoTracks"],[111,19,106,16],[111,21,106,19],[112,6,107,4],[112,13,107,11],[112,17,107,15],[112,18,107,16,"_tracks"],[112,25,107,23],[112,26,107,24,"filter"],[112,32,107,30],[112,33,107,31,"track"],[112,38,107,36],[112,42,107,40,"track"],[112,47,107,45],[112,48,107,46,"kind"],[112,52,107,50],[112,57,107,55],[112,64,107,62],[112,65,107,63],[113,4,108,2],[114,4,109,2,"clone"],[114,9,109,7,"clone"],[114,10,109,7],[114,12,109,10],[115,6,110,4],[115,12,110,10],[115,16,110,14,"Error"],[115,21,110,19],[115,22,110,20],[115,40,110,38],[115,41,110,39],[116,4,111,2],[117,4,112,2,"toURL"],[117,9,112,7,"toURL"],[117,10,112,7],[117,12,112,10],[118,6,113,4],[118,13,113,11],[118,17,113,15],[118,18,113,16,"_reactTag"],[118,27,113,25],[119,4,114,2],[120,4,115,2,"release"],[120,11,115,9,"release"],[120,12,115,10,"releaseTracks"],[120,25,115,23],[120,28,115,26],[120,32,115,30],[120,34,115,32],[121,6,116,4],[121,12,116,10,"tracks"],[121,18,116,16],[121,21,116,19],[121,22,116,20],[121,25,116,23],[121,29,116,27],[121,30,116,28,"_tracks"],[121,37,116,35],[121,38,116,36],[122,6,117,4],[122,11,117,9],[122,17,117,15,"track"],[122,22,117,20],[122,26,117,24,"tracks"],[122,32,117,30],[122,34,117,32],[123,8,118,6],[123,12,118,10],[123,13,118,11,"removeTrack"],[123,24,118,22],[123,25,118,23,"track"],[123,30,118,28],[123,31,118,29],[124,8,119,6],[124,12,119,10,"releaseTracks"],[124,25,119,23],[124,27,119,25],[125,10,120,8,"track"],[125,15,120,13],[125,16,120,14,"release"],[125,23,120,21],[125,24,120,22],[125,25,120,23],[126,8,121,6],[127,6,122,4],[128,6,123,4,"WebRTCModule"],[128,18,123,16],[128,19,123,17,"mediaStreamRelease"],[128,37,123,35],[128,38,123,36],[128,42,123,40],[128,43,123,41,"_reactTag"],[128,52,123,50],[128,53,123,51],[129,4,124,2],[130,2,125,0],[132,2,127,0],[133,0,128,0],[134,0,129,0],[135,2,130,0,"exports"],[135,9,130,7],[135,10,130,8,"default"],[135,17,130,15],[135,20,130,18,"MediaStream"],[135,31,130,29],[136,2,131,0],[136,8,131,6,"proto"],[136,13,131,11],[136,16,131,14,"MediaStream"],[136,27,131,25],[136,28,131,26,"prototype"],[136,37,131,35],[137,2,132,0],[137,3,132,1],[137,4,132,2],[137,6,132,4,"_eventTargetShim"],[137,22,132,20],[137,23,132,21,"defineEventAttribute"],[137,43,132,41],[137,45,132,43,"proto"],[137,50,132,48],[137,52,132,50],[137,62,132,60],[137,63,132,61],[138,2,133,0],[138,3,133,1],[138,4,133,2],[138,6,133,4,"_eventTargetShim"],[138,22,133,20],[138,23,133,21,"defineEventAttribute"],[138,43,133,41],[138,45,133,43,"proto"],[138,50,133,48],[138,52,133,50],[138,65,133,63],[138,66,133,64],[139,0,133,65],[139,3]],"functionMap":{"names":["<global>","_interopRequireDefault","MediaStream","constructor","get__id","get__active","addTrack","removeTrack","getTracks","getTrackById","_tracks.find$argument_0","getAudioTracks","_tracks.filter$argument_0","getVideoTracks","clone","toURL","release"],"mappings":"AAA;ACU,qFD;AEI;ECuB;GDkC;EEC;GFE;EGC;GHI;EIC;GJO;EKC;GLO;EMC;GNE;EOC;6BCC,6BD;GPC;ESC;+BCC,+BD;GTC;EWC;+BDC,+BC;GXC;EYC;GZE;EaC;GbE;EcC;GdS;CFC"},"hasCjsExports":true},"type":"js/module"}]}